<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[Linux 定时任务 crontab 命令详解]]></title>
      <url>http://bysonline.github.io/2016/09/13/Linux-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-crontab-%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p>安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install crontabs</div></pre></td></tr></table></figure></p>
<p>查看当前用户的定时任务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">crontab -l</div></pre></td></tr></table></figure></p>
<p>启动定时任务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">5 3 * * * /u01/backup.sh</div></pre></td></tr></table></figure></p>
<p>crontab 时间格式<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/crontab.png" alt=""></p>
<p>举例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">每分钟执行一次            </div><div class="line">*  *  *  *  *</div><div class="line"></div><div class="line">每隔一小时执行一次        </div><div class="line">00  *  *  *  *</div><div class="line">or</div><div class="line">* */1 * * *  (/表示频率)</div><div class="line"></div><div class="line">每小时的 15 和 45 分各执行一次</div><div class="line">15,45 * * * * （,表示并列）</div><div class="line"></div><div class="line">在每天上午 8 - 11 时中间每小时 15 ，45分各执行一次</div><div class="line">15,45 8-11 * * * command （-表示范围）</div><div class="line"></div><div class="line">每个星期一的上午 8 点到 11 点的第 3 和第 15 分钟执行</div><div class="line">3,15 8-11 * * 1 command</div><div class="line"></div><div class="line">每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行</div><div class="line">3,15 8-11 */2 * * command</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[风铃企业查询api接口]]></title>
      <url>http://bysonline.github.io/2016/09/08/%E9%A3%8E%E9%93%83%E4%BC%81%E4%B8%9A%E6%9F%A5%E8%AF%A2api%E6%8E%A5%E5%8F%A3/</url>
      <content type="html"><![CDATA[<h2 id="1-服务简介"><a href="#1-服务简介" class="headerlink" title="1 服务简介"></a>1 服务简介</h2><p>企业基本信息查询api接口是内部服务接口，未做权限检查。<br>此文档为内部交流使用。</p>
<h2 id="2-服务器端描述"><a href="#2-服务器端描述" class="headerlink" title="2 服务器端描述"></a>2 服务器端描述</h2><h3 id="2-1-简介"><a href="#2-1-简介" class="headerlink" title="2.1 简介"></a>2.1 简介</h3><table>
<thead>
<tr>
<th>术语</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>测试地址</td>
<td><a href="http://192.168.11.21:8080/query/entInfo" target="_blank" rel="external">http://192.168.11.21:8080/query/entInfo</a></td>
</tr>
</tbody>
</table>
<h3 id="2-2-说明"><a href="#2-2-说明" class="headerlink" title="2.2 说明"></a>2.2 说明</h3><p>该接口为风铃向阿里提供查询服务的数据查询接口。<br>目前支持查询的数据集包括：企业照面信息，管理人员，股东，股东对外投资，法人对外投资，法人对外任职，股权冻结，股权出质，分支机构，动产抵押，动产抵押物，行政处罚，失信被执行人，被执行人，变更历史，清算，组织机构代码。<br>支持查询个体工商户基本信息。</p>
<h3 id="2-3-申明"><a href="#2-3-申明" class="headerlink" title="2.3 申明"></a>2.3 申明</h3><p>本文档仅提供给授权开发商设计相关接口服务使用,未经允许不得对外布。 本文档中可能存在技术部分错误或印刷不清晰,我们会定期进行更改并发布新版本,对资料中描述的产品改 进或更改,不在另行通知。</p>
<h2 id="3-客户端调用方法描述"><a href="#3-客户端调用方法描述" class="headerlink" title="3 客户端调用方法描述"></a>3 客户端调用方法描述</h2><h3 id="3-1-电信数据核查"><a href="#3-1-电信数据核查" class="headerlink" title="3.1 电信数据核查"></a>3.1 电信数据核查</h3><p>####3.1.1  HTTP HEADER设置<br>无</p>
<h4 id="3-1-2-请求参数描述"><a href="#3-1-2-请求参数描述" class="headerlink" title="3.1.2 请求参数描述"></a>3.1.2 请求参数描述</h4><table>
<thead>
<tr>
<th>参数名称</th>
<th>类型</th>
<th>是否必需</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>entName</td>
<td>string</td>
<td>必须</td>
<td>企业名称</td>
</tr>
<tr>
<td>mask</td>
<td>string</td>
<td>必须</td>
<td>掩码为任意项组合。basic,shareHolders,priPerson,priPersonInv,priPersonPosition,entInv,sharesFrost, sharesImpawn,filiation,bzxr,xzcf,disSxbzxr,morGuaInfo,morInfo,alter,liquidation,orgCode</td>
</tr>
<tr>
<td>entType</td>
<td>string</td>
<td>必须</td>
<td>ent或gt</td>
</tr>
</tbody>
</table>
<h4 id="3-1-3-请求示例"><a href="#3-1-3-请求示例" class="headerlink" title="3.1.3 请求示例"></a>3.1.3 请求示例</h4><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">GET http://192.168.11.21:8080/query/entInfo?entName=%E5%A4%A7%E9%80%9A%E5%8E%BF%E8%AF%9A%E5%8F%8B%E6%B1%BD%E8%BD%A6%E8%A3%85%E7%92%9C</div><div class="line"> &amp;mask=basic%2CshareHolders%2CpriPerson%2CpriPersonInv%2CpriPersonPosition%2CentInv%2CsharesFrost%2C</div><div class="line"> sharesImpawn%2Cfiliation%2Cbzxr%2Cxzcf%2CdisSxbzxr%2CmorGuaInfo%2CmorInfo%2Calter%2Cliquidation&amp;entType=gt</div></pre></td></tr></table></figure>
<h4 id="3-1-4-返回值参数描述"><a href="#3-1-4-返回值参数描述" class="headerlink" title="3.1.4 返回值参数描述"></a>3.1.4 返回值参数描述</h4><table>
<thead>
<tr>
<th>类</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>basic</td>
<td>Object</td>
<td>照面信息</td>
</tr>
<tr>
<td>shareHolders</td>
<td>List</td>
<td>股东</td>
</tr>
<tr>
<td>priPerson</td>
<td>List</td>
<td>管理人员</td>
</tr>
<tr>
<td>priPersonInv</td>
<td>List</td>
<td>法人对外投资</td>
</tr>
<tr>
<td>priPersonPosition</td>
<td>List</td>
<td>法人对外任职</td>
</tr>
<tr>
<td>entInv</td>
<td>List</td>
<td>企业对外任职</td>
</tr>
<tr>
<td>sharesFrost</td>
<td>List</td>
<td>股权冻结</td>
</tr>
<tr>
<td>sharesImpawn</td>
<td>List</td>
<td>股权出质</td>
</tr>
<tr>
<td>filiation</td>
<td>List</td>
<td>分支机构</td>
</tr>
<tr>
<td>bzxr</td>
<td>List</td>
<td>被执行人</td>
</tr>
<tr>
<td>xzcf</td>
<td>List</td>
<td>行政处罚</td>
</tr>
<tr>
<td>disSxbzxr</td>
<td>List</td>
<td>失信被执行人</td>
</tr>
<tr>
<td>morGuaInfo</td>
<td>List</td>
<td>动产抵押物</td>
</tr>
<tr>
<td>morInfo</td>
<td>List</td>
<td>动产抵押</td>
</tr>
<tr>
<td>alter</td>
<td>List</td>
<td>变更历史</td>
</tr>
<tr>
<td>liquidation</td>
<td>List</td>
<td>清算</td>
</tr>
<tr>
<td>orgCode</td>
<td>List</td>
<td>组织机构代码</td>
</tr>
</tbody>
</table>
<h4 id="3-1-5-响应示例"><a href="#3-1-5-响应示例" class="headerlink" title="3.1.5 响应示例"></a>3.1.5 响应示例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;basic&quot;:&#123;</div><div class="line">        &quot;entName&quot;:&quot;大通县诚友汽车装璜&quot;,</div><div class="line">        &quot;name&quot;:&quot;张文刚&quot;,</div><div class="line">        &quot;identity&quot;:&quot;&quot;,</div><div class="line">        &quot;regNo&quot;:&quot;6301213010207&quot;,</div><div class="line">        &quot;oriRegNo&quot;:&quot;&quot;,</div><div class="line">        &quot;orgCodes&quot;:&quot;&quot;,</div><div class="line">        &quot;regCap&quot;:&quot;5000&quot;,</div><div class="line">        &quot;recCap&quot;:&quot;&quot;,</div><div class="line">        &quot;regCapCur&quot;:&quot;&quot;,</div><div class="line">        &quot;esDate&quot;:&quot;2006-11-07&quot;,</div><div class="line">        &quot;opFrom&quot;:&quot;2006-11-07&quot;,</div><div class="line">        &quot;opTo&quot;:&quot;2009-12-31&quot;,</div><div class="line">        &quot;entType&quot;:&quot;9999&quot;,</div><div class="line">        &quot;entStatus&quot;:&quot;3&quot;,</div><div class="line">        &quot;changeDate&quot;:&quot;2006-11-07&quot;,</div><div class="line">        &quot;canDate&quot;:&quot;2006-11-07&quot;,</div><div class="line">        &quot;revDate&quot;:&quot;&quot;,</div><div class="line">        &quot;dom&quot;:&quot;大通县桥头镇解放路&quot;,</div><div class="line">        &quot;abuItem&quot;:&quot;汽车装璜 服务***&quot;,</div><div class="line">        &quot;cbuItem&quot;:&quot;汽车装璜 服务***&quot;,</div><div class="line">        &quot;opScope&quot;:&quot;&quot;,</div><div class="line">        &quot;opScoAndForm&quot;:&quot;汽车装璜 服务***&quot;,</div><div class="line">        &quot;regOrgCode&quot;:&quot;630121&quot;,</div><div class="line">        &quot;regOrgProvince&quot;:&quot;630000&quot;,</div><div class="line">        &quot;ancheYear&quot;:&quot;&quot;,</div><div class="line">        &quot;ancheDate&quot;:&quot;&quot;,</div><div class="line">        &quot;industryPhyCode&quot;:&quot;O&quot;,</div><div class="line">        &quot;industryCoCode&quot;:&quot;8011&quot;,</div><div class="line">        &quot;empNum&quot;:&quot;1&quot;,</div><div class="line">        &quot;entNameEng&quot;:&quot;&quot;,</div><div class="line">        &quot;tel&quot;:&quot;2013306&quot;,</div><div class="line">        &quot;creditCode&quot;:&quot;&quot;,</div><div class="line">        &quot;province&quot;:&quot;&quot;,</div><div class="line">        &quot;oploc&quot;:&quot;大通县桥头镇解放路&quot;,</div><div class="line">        &quot;domDistrict&quot;:&quot;630121001&quot;,</div><div class="line">        &quot;pripid&quot;:&quot;630000_630121000052006110715045&quot;</div><div class="line">    &#125;,</div><div class="line">    &quot;shareHolders&quot;:[    ],</div><div class="line">    &quot;priPerson&quot;:[    ],</div><div class="line">    &quot;priPersonInv&quot;:[    ],</div><div class="line">    &quot;priPersonPosition&quot;:[    ],</div><div class="line">    &quot;entInv&quot;:[    ],</div><div class="line">    &quot;sharesFrost&quot;:[    ],</div><div class="line">    &quot;sharesImpawn&quot;:[    ],</div><div class="line">    &quot;filiation&quot;:[    ],</div><div class="line">    &quot;bzxr&quot;:[    ],</div><div class="line">    &quot;xzcf&quot;:[    ],</div><div class="line">    &quot;disSxbzxr&quot;:[    ],</div><div class="line">    &quot;morGuaInfo&quot;:[    ],</div><div class="line">    &quot;morInfo&quot;:[    ],</div><div class="line">    &quot;alter&quot;:[    ],</div><div class="line">    &quot;liquidation&quot;:[    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>说明：数据集会返回全部字段。<br><strong>1. Basic</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entName</td>
<td>企业名称</td>
</tr>
<tr>
<td>name</td>
<td>法定代表人姓名</td>
</tr>
<tr>
<td>identity</td>
<td>个人识别码</td>
</tr>
<tr>
<td>regNo</td>
<td>注册号（新）</td>
</tr>
<tr>
<td>oriRegNo</td>
<td>原注册号</td>
</tr>
<tr>
<td>orgCodes</td>
<td>组织机构代码</td>
</tr>
<tr>
<td>regCap</td>
<td>注册资本(万元)</td>
</tr>
<tr>
<td>recCap</td>
<td>实收资本(万元)</td>
</tr>
<tr>
<td>regCapCur</td>
<td>注册资本币种</td>
</tr>
<tr>
<td>esDate</td>
<td>开业日期</td>
</tr>
<tr>
<td>opFrom</td>
<td>经营期限自</td>
</tr>
<tr>
<td>opTo</td>
<td>经营期限至</td>
</tr>
<tr>
<td>entType</td>
<td>企业(机构)类型</td>
</tr>
<tr>
<td>entStatus</td>
<td>经营状态</td>
</tr>
<tr>
<td>changeDate</td>
<td>变更日期</td>
</tr>
<tr>
<td>canDate</td>
<td>注销日期</td>
</tr>
<tr>
<td>revDate</td>
<td>吊销日期</td>
</tr>
<tr>
<td>dom</td>
<td>住址</td>
</tr>
<tr>
<td>abuItem</td>
<td>许可经营项目</td>
</tr>
<tr>
<td>cbuItem</td>
<td>一般经营项目</td>
</tr>
<tr>
<td>opScope</td>
<td>经营(业务)范围</td>
</tr>
<tr>
<td>opScoAndForm</td>
<td>经营(业务)范围及方式</td>
</tr>
<tr>
<td>regOrgCode</td>
<td>注册地址行政区编号</td>
</tr>
<tr>
<td>regOrgProvince</td>
<td>所在省份</td>
</tr>
<tr>
<td>ancheYear</td>
<td>最后年检年度</td>
</tr>
<tr>
<td>ancheDate</td>
<td>最后年检日期</td>
</tr>
<tr>
<td>industryPhyCode</td>
<td>行业门类代码</td>
</tr>
<tr>
<td>industryCoCode</td>
<td>国民经济行业代码</td>
</tr>
<tr>
<td>empNum</td>
<td>员工人数</td>
</tr>
<tr>
<td>entNameEng</td>
<td>企业英文名称</td>
</tr>
<tr>
<td>tel</td>
<td>电话</td>
</tr>
<tr>
<td>creditCode</td>
<td>信用代码</td>
</tr>
<tr>
<td>province</td>
<td>省节点编码</td>
</tr>
<tr>
<td>oploc</td>
<td>经营场所</td>
</tr>
<tr>
<td>domDistrict</td>
<td>住所所在行政区划</td>
</tr>
<tr>
<td>pripid</td>
<td>pripid</td>
</tr>
</tbody>
</table>
<p><strong>2. ShareHolder</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>inv</td>
<td>股东名称</td>
</tr>
<tr>
<td>identity</td>
<td>个人识别码</td>
</tr>
<tr>
<td>invType</td>
<td>股东类型</td>
</tr>
<tr>
<td>subConAm</td>
<td>认缴出资额(万元)</td>
</tr>
<tr>
<td>conDate</td>
<td>出资日期</td>
</tr>
<tr>
<td>currency</td>
<td>币种，CA04</td>
</tr>
<tr>
<td>conform</td>
<td>出资方式</td>
</tr>
<tr>
<td>conprop</td>
<td>出资比例</td>
</tr>
<tr>
<td>country</td>
<td>国别</td>
</tr>
</tbody>
</table>
<p><strong>3. PriPerson</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>人员姓名</td>
</tr>
<tr>
<td>identity</td>
<td>个人标识</td>
</tr>
<tr>
<td>position</td>
<td>职务</td>
</tr>
<tr>
<td>sex</td>
<td>性别</td>
</tr>
<tr>
<td>birth</td>
<td>出生年份</td>
</tr>
</tbody>
</table>
<p><strong>4. PriPersonInv</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>法人名称</td>
</tr>
<tr>
<td>entJgName</td>
<td>企业机构名称</td>
</tr>
<tr>
<td>regNo</td>
<td>注册号</td>
</tr>
<tr>
<td>entType</td>
<td>企业类型</td>
</tr>
<tr>
<td>regCap</td>
<td>注册资本</td>
</tr>
<tr>
<td>regCapCur</td>
<td>注册资本币种</td>
</tr>
<tr>
<td>entStatus</td>
<td>企业状态</td>
</tr>
<tr>
<td>canDate</td>
<td>注销日期</td>
</tr>
<tr>
<td>revDate</td>
<td>吊销日期</td>
</tr>
<tr>
<td>regOrgCode</td>
<td>登记机关</td>
</tr>
<tr>
<td>subConAm</td>
<td>认缴出资额</td>
</tr>
<tr>
<td>currency</td>
<td>认缴出资额币种</td>
</tr>
<tr>
<td>conform</td>
<td>出资方式</td>
</tr>
<tr>
<td>conprop</td>
<td>出资比例</td>
</tr>
<tr>
<td>esDate</td>
<td>开业日期</td>
</tr>
</tbody>
</table>
<p><strong>5. PriPersonPosition</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>法人姓名</td>
</tr>
<tr>
<td>entJgName</td>
<td>企业机构名称</td>
</tr>
<tr>
<td>regNo</td>
<td>注册号</td>
</tr>
<tr>
<td>entType</td>
<td>企业机构类型</td>
</tr>
<tr>
<td>regCap</td>
<td>注册资本</td>
</tr>
<tr>
<td>regCapCur</td>
<td>注册资本币种</td>
</tr>
<tr>
<td>entStatus</td>
<td>企业状态</td>
</tr>
<tr>
<td>canDate</td>
<td>注销日期</td>
</tr>
<tr>
<td>revDate</td>
<td>吊销日期</td>
</tr>
<tr>
<td>regOrgCode</td>
<td>注册地址行政区编号</td>
</tr>
<tr>
<td>position</td>
<td>职务</td>
</tr>
<tr>
<td>lerepSign</td>
<td>是否法人</td>
</tr>
<tr>
<td>esDate</td>
<td>开业日期</td>
</tr>
</tbody>
</table>
<p><strong>6. EntInv</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>entJgName</td>
<td>企业机构名称</td>
</tr>
<tr>
<td>regNo</td>
<td>注册号</td>
</tr>
<tr>
<td>entType</td>
<td>企业类型</td>
</tr>
<tr>
<td>regCap</td>
<td>注册资本</td>
</tr>
<tr>
<td>regCapCur</td>
<td>注册资本币种</td>
</tr>
<tr>
<td>entStatus</td>
<td>企业状态</td>
</tr>
<tr>
<td>canDate</td>
<td>注销日期</td>
</tr>
<tr>
<td>revDate</td>
<td>吊销日期</td>
</tr>
<tr>
<td>regOrgCode</td>
<td>登记机关</td>
</tr>
<tr>
<td>subConAm</td>
<td>认缴出资额</td>
</tr>
<tr>
<td>currency</td>
<td>认缴出资额币种</td>
</tr>
<tr>
<td>conform</td>
<td>出资方式</td>
</tr>
<tr>
<td>conprop</td>
<td>出资比例</td>
</tr>
<tr>
<td>esDate</td>
<td>开业日期</td>
</tr>
<tr>
<td>name</td>
<td>法人姓名</td>
</tr>
</tbody>
</table>
<p><strong>7. SharesFrost</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>froDocNo</td>
<td>冻结文号</td>
</tr>
<tr>
<td>froAuth</td>
<td>冻结机关</td>
</tr>
<tr>
<td>froFrom</td>
<td>开始日期</td>
</tr>
<tr>
<td>froTo</td>
<td>冻结截止日期</td>
</tr>
<tr>
<td>froAm</td>
<td>冻结金额</td>
</tr>
<tr>
<td>thawAuth</td>
<td>解冻机关</td>
</tr>
<tr>
<td>thawDocNo</td>
<td>解冻文号</td>
</tr>
<tr>
<td>thawDate</td>
<td>解冻日期</td>
</tr>
<tr>
<td>thawComment</td>
<td>解冻说明</td>
</tr>
</tbody>
</table>
<p><strong>8. SharesImpawn</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>impOrg</td>
<td>质权人姓名</td>
</tr>
<tr>
<td>impOrgType</td>
<td>出质人类别</td>
</tr>
<tr>
<td>impAm</td>
<td>出质金额</td>
</tr>
<tr>
<td>impOnRecDate</td>
<td>出质备案日期</td>
</tr>
<tr>
<td>impExaeep</td>
<td>出质审批部门</td>
</tr>
<tr>
<td>impSanDate</td>
<td>出质批准日期</td>
</tr>
<tr>
<td>impTo</td>
<td>出质截至日期</td>
</tr>
</tbody>
</table>
<p><strong>9.  Bzxr</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>caseNo</td>
<td>案号</td>
</tr>
<tr>
<td>name</td>
<td>被执行人姓名/名称</td>
</tr>
<tr>
<td>regNo</td>
<td>身份证号码/组织机构代码</td>
</tr>
<tr>
<td>gender</td>
<td>性别</td>
</tr>
<tr>
<td>age</td>
<td>年龄</td>
</tr>
<tr>
<td>province</td>
<td>省</td>
</tr>
<tr>
<td>ysfzd</td>
<td>身份证原始发证地</td>
</tr>
<tr>
<td>courtName</td>
<td>执行法院</td>
</tr>
<tr>
<td>regDate</td>
<td>立案时间</td>
</tr>
<tr>
<td>status</td>
<td>状态</td>
</tr>
<tr>
<td>money</td>
<td>执行标的</td>
</tr>
<tr>
<td>focusNum</td>
<td>关注次数</td>
</tr>
</tbody>
</table>
<p><strong>10. DisSxbzxr</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td> caseNo</td>
<td>案号</td>
</tr>
<tr>
<td>name</td>
<td>被执行人姓名</td>
</tr>
<tr>
<td>type</td>
<td>失信人类型</td>
</tr>
<tr>
<td>gender</td>
<td>性别</td>
</tr>
<tr>
<td>age</td>
<td>年龄</td>
</tr>
<tr>
<td>regNo</td>
<td>身份证号码/工商注册号</td>
</tr>
<tr>
<td>ysfzd</td>
<td>身份证原始发证地</td>
</tr>
<tr>
<td>businessEntity</td>
<td>法定代表人/负责人姓名</td>
</tr>
<tr>
<td>regDate</td>
<td>立案时间</td>
</tr>
<tr>
<td>publishDate</td>
<td>发布时间</td>
</tr>
<tr>
<td>courtName</td>
<td>执行法院</td>
</tr>
<tr>
<td>province</td>
<td>省份</td>
</tr>
<tr>
<td>gistNo</td>
<td>执行依据文号</td>
</tr>
<tr>
<td>gistUnit</td>
<td>做出执行依据单位</td>
</tr>
<tr>
<td>duty</td>
<td>生效法律文书确定的义务</td>
</tr>
<tr>
<td>disruptTypeName</td>
<td>失信被执行人行为具体情形</td>
</tr>
<tr>
<td>performance</td>
<td>被执行人的履行情况</td>
</tr>
<tr>
<td>performedPart</td>
<td>已履行(元)</td>
</tr>
<tr>
<td>unperformPart</td>
<td>未履行(元)</td>
</tr>
<tr>
<td>focusNum</td>
<td>关注次数</td>
</tr>
<tr>
<td>exitDate</td>
<td>退出日期</td>
</tr>
<tr>
<td>caseStatus</td>
<td>案件状态</td>
</tr>
</tbody>
</table>
<p><strong>11. Alter</strong><br>字段名|字段說明<br>-|-<br>altDate|变更时间<br>altItem|变更项<br>altBe|变更前<br>altAf|变更后</p>
<p><strong>12. Filiation</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>brName</td>
<td>分支机构名称</td>
</tr>
<tr>
<td>brRegNo</td>
<td>分支机构企业注册号</td>
</tr>
<tr>
<td>brPrincipal</td>
<td>分支机构负责人</td>
</tr>
<tr>
<td>cbuItem</td>
<td>一般经营项目</td>
</tr>
<tr>
<td>brAddr</td>
<td>分支机构地址</td>
</tr>
</tbody>
</table>
<p><strong>13. Liquidation</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ligEntity</td>
<td>清算责任人</td>
</tr>
<tr>
<td>ligPrincipal</td>
<td>清算负责人</td>
</tr>
<tr>
<td>liqMen</td>
<td>清算组成员</td>
</tr>
<tr>
<td>tel</td>
<td>联系电话</td>
</tr>
<tr>
<td>ligst</td>
<td>清算完结情况，CD14</td>
</tr>
<tr>
<td>ligEndDate</td>
<td>清算完结日期</td>
</tr>
<tr>
<td>debtTranee</td>
<td>债务承接人</td>
</tr>
<tr>
<td>claimTranee</td>
<td>债权承接人</td>
</tr>
</tbody>
</table>
<p><strong>14. MorInfo</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>morRegId</td>
<td>抵押ID</td>
</tr>
<tr>
<td>morTgagor</td>
<td>抵押人</td>
</tr>
<tr>
<td>mor</td>
<td>抵押权人</td>
</tr>
<tr>
<td>regOrgCode</td>
<td>登记机关</td>
</tr>
<tr>
<td>regDate</td>
<td>登记日期</td>
</tr>
<tr>
<td>morType</td>
<td>状态标识</td>
</tr>
<tr>
<td>morRegNo</td>
<td>登记证号</td>
</tr>
<tr>
<td>appRegRea</td>
<td>申请抵押原因/申请抵押物登记原因</td>
</tr>
<tr>
<td>priClasecKind</td>
<td>被担保的主债权种类</td>
</tr>
<tr>
<td>priClasecAm</td>
<td>被担保的主债权数额</td>
</tr>
<tr>
<td>pefPerFrom</td>
<td>履约起始日期/履约期限自</td>
</tr>
<tr>
<td>pefPerTo</td>
<td>履约截止日期/履约期限至</td>
</tr>
<tr>
<td>canDate</td>
<td>注销日期</td>
</tr>
</tbody>
</table>
<p><strong>15. MorGuaInfo</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>guaId</td>
<td>抵押ID</td>
</tr>
<tr>
<td>guaName</td>
<td>抵押物名称</td>
</tr>
<tr>
<td>guaNum</td>
<td>数量</td>
</tr>
<tr>
<td>guaVal</td>
<td>价值</td>
</tr>
</tbody>
</table>
<p><strong>16. Xzcf</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>caseTime</td>
<td>案发时间</td>
</tr>
<tr>
<td>caseReason</td>
<td>案由</td>
</tr>
<tr>
<td>caseVal</td>
<td>案值</td>
</tr>
<tr>
<td>caseResult</td>
<td>案件结果</td>
</tr>
<tr>
<td>caseType</td>
<td>案件类型</td>
</tr>
<tr>
<td>exeSort</td>
<td>执行类别</td>
</tr>
<tr>
<td>illegAct</td>
<td>主要违法事实</td>
</tr>
<tr>
<td>penBasis</td>
<td>处罚依据</td>
</tr>
<tr>
<td>penType</td>
<td>处罚种类</td>
</tr>
<tr>
<td>penResult</td>
<td>处罚结果</td>
</tr>
<tr>
<td>penAm</td>
<td>处罚金额</td>
</tr>
<tr>
<td>penDecissDate</td>
<td>触犯决定书签发日期</td>
</tr>
<tr>
<td>penExest</td>
<td>处罚执行情况</td>
</tr>
<tr>
<td>penAuth</td>
<td>处罚机关</td>
</tr>
<tr>
<td>penDecNo</td>
<td>处罚决定文书</td>
</tr>
</tbody>
</table>
<p><strong>17. OrgCode</strong></p>
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>orgCode</td>
<td>组织代码</td>
</tr>
<tr>
<td>orgName</td>
<td>组织名称</td>
</tr>
<tr>
<td>name</td>
<td>法定代表人</td>
</tr>
<tr>
<td>manageOrg</td>
<td>办证机构</td>
</tr>
<tr>
<td>regDate</td>
<td>注册日期</td>
</tr>
<tr>
<td>orgType</td>
<td>机构类型</td>
</tr>
<tr>
<td>regOrgCode</td>
<td>行政区划</td>
</tr>
<tr>
<td>addr</td>
<td>机构地址</td>
</tr>
<tr>
<td>date</td>
<td>办证日期</td>
</tr>
<tr>
<td>invalidDate</td>
<td>作废日期</td>
</tr>
<tr>
<td>zybz</td>
<td>质疑标识：1 正常 2 废置</td>
</tr>
<tr>
<td>regNo</td>
<td>注册号</td>
</tr>
<tr>
<td>isEnterprise</td>
<td>是否企业(1:企业 2:非企业)</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MySQL 备份与还原]]></title>
      <url>http://bysonline.github.io/2016/09/08/MySQL-%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%BF%98%E5%8E%9F/</url>
      <content type="html"><![CDATA[<p>使用 mysqldump 命令</p>
<p>备份<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqldump -uroot -p123456 -h 192.168.201.73 meta &gt; meta_dump_`date +%F`.sql</div></pre></td></tr></table></figure></p>
<p>压缩备份<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqldump -uroot -p123456 -h 192.168.201.73 meta | gzip &gt; backupfile.sql.gz</div></pre></td></tr></table></figure></p>
<p>还原<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -uroot -p123456 -h192.168.201.74 meta &lt; backupfile.sql</div></pre></td></tr></table></figure></p>
<p>顺便贴一下 mysqldump 的帮助文档。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div></pre></td><td class="code"><pre><div class="line">[ops@d20 ~]$ mysqldump</div><div class="line">Usage: mysqldump [OPTIONS] database [tables]</div><div class="line">OR     mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]</div><div class="line">OR     mysqldump [OPTIONS] --all-databases [OPTIONS]</div><div class="line">For more options, use mysqldump --help</div><div class="line">[ops@d20 ~]$ mysqldump --hrlp</div><div class="line">mysqldump: unknown option &apos;--hrlp&apos;</div><div class="line">[ops@d20 ~]$ mysqldump --help</div><div class="line">mysqldump  Ver 10.13 Distrib 5.6.31, for Linux (x86_64)</div><div class="line">Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</div><div class="line"></div><div class="line">Oracle is a registered trademark of Oracle Corporation and/or its</div><div class="line">affiliates. Other names may be trademarks of their respective</div><div class="line">owners.</div><div class="line"></div><div class="line">Dumping structure and contents of MySQL databases and tables.</div><div class="line">Usage: mysqldump [OPTIONS] database [tables]</div><div class="line">OR     mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]</div><div class="line">OR     mysqldump [OPTIONS] --all-databases [OPTIONS]</div><div class="line"></div><div class="line">Default options are read from the following files in the given order:</div><div class="line">/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf</div><div class="line">The following groups are read: mysqldump client</div><div class="line">The following options may be given as the first argument:</div><div class="line">--print-defaults        Print the program argument list and exit.</div><div class="line">--no-defaults           Don&apos;t read default options from any option file,</div><div class="line">                        except for login file.</div><div class="line">--defaults-file=#       Only read default options from the given file #.</div><div class="line">--defaults-extra-file=# Read this file after the global files are read.</div><div class="line">--defaults-group-suffix=#</div><div class="line">                        Also read groups with concat(group, suffix)</div><div class="line">--login-path=#          Read this path from the login file.</div><div class="line">  -A, --all-databases Dump all the databases. This will be same as --databases</div><div class="line">                      with all databases selected.</div><div class="line">  -Y, --all-tablespaces</div><div class="line">                      Dump all the tablespaces.</div><div class="line">  -y, --no-tablespaces</div><div class="line">                      Do not dump any tablespace information.</div><div class="line">  --add-drop-database Add a DROP DATABASE before each create.</div><div class="line">  --add-drop-table    Add a DROP TABLE before each create.</div><div class="line">                      (Defaults to on; use --skip-add-drop-table to disable.)</div><div class="line">  --add-drop-trigger  Add a DROP TRIGGER before each create.</div><div class="line">  --add-locks         Add locks around INSERT statements.</div><div class="line">                      (Defaults to on; use --skip-add-locks to disable.)</div><div class="line">  --allow-keywords    Allow creation of column names that are keywords.</div><div class="line">  --apply-slave-statements</div><div class="line">                      Adds &apos;STOP SLAVE&apos; prior to &apos;CHANGE MASTER&apos; and &apos;START</div><div class="line">                      SLAVE&apos; to bottom of dump.</div><div class="line">  --bind-address=name IP address to bind to.</div><div class="line">  --character-sets-dir=name</div><div class="line">                      Directory for character set files.</div><div class="line">  -i, --comments      Write additional information.</div><div class="line">                      (Defaults to on; use --skip-comments to disable.)</div><div class="line">  --compatible=name   Change the dump to be compatible with a given mode. By</div><div class="line">                      default tables are dumped in a format optimized for</div><div class="line">                      MySQL. Legal modes are: ansi, mysql323, mysql40,</div><div class="line">                      postgresql, oracle, mssql, db2, maxdb, no_key_options,</div><div class="line">                      no_table_options, no_field_options. One can use several</div><div class="line">                      modes separated by commas. Note: Requires MySQL server</div><div class="line">                      version 4.1.0 or higher. This option is ignored with</div><div class="line">                      earlier server versions.</div><div class="line">  --compact           Give less verbose output (useful for debugging). Disables</div><div class="line">                      structure comments and header/footer constructs.  Enables</div><div class="line">                      options --skip-add-drop-table --skip-add-locks</div><div class="line">                      --skip-comments --skip-disable-keys --skip-set-charset.</div><div class="line">  -c, --complete-insert</div><div class="line">                      Use complete insert statements.</div><div class="line">  -C, --compress      Use compression in server/client protocol.</div><div class="line">  -a, --create-options</div><div class="line">                      Include all MySQL specific create options.</div><div class="line">                      (Defaults to on; use --skip-create-options to disable.)</div><div class="line">  -B, --databases     Dump several databases. Note the difference in usage; in</div><div class="line">                      this case no tables are given. All name arguments are</div><div class="line">                      regarded as database names. &apos;USE db_name;&apos; will be</div><div class="line">                      included in the output.</div><div class="line">  -#, --debug[=#]     This is a non-debug version. Catch this and exit.</div><div class="line">  --debug-check       Check memory and open file usage at exit.</div><div class="line">  --debug-info        Print some debug info at exit.</div><div class="line">  --default-character-set=name</div><div class="line">                      Set the default character set.</div><div class="line">  --delayed-insert    Insert rows with INSERT DELAYED.</div><div class="line">  --delete-master-logs</div><div class="line">                      Delete logs on master after backup. This automatically</div><div class="line">                      enables --master-data.</div><div class="line">  -K, --disable-keys  &apos;/*!40000 ALTER TABLE tb_name DISABLE KEYS */; and</div><div class="line">                      &apos;/*!40000 ALTER TABLE tb_name ENABLE KEYS */; will be put</div><div class="line">                      in the output.</div><div class="line">                      (Defaults to on; use --skip-disable-keys to disable.)</div><div class="line">  --dump-slave[=#]    This causes the binary log position and filename of the</div><div class="line">                      master to be appended to the dumped data output. Setting</div><div class="line">                      the value to 1, will printit as a CHANGE MASTER command</div><div class="line">                      in the dumped data output; if equal to 2, that command</div><div class="line">                      will be prefixed with a comment symbol. This option will</div><div class="line">                      turn --lock-all-tables on, unless --single-transaction is</div><div class="line">                      specified too (in which case a global read lock is only</div><div class="line">                      taken a short time at the beginning of the dump - don&apos;t</div><div class="line">                      forget to read about --single-transaction below). In all</div><div class="line">                      cases any action on logs will happen at the exact moment</div><div class="line">                      of the dump.Option automatically turns --lock-tables off.</div><div class="line">  -E, --events        Dump events.</div><div class="line">  -e, --extended-insert</div><div class="line">                      Use multiple-row INSERT syntax that include several</div><div class="line">                      VALUES lists.</div><div class="line">                      (Defaults to on; use --skip-extended-insert to disable.)</div><div class="line">  --fields-terminated-by=name</div><div class="line">                      Fields in the output file are terminated by the given</div><div class="line">                      string.</div><div class="line">  --fields-enclosed-by=name</div><div class="line">                      Fields in the output file are enclosed by the given</div><div class="line">                      character.</div><div class="line">  --fields-optionally-enclosed-by=name</div><div class="line">                      Fields in the output file are optionally enclosed by the</div><div class="line">                      given character.</div><div class="line">  --fields-escaped-by=name</div><div class="line">                      Fields in the output file are escaped by the given</div><div class="line">                      character.</div><div class="line">  -F, --flush-logs    Flush logs file in server before starting dump. Note that</div><div class="line">                      if you dump many databases at once (using the option</div><div class="line">                      --databases= or --all-databases), the logs will be</div><div class="line">                      flushed for each database dumped. The exception is when</div><div class="line">                      using --lock-all-tables or --master-data: in this case</div><div class="line">                      the logs will be flushed only once, corresponding to the</div><div class="line">                      moment all tables are locked. So if you want your dump</div><div class="line">                      and the log flush to happen at the same exact moment you</div><div class="line">                      should use --lock-all-tables or --master-data with</div><div class="line">                      --flush-logs.</div><div class="line">  --flush-privileges  Emit a FLUSH PRIVILEGES statement after dumping the mysql</div><div class="line">                      database.  This option should be used any time the dump</div><div class="line">                      contains the mysql database and any other database that</div><div class="line">                      depends on the data in the mysql database for proper</div><div class="line">                      restore.</div><div class="line">  -f, --force         Continue even if we get an SQL error.</div><div class="line">  -?, --help          Display this help message and exit.</div><div class="line">  --hex-blob          Dump binary strings (BINARY, VARBINARY, BLOB) in</div><div class="line">                      hexadecimal format.</div><div class="line">  -h, --host=name     Connect to host.</div><div class="line">  --ignore-table=name Do not dump the specified table. To specify more than one</div><div class="line">                      table to ignore, use the directive multiple times, once</div><div class="line">                      for each table.  Each table must be specified with both</div><div class="line">                      database and table names, e.g.,</div><div class="line">                      --ignore-table=database.table.</div><div class="line">  --include-master-host-port</div><div class="line">                      Adds &apos;MASTER_HOST=&lt;host&gt;, MASTER_PORT=&lt;port&gt;&apos; to &apos;CHANGE</div><div class="line">                      MASTER TO..&apos; in dump produced with --dump-slave.</div><div class="line">  --insert-ignore     Insert rows with INSERT IGNORE.</div><div class="line">  --lines-terminated-by=name</div><div class="line">                      Lines in the output file are terminated by the given</div><div class="line">                      string.</div><div class="line">  -x, --lock-all-tables</div><div class="line">                      Locks all tables across all databases. This is achieved</div><div class="line">                      by taking a global read lock for the duration of the</div><div class="line">                      whole dump. Automatically turns --single-transaction and</div><div class="line">                      --lock-tables off.</div><div class="line">  -l, --lock-tables   Lock all tables for read.</div><div class="line">                      (Defaults to on; use --skip-lock-tables to disable.)</div><div class="line">  --log-error=name    Append warnings and errors to given file.</div><div class="line">  --master-data[=#]   This causes the binary log position and filename to be</div><div class="line">                      appended to the output. If equal to 1, will print it as a</div><div class="line">                      CHANGE MASTER command; if equal to 2, that command will</div><div class="line">                      be prefixed with a comment symbol. This option will turn</div><div class="line">                      --lock-all-tables on, unless --single-transaction is</div><div class="line">                      specified too (in which case a global read lock is only</div><div class="line">                      taken a short time at the beginning of the dump; don&apos;t</div><div class="line">                      forget to read about --single-transaction below). In all</div><div class="line">                      cases, any action on logs will happen at the exact moment</div><div class="line">                      of the dump. Option automatically turns --lock-tables</div><div class="line">                      off.</div><div class="line">  --max-allowed-packet=#</div><div class="line">                      The maximum packet length to send to or receive from</div><div class="line">                      server.</div><div class="line">  --net-buffer-length=#</div><div class="line">                      The buffer size for TCP/IP and socket communication.</div><div class="line">  --no-autocommit     Wrap tables with autocommit/commit statements.</div><div class="line">  -n, --no-create-db  Suppress the CREATE DATABASE ... IF EXISTS statement that</div><div class="line">                      normally is output for each dumped database if</div><div class="line">                      --all-databases or --databases is given.</div><div class="line">  -t, --no-create-info</div><div class="line">                      Don&apos;t write table creation info.</div><div class="line">  -d, --no-data       No row information.</div><div class="line">  -N, --no-set-names  Same as --skip-set-charset.</div><div class="line">  --opt               Same as --add-drop-table, --add-locks, --create-options,</div><div class="line">                      --quick, --extended-insert, --lock-tables, --set-charset,</div><div class="line">                      and --disable-keys. Enabled by default, disable with</div><div class="line">                      --skip-opt.</div><div class="line">  --order-by-primary  Sorts each table&apos;s rows by primary key, or first unique</div><div class="line">                      key, if such a key exists.  Useful when dumping a MyISAM</div><div class="line">                      table to be loaded into an InnoDB table, but will make</div><div class="line">                      the dump itself take considerably longer.</div><div class="line">  -p, --password[=name]</div><div class="line">                      Password to use when connecting to server. If password is</div><div class="line">                      not given it&apos;s solicited on the tty.</div><div class="line">  -P, --port=#        Port number to use for connection.</div><div class="line">  --protocol=name     The protocol to use for connection (tcp, socket, pipe,</div><div class="line">                      memory).</div><div class="line">  -q, --quick         Don&apos;t buffer query, dump directly to stdout.</div><div class="line">                      (Defaults to on; use --skip-quick to disable.)</div><div class="line">  -Q, --quote-names   Quote table and column names with backticks (`).</div><div class="line">                      (Defaults to on; use --skip-quote-names to disable.)</div><div class="line">  --replace           Use REPLACE INTO instead of INSERT INTO.</div><div class="line">  -r, --result-file=name</div><div class="line">                      Direct output to a given file. This option should be used</div><div class="line">                      in systems (e.g., DOS, Windows) that use carriage-return</div><div class="line">                      linefeed pairs (\r\n) to separate text lines. This option</div><div class="line">                      ensures that only a single newline is used.</div><div class="line">  -R, --routines      Dump stored routines (functions and procedures).</div><div class="line">  --set-charset       Add &apos;SET NAMES default_character_set&apos; to the output.</div><div class="line">                      (Defaults to on; use --skip-set-charset to disable.)</div><div class="line">  --set-gtid-purged[=name]</div><div class="line">                      Add &apos;SET @@GLOBAL.GTID_PURGED&apos; to the output. Possible</div><div class="line">                      values for this option are ON, OFF and AUTO. If ON is</div><div class="line">                      used and GTIDs are not enabled on the server, an error is</div><div class="line">                      generated. If OFF is used, this option does nothing. If</div><div class="line">                      AUTO is used and GTIDs are enabled on the server, &apos;SET</div><div class="line">                      @@GLOBAL.GTID_PURGED&apos; is added to the output. If GTIDs</div><div class="line">                      are disabled, AUTO does nothing. If no value is supplied</div><div class="line">                      then the default (AUTO) value will be considered.</div><div class="line">  --single-transaction</div><div class="line">                      Creates a consistent snapshot by dumping all tables in a</div><div class="line">                      single transaction. Works ONLY for tables stored in</div><div class="line">                      storage engines which support multiversioning (currently</div><div class="line">                      only InnoDB does); the dump is NOT guaranteed to be</div><div class="line">                      consistent for other storage engines. While a</div><div class="line">                      --single-transaction dump is in process, to ensure a</div><div class="line">                      valid dump file (correct table contents and binary log</div><div class="line">                      position), no other connection should use the following</div><div class="line">                      statements: ALTER TABLE, DROP TABLE, RENAME TABLE,</div><div class="line">                      TRUNCATE TABLE, as consistent snapshot is not isolated</div><div class="line">                      from them. Option automatically turns off --lock-tables.</div><div class="line">  --dump-date         Put a dump date to the end of the output.</div><div class="line">                      (Defaults to on; use --skip-dump-date to disable.)</div><div class="line">  --skip-opt          Disable --opt. Disables --add-drop-table, --add-locks,</div><div class="line">                      --create-options, --quick, --extended-insert,</div><div class="line">                      --lock-tables, --set-charset, and --disable-keys.</div><div class="line">  -S, --socket=name   The socket file to use for connection.</div><div class="line">  --secure-auth       Refuse client connecting to server if it uses old</div><div class="line">                      (pre-4.1.1) protocol.</div><div class="line">                      (Defaults to on; use --skip-secure-auth to disable.)</div><div class="line">  --ssl               Enable SSL for connection (automatically enabled with</div><div class="line">                      other flags).</div><div class="line">  --ssl-ca=name       CA file in PEM format (check OpenSSL docs, implies</div><div class="line">                      --ssl).</div><div class="line">  --ssl-capath=name   CA directory (check OpenSSL docs, implies --ssl).</div><div class="line">  --ssl-cert=name     X509 cert in PEM format (implies --ssl).</div><div class="line">  --ssl-cipher=name   SSL cipher to use (implies --ssl).</div><div class="line">  --ssl-key=name      X509 key in PEM format (implies --ssl).</div><div class="line">  --ssl-crl=name      Certificate revocation list (implies --ssl).</div><div class="line">  --ssl-crlpath=name  Certificate revocation list path (implies --ssl).</div><div class="line">  --ssl-verify-server-cert</div><div class="line">                      Verify server&apos;s &quot;Common Name&quot; in its cert against</div><div class="line">                      hostname used when connecting. This option is disabled by</div><div class="line">                      default.</div><div class="line">  --ssl-mode=name     SSL connection mode.</div><div class="line">  -T, --tab=name      Create tab-separated textfile for each table to given</div><div class="line">                      path. (Create .sql and .txt files.) NOTE: This only works</div><div class="line">                      if mysqldump is run on the same machine as the mysqld</div><div class="line">                      server.</div><div class="line">  --tables            Overrides option --databases (-B).</div><div class="line">  --triggers          Dump triggers for each dumped table.</div><div class="line">                      (Defaults to on; use --skip-triggers to disable.)</div><div class="line">  --tz-utc            SET TIME_ZONE=&apos;+00:00&apos; at top of dump to allow dumping of</div><div class="line">                      TIMESTAMP data when a server has data in different time</div><div class="line">                      zones or data is being moved between servers with</div><div class="line">                      different time zones.</div><div class="line">                      (Defaults to on; use --skip-tz-utc to disable.)</div><div class="line">  -u, --user=name     User for login if not current user.</div><div class="line">  -v, --verbose       Print info about the various stages.</div><div class="line">  -V, --version       Output version information and exit.</div><div class="line">  -w, --where=name    Dump only selected records. Quotes are mandatory.</div><div class="line">  -X, --xml           Dump a database as well formed XML.</div><div class="line">  --plugin-dir=name   Directory for client-side plugins.</div><div class="line">  --default-auth=name Default authentication client-side plugin to use.</div><div class="line">  --enable-cleartext-plugin</div><div class="line">                      Enable/disable the clear text authentication plugin.</div><div class="line"></div><div class="line">Variables (--variable-name=value)</div><div class="line">and boolean options &#123;FALSE|TRUE&#125;  Value (after reading options)</div><div class="line">--------------------------------- ----------------------------------------</div><div class="line">all-databases                     FALSE</div><div class="line">all-tablespaces                   FALSE</div><div class="line">no-tablespaces                    FALSE</div><div class="line">add-drop-database                 FALSE</div><div class="line">add-drop-table                    TRUE</div><div class="line">add-drop-trigger                  FALSE</div><div class="line">add-locks                         TRUE</div><div class="line">allow-keywords                    FALSE</div><div class="line">apply-slave-statements            FALSE</div><div class="line">bind-address                      (No default value)</div><div class="line">character-sets-dir                (No default value)</div><div class="line">comments                          TRUE</div><div class="line">compatible                        (No default value)</div><div class="line">compact                           FALSE</div><div class="line">complete-insert                   FALSE</div><div class="line">compress                          FALSE</div><div class="line">create-options                    TRUE</div><div class="line">databases                         FALSE</div><div class="line">debug-check                       FALSE</div><div class="line">debug-info                        FALSE</div><div class="line">default-character-set             utf8</div><div class="line">delayed-insert                    FALSE</div><div class="line">delete-master-logs                FALSE</div><div class="line">disable-keys                      TRUE</div><div class="line">dump-slave                        0</div><div class="line">events                            FALSE</div><div class="line">extended-insert                   TRUE</div><div class="line">fields-terminated-by              (No default value)</div><div class="line">fields-enclosed-by                (No default value)</div><div class="line">fields-optionally-enclosed-by     (No default value)</div><div class="line">fields-escaped-by                 (No default value)</div><div class="line">flush-logs                        FALSE</div><div class="line">flush-privileges                  FALSE</div><div class="line">force                             FALSE</div><div class="line">hex-blob                          FALSE</div><div class="line">host                              (No default value)</div><div class="line">include-master-host-port          FALSE</div><div class="line">insert-ignore                     FALSE</div><div class="line">lines-terminated-by               (No default value)</div><div class="line">lock-all-tables                   FALSE</div><div class="line">lock-tables                       TRUE</div><div class="line">log-error                         (No default value)</div><div class="line">master-data                       0</div><div class="line">max-allowed-packet                25165824</div><div class="line">net-buffer-length                 1046528</div><div class="line">no-autocommit                     FALSE</div><div class="line">no-create-db                      FALSE</div><div class="line">no-create-info                    FALSE</div><div class="line">no-data                           FALSE</div><div class="line">order-by-primary                  FALSE</div><div class="line">port                              0</div><div class="line">quick                             TRUE</div><div class="line">quote-names                       TRUE</div><div class="line">replace                           FALSE</div><div class="line">routines                          FALSE</div><div class="line">set-charset                       TRUE</div><div class="line">single-transaction                FALSE</div><div class="line">dump-date                         TRUE</div><div class="line">socket                            (No default value)</div><div class="line">secure-auth                       TRUE</div><div class="line">ssl                               FALSE</div><div class="line">ssl-ca                            (No default value)</div><div class="line">ssl-capath                        (No default value)</div><div class="line">ssl-cert                          (No default value)</div><div class="line">ssl-cipher                        (No default value)</div><div class="line">ssl-key                           (No default value)</div><div class="line">ssl-crl                           (No default value)</div><div class="line">ssl-crlpath                       (No default value)</div><div class="line">ssl-verify-server-cert            FALSE</div><div class="line">tab                               (No default value)</div><div class="line">triggers                          TRUE</div><div class="line">tz-utc                            TRUE</div><div class="line">user                              (No default value)</div><div class="line">verbose                           FALSE</div><div class="line">where                             (No default value)</div><div class="line">plugin-dir                        (No default value)</div><div class="line">default-auth                      (No default value)</div><div class="line">enable-cleartext-plugin           FALSE</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Jmeter 使用入门]]></title>
      <url>http://bysonline.github.io/2016/09/07/Jmeter-%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>Jmeter 是一款开源的压力测试工具，虽功能不及 Loadrunner 强大，但是对于一些简单的如接口api的测试完全够用。</p>
<h3 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h3><p>通常使用 Jmeter 通常需要以下几步。以 http api 接口测试为例：</p>
<ol>
<li>添加线程组<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/%E7%BA%BF%E7%A8%8B%E7%BB%84.png" alt=""></li>
<li>添加 Sampler，这里选择 Http请求<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/HTTP%E8%AF%B7%E6%B1%82.png" alt=""></li>
<li>添加 listener<br>Jmeter 提供了不同的 Listener 可以按需求添加。</li>
</ol>
<p>点击启动，将按照计划开始执行测试，完成后可看到报告。</p>
<h3 id="如何使用变量"><a href="#如何使用变量" class="headerlink" title="如何使用变量"></a>如何使用变量</h3><p>如果一个测试计划内容很多，有一些参数如 IP 等会出现多次，我们可以将这样的信息设置成用户定义变量。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/%E7%94%A8%E6%88%B7%E5%AE%9A%E4%B9%89%E7%9A%84%E5%8F%98%E9%87%8F.png" alt=""><br>定义之后，可以在其他地方通过 ${} 进行引用。</p>
<h3 id="如何使用函数"><a href="#如何使用函数" class="headerlink" title="如何使用函数"></a>如何使用函数</h3><p>Jmeter 提供了一些内置函数，点击 函数助手对话框 可查看内置函数的说明。<br>举个例子，如果我们在发送 http 请求时想使用更多的测试数据，而不是在参数栏将一组测试数据写死，可以将多组测试数据放在 csv 文件中，然后通过 __CSVRead() 函数来调用。</p>
<ol>
<li>在 HTTP请求中加入配置元件 CSV Data Set Config ，并在 fileName 中指定文件的全路径。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/%E4%BC%81%E4%B8%9A%E5%90%8D%E5%8D%95.png" alt=""></li>
<li>在 Http 参数列表中的 value 位置使用 ${__CSVRead(${entNameFile},0)} 。第一个参数是需要读取的 CSV 文件，第二个参数是每组数据的位置，CSV 文件中的测试数据默认使用 ‘,’ 分割，0 表示第一列数据。</li>
</ol>
<h3 id="OutOfMemoryError"><a href="#OutOfMemoryError" class="headerlink" title="OutOfMemoryError"></a>OutOfMemoryError</h3><p>在执行测试过程中，执行一段时间后出现 Java.lang.OutOfMemoryError: Java heap space 。解决方法参考如下：</p>
<ol>
<li><p>修改启动参数。<br>在 bin/jmeter 最后加入启动参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java $ARGS $JVM_ARGS -Xms1G -Xmx5G -XX:MaxPermSize=512m -Dapple.laf.useScreenMenuBar=true $JMETER_OPTS -jar &quot;$PRGDIR/ApacheJMeter.jar&quot; &quot;$@&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>如果在计划中加入了察看结果树的 Listener ，将会有大量数据写入。通常在计划调试阶段使用，正式测试时应去掉。</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Scala 学习资料汇总]]></title>
      <url>http://bysonline.github.io/2016/09/05/Scala-%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<p>收集了一些，准备。</p>
<ol>
<li><p><a href="http://learnyouahaskell.com/chapters" target="_blank" rel="external">http://learnyouahaskell.com/chapters</a><br>介绍 Haskell 的，了解函数式编程可以看。</p>
</li>
<li><p><a href="http://twitter.github.io/scala_school/zh_cn/" target="_blank" rel="external">Scala 课堂</a><br>twitter 的教程。</p>
</li>
<li><p><a href="http://hongjiang.info/scala/" target="_blank" rel="external">http://hongjiang.info/scala/</a><br>别人的博客。</p>
</li>
<li><p><a href="https://www.shiyanlou.com/courses/?course_type=all&amp;tag=Scala" target="_blank" rel="external">https://www.shiyanlou.com/courses/?course_type=all&amp;tag=Scala</a><br>动手做项目能更好的理解。</p>
</li>
<li><p>看书是必须的。<img src="http://new.51cto.com/files/uploadimg/20090526/0950191.jpg" alt="programming in scala"></p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java Stream 详解]]></title>
      <url>http://bysonline.github.io/2016/08/19/Java-Stream-%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p>Java Stream 是 jdk 1.8 加入的新 API ，目的是用来支持函数式编程，位于 java.util.stream 包下。</p>
<p>Stream 并不是集合，只是提供了针对于集合的函数式操作，如 Map-Rudeuce 转换。Stream 和集合的区别主要体现在一下几点：</p>
<ul>
<li>不存储数据<br>Stream 不是一个存储数据的数据结构，相反，它是通过一个计算操作的管道从源（数据结构，数组，I/O管道等）传输数据。</li>
<li>操作并不改变源</li>
<li>延迟处理<br>多数 Stream 操作，比如过滤、转换等都不是立即执行的，而是在最佳时机执行。例如，查找第一个有三个连续元音的字符串，Stream 操作分为 <em>中间操作</em> 和 <em>最终操作</em> , 中间操作始终是延迟处理的。</li>
<li>无限的<br>集合的 size 是有限的，Stream 是无限的。limit(n) 或 findFirst() 等短路操作可以让无限的 Stream 在有限的时间内完成计算。</li>
<li>可消耗的<br>像 Iterator 一样，Stream 中的元素在其生命周期内只能访问一次。</li>
</ul>
<h3 id="Stream-操作和管道"><a href="#Stream-操作和管道" class="headerlink" title="Stream 操作和管道"></a>Stream 操作和管道</h3><p>Stream 操作分为中间操作和最终操作，通过管道的被组合起来。一个 Stream 管道包含一个源，0 个或多个中间操作和一个最终操作。<br>中间操作会返回一个新的 Stream , 但并不是立即执行的。比如 filter() 方法不会执行过滤，而是在最终操作执行遍历时才创建一个由符合条件元素构成的新 Stream 。<br>最终操作会产生结果。最终操作被执行后，Stream 管道可以被消耗，并不能再被使用。如果你需要再次遍历相同的数据源，只能获取新的 Stream 。通常最终操作会在返回前完成遍历和计算，除了 iterator() 和 spliterator() 。these are provided as an “escape hatch” to enable arbitrary client-controlled pipeline traversals in the event that the existing operations are not sufficient to the task.<br>中间操作又分为有状态和无状态。无状态操作处理的元素之间彼此是相互独立的，如 filter 和 map 。有状态操作处理新元素则需要用到之前处理的元素的结果，如 distinct 和 sorted 。有状态操作需要针对全部元素处理得到结果，比如排序。所以在并行计算中，管道包含的中间操作需要多次传递和缓存数据。不论顺序还是并行处理，如果管道只包含无状态操作，则可以使用最少的数据缓存单次完成处理。<br>对于无限的 stream ，短路操作是必须的。如果中间操作是短路操作，将会返回一个有限 stream 作为结果，如果最终操作是短路操作，将会在有限时间内结束。</p>
<h3 id="并行化"><a href="#并行化" class="headerlink" title="并行化"></a>并行化</h3><p>所有的 stream 都可以串行或并行执行，jdk 默认使用串行处理 stream ，如果需要并行，可以指定使用并行方式处理，如 Collection.parallelStream() 。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sumOfWeights = widgets.parallelStream()</div><div class="line">                          .filter(b -&gt; b.getColor() == RED)</div><div class="line">                          .mapToInt(b -&gt; b.getWeight())</div><div class="line">                          .sum();</div></pre></td></tr></table></figure></p>
<p>上边代码中，串行和并行的唯一区别就是使用 parallelStream() 代替 stream() 。</p>
<h3 id="Non-interference"><a href="#Non-interference" class="headerlink" title="Non-interference"></a>Non-interference</h3><p>大多数情况下，stream 操作接受的参数大多是 lambda 表达式，用来描述用户指定的行为。为了保证行为正确，这些参数必须是非干扰和无状态的。</p>
<h3 id="Stream-语法"><a href="#Stream-语法" class="headerlink" title="Stream 语法"></a>Stream 语法</h3><p>Stream 语法由源，中间操作和最终操作组成。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/stream.jpg" alt=""><br>从上图（图片来自<a href="http://ifeve.com/stream/" target="_blank" rel="external">http://ifeve.com/stream/</a>）可以看出，使用 Stream 的基本步骤：</p>
<ul>
<li>创建 Stream<br>红色框中语句生成的是一个包含所有 nums 变量的 Stream 。</li>
<li>转换 Stream<br>绿色框中语句把一个 Stream 转换成另外一个 Stream ，原 Stream 不变。</li>
<li>对 Stream 进行聚合（Reduce）操作<br>蓝色框中语句把 Stream 的里面包含的内容按照某种算法来汇聚成一个值。</li>
</ul>
<p><strong>创建</strong><br>获得 stream 的方法有如下几种：</p>
<ul>
<li>通过 Collection 的 parallelStream() 和 stream() 方法；</li>
<li>通过 Arrays.stream(Object[]) 方法；</li>
<li>通过 Stream 的静态工厂方法，如：Stream.of(Object[]), IntStream.range(int, int) or Stream.iterate(Object, UnaryOperator);</li>
<li>通过 BufferedReader.lines();</li>
<li>Stream<path></path> 可通过 File 类中的方法获得，如：list(Path dir) 或 lines(Path path) 等；</li>
<li>Random.ints() 可获得 IntStream ；</li>
<li>其他一下生成 stream 的方法，如：BitSet.stream(), Pattern.splitAsStream(java.lang.CharSequence), and JarFile.stream() 。</li>
</ul>
<p><strong>转换</strong></p>
<ol>
<li>distinct:<br>对于 Stream 中包含的元素进行去重操作（去重逻辑依赖元素的 equals 方法），新生成的 Stream 中没有重复的元素。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/distinct.jpg" alt=""></li>
<li>filter:<br>对于 Stream 中包含的元素使用给定的过滤函数进行过滤操作，新生成的 Stream 只包含符合条件的元素。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/filter.jpg" alt=""></li>
<li>map:<br>对于 Stream 中包含的元素使用给定的转换函数进行转换操作，新生成的 Stream 只包含转换生成的元素。这个方法有三个对于原始类型的变种方法，分别是：mapToInt，mapToLong 和mapToDouble 。这三个方法也比较好理解，比如 mapToInt 就是把原始 Stream 转换成一个新的 Stream ，这个新生成的 Stream 中的元素都是 int 类型。之所以会有这样三个变种方法，可以免除自动装箱/拆箱的额外消耗。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/map.jpg" alt=""></li>
<li><p>flatMap:<br>和 map 类似，不同的是其每个元素转换得到的是 Stream 对象，会把子 Stream 中的元素压缩到父集合中。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/flatMap.jpg" alt=""><br>光从文字描述，感觉 flatMap 还是很难理解，通过程序帮助理解。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Stream&lt;List&lt;Integer&gt;&gt; nums = Stream.of(</div><div class="line">        Arrays.asList(<span class="number">1</span>),</div><div class="line">        Arrays.asList(<span class="number">2</span>, <span class="number">3</span>),</div><div class="line">        Arrays.asList(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line">);</div><div class="line"></div><div class="line">nums.flatMap(e -&gt; e.stream()).collect(Collectors.toList()).forEach(e -&gt; System.out.print(e + <span class="string">","</span>));</div></pre></td></tr></table></figure>
<p>输出结果为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,</div></pre></td></tr></table></figure>
<p>可以看出 flatMap 的作用是将源 Stream 中的 List 结构去掉，用 List 中的元素构成新的 List 。</p>
</li>
<li><p>peek:<br>生成一个包含原 Stream 的所有元素的新 Stream ，同时会提供一个消费函数（ Consumer 实例）。新 Stream 每个元素被消费的时候都会执行给定的消费函数。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/peek.jpg" alt=""></p>
<p> 文字描述还是没有程序直观</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Stream&lt;List&lt;Integer&gt;&gt; nums = Stream.of(</div><div class="line">        Arrays.asList(<span class="number">1</span>),</div><div class="line">        Arrays.asList(<span class="number">2</span>, <span class="number">3</span>),</div><div class="line">        Arrays.asList(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line">);</div><div class="line">nums.peek(e -&gt; System.out.println(e.size())) <span class="comment">// 查看每个元素(list)的 size</span></div><div class="line">        .map(e -&gt; e.get(<span class="number">0</span>))</div><div class="line">        .collect(Collectors.toList())</div><div class="line">        .forEach(System.out::print);</div><div class="line">);</div></pre></td></tr></table></figure>
<p> peek 字面意思是窥视，通常也多用在 debug 中查看 Stream 的元素内容。</p>
</li>
<li>limit:<br>对一个 Stream 进行截断操作，获取其前 N 个元素，如果原 Stream 中包含的元素个数小于 N ，那就获取其所有的元素。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/limit.jpg" alt=""></li>
<li>skip:<br>返回一个丢弃原 Stream 的前 N 个元素后剩下元素组成的新 Stream ，如果原 Stream 中包含的元素个数小于 N ，那么返回空 Stream。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/skip.jpg" alt=""></li>
</ol>
<p><strong>聚合</strong><br>聚合也叫 fold ，是通过重复的组合操作将一个元素序列合并成单独的结果，比如求 sum 或找到一个数字集合的最大值。Stream 类有多种形式的通用聚合操作，如 reduce() 和 collect() ，还有很多特殊的聚合操作，如 sum() 和 count() ，这些只有 IntStream 、DoubleStream 和 LongSteam 类才有。<br>在 jdk 1.8 以前，要计算 sum 通常使用 for 循环：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x : numbers) &#123;</div><div class="line">   sum += x;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用 Stream 可以这样写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sum = numbers.stream().reduce(<span class="number">0</span>, (x,y) -&gt; x + y);</div></pre></td></tr></table></figure></p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/reduce.png" alt=""><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sum = numbers.stream().reduce(<span class="number">0</span>, Integer::sum);</div></pre></td></tr></table></figure></p>
<p>可变聚合<br>可变聚合操作是将输入元素聚合到一个可变的结果容器中，如 Collection 或 StringBuilder 。<br>如果想将 Stream 中的字符串连接成一个长字符串，通常的做法是：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String concatenated = strings.reduce(<span class="string">""</span>, String::concat)；</div></pre></td></tr></table></figure></p>
<p>collect() 的一般形式是：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;R&gt; <span class="function">R <span class="title">collect</span><span class="params">(Supplier&lt;R&gt; supplier,</span></span></div><div class="line">               BiConsumer&lt;R, ? <span class="keyword">super</span> T&gt; accumulator,</div><div class="line">               BiConsumer&lt;R, R&gt; combiner);</div></pre></td></tr></table></figure></p>
<p>该操作需要 3 个函数：</p>
<ol>
<li>Supplier 创建一个新的结果容器的实例；</li>
<li>accumulator 将输入参数组织到结果容器中；</li>
<li>combiner 将结果容器中的内容合并生成另一个结果容器。</li>
</ol>
<p>将集合中的字符串全转成大写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; list = Lists.newArrayList(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>);</div><div class="line">List&lt;String&gt; list1 = list.stream().collect(() -&gt; <span class="keyword">new</span> ArrayList&lt;&gt;(), (c, e) -&gt; c.add(e.toUpperCase()), (c1, c2) -&gt; c1.addAll(c2));</div></pre></td></tr></table></figure></p>
<p>使用标准 Collector 重写：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; list2 = list.stream().map(String::toUpperCase).collect(ArrayList::<span class="keyword">new</span>, ArrayList::add, ArrayList::addAll);</div></pre></td></tr></table></figure></p>
<p>还有更简化的写法，利用 collect() 的重载方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;R, A&gt; <span class="function">R <span class="title">collect</span><span class="params">(Collector&lt;? <span class="keyword">super</span> T, A, R&gt; collector)</span></span>;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; list3 = list.stream().map(String::toUpperCase).collect(Collectors.toList());</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java 反射]]></title>
      <url>http://bysonline.github.io/2016/08/19/Java-%E5%8F%8D%E5%B0%84/</url>
      <content type="html"><![CDATA[<p>Java 反射是 jdk 1.5 加入新特性。Java 反射机制可以让我们在编译期 (Compile Time) 之外的运行期 (Runtime) 检查类，接口，变量以及方法的信息。反射还可以让我们在运行期实例化对象，调用方法，通过调用 get/set 方法获取变量的值。</p>
<p>如果我们要将一个对象 User 实例 A 的值赋给实例 B ，通常这样<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</div><div class="line">    String name;</div><div class="line">    <span class="keyword">int</span> age;</div><div class="line">    <span class="comment">//getter/setter</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">User A = <span class="keyword">new</span> User();</div><div class="line">A.setName(<span class="string">"tom"</span>);</div><div class="line">A.setAge(<span class="number">20</span>);</div><div class="line">User B = <span class="keyword">new</span> User();</div><div class="line">B.setName(A.getName());</div><div class="line">B.setAge(A.getAge());</div></pre></td></tr></table></figure></p>
<p>这样写非常简单，但是如果对象 User 的属性很多，那么写起来就比较麻烦了。于是可以利用反射来实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">Class clazz = Class.forName(<span class="string">"a.b.c.User"</span>);</div><div class="line">Constructor constructor = clazz.getDeclaredConstructor();</div><div class="line">Object B = constructor.newInstance();</div><div class="line">Field[] fields = clazz.getDeclaredFields();</div><div class="line"><span class="keyword">for</span> (Field field : fields) &#123;</div><div class="line">    String fieldName = field.getName();</div><div class="line">    String setMethodName = <span class="string">"set"</span> + fieldName.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + fieldName.substring(<span class="number">1</span>);</div><div class="line">    String getMethodName = <span class="string">"get"</span> + fieldName.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + fieldName.substring(<span class="number">1</span>);</div><div class="line">    Method setMethod = clazz.getDeclaredMethod(setMethodName, <span class="keyword">new</span> Class[]&#123;field.getType()&#125;);</div><div class="line">    Method getMethod = clazz.getDeclaredMethod(getMethodName, <span class="keyword">new</span> Class[]&#123;&#125;);</div><div class="line">    setMethod.invoke(B, getMethod.invoke(A, <span class="keyword">new</span> Object[]&#123;&#125;));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用反射实现，代码多了，但是好处是灵活性提高。不过并不建议这样使用，原因有二：</p>
<ul>
<li>代码不够精简</li>
<li>性能不高</li>
</ul>
<p>所以通常我们会借助第三方类库来实现。第三方类库有很多，以 commons.BeanUtils 为例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">BeanUtils.setProperty(B, field, BeanUtils.getProperty(user, field));</div></pre></td></tr></table></figure>
<p>可以看到，代码精简了许多。</p>
<h3 id="高性能反射库-ReflectASM"><a href="#高性能反射库-ReflectASM" class="headerlink" title="高性能反射库 ReflectASM"></a>高性能反射库 ReflectASM</h3><p>关于反射，除了诸多优点，还有一个被人诟病的问题就是性能。不能否认，使用反射性能的确要慢一些，但是随着 Java 的不断优化，反射的速度也在不断提升。另外还是有一些反射库能帮助提升程序性能，比如 ReflectASM 。</p>
<p>ReflectASM 是通过字节码方式实现反射机制的反射库，写法比较简单，而且比 Java 自己的反射包和 commons.BeanUtils 等要快很多。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.esotericsoftware.reflectasm&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;reflectasm&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.09&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">MethodAccess access = MethodAccess.get(User.class);</div><div class="line">access.invoke(B, <span class="string">"setName"</span>, access.invoke(A, <span class="string">"getName"</span>));</div></pre></td></tr></table></figure>
<p>虽然 RefectASM 速度快很多，但是在多次使用到相同的对象还是应该利用缓存才能进一步提升性能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">MethodAccess access = map.get(<span class="string">"user"</span>);</div><div class="line"><span class="keyword">if</span> (access == <span class="keyword">null</span>) &#123;</div><div class="line">    access = MethodAccess.get(User.class);</div><div class="line">    map.put(<span class="string">"user"</span>, access);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>反射是一项非常有用的特性，能够在编程时解决很多特殊的问题，而性能会越来越快，所以应该合理大胆的使用反射。</p>
<hr>
<p>补充：关于使用 ReflectASM 的问题<br>使用 ReflectASM 创建类的实例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ConstructorAccess access = ConstructorAccess.get(User.class);</div><div class="line">access.newInstance();</div></pre></td></tr></table></figure></p>
<p>但是想调用带参数的构造器时，却没有找到方法。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[多线程拾遗]]></title>
      <url>http://bysonline.github.io/2016/08/16/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%8B%BE%E9%81%97/</url>
      <content type="html"><![CDATA[<p>多线程知识点和问题汇总。</p>
<h3 id="如何创建多线程"><a href="#如何创建多线程" class="headerlink" title="如何创建多线程"></a>如何创建多线程</h3><p>这是一个简单的文件，可以继承 Thread 类或是实现接口。</p>
<ol>
<li><p>继承 Thread 类，重写父类的 run() 方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// do something</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">new</span> A().start();</div></pre></td></tr></table></figure>
</li>
<li><p>实现 Runnable 接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// do something</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">new</span> Thread(<span class="keyword">new</span> B()).start();</div></pre></td></tr></table></figure>
</li>
<li><p>继承 Thread 类和实现 Runnable 接口是最常用的两种创建多线程的方法，从 jdk 1.5 开始加入了 Callable<t> 接口。 Callable 接口和 Runnable 类似，但是可以有返回值，可使用 FutureTask 或线程池启动线程。</t></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">Callable</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">FutureTask futureTask = <span class="keyword">new</span> FutureTask(<span class="keyword">new</span> C());</div><div class="line"><span class="keyword">new</span> Thread(futureTask).start();</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="继承-Thread-和-实现-Runnable-的区别"><a href="#继承-Thread-和-实现-Runnable-的区别" class="headerlink" title="继承 Thread 和 实现 Runnable 的区别"></a>继承 Thread 和 实现 Runnable 的区别</h3><p>主要区别有二：</p>
<ul>
<li>由于 Java 单继承的特点，继承 Thread 类无法再继承其他类相对接口方式有些限制。</li>
<li>实现 Runnable 接口方式能够实现资源共享。</li>
</ul>
<p>所以，实际中更多的是使用 Runnable 接口来创建多线程。</p>
<h3 id="Runnable-和-Callable-的区别"><a href="#Runnable-和-Callable-的区别" class="headerlink" title="Runnable 和 Callable 的区别"></a>Runnable 和 Callable 的区别</h3><p>Runnable 接口的 run() 方法返回值。<br>Callable 接口是 jdk 1.5 以后加入的，call() 返回一个泛型类型的返回值，除了带返回值外和 Runnable 基本没有区别。Callable 通常 Future/FutureTask 一起使用。除了使用 FutureTask 外，还可以使用线程池。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ExecutorService executor = Executors.newFixedThreadPool(<span class="number">5</span>);</div><div class="line">Future future = executor.submit(<span class="keyword">new</span> C());</div></pre></td></tr></table></figure></p>
<h3 id="多线程同步"><a href="#多线程同步" class="headerlink" title="多线程同步"></a>多线程同步</h3>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[HashMap 的工作原理]]></title>
      <url>http://bysonline.github.io/2016/08/09/HashMap-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/</url>
      <content type="html"><![CDATA[<p>HashMap 是最常用的集合类之一，在面试中也出镜率颇高。</p>
<h3 id="HashMap-和-Hashtable"><a href="#HashMap-和-Hashtable" class="headerlink" title="HashMap 和 Hashtable"></a>HashMap 和 Hashtable</h3><p>经常会问 <strong>HashMap 的特点</strong> 及 <strong>HashMap 和 Hashtable 的区别</strong> 等等。那么就先做一下简单总结。</p>
<table>
<thead>
<tr>
<th></th>
<th>HashMap</th>
<th>Hashtable</th>
</tr>
</thead>
<tbody>
<tr>
<td>所在位置</td>
<td>实现 Map 接口，JDK 1.2 加入到 Java Collections Framework</td>
<td>Hashtable 集成自 Dictionary ，JDK 1.2 实现了 Map 接口</td>
</tr>
<tr>
<td>是否支持 null key 或 null value</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td>线程安全</td>
<td>不安全</td>
<td>安全</td>
</tr>
</tbody>
</table>
<p>以上是3点是我们耳熟能详的二者之间的区别，Hashtable 不是我们此篇的重点，暂且放在一旁。</p>
<h3 id="碰撞"><a href="#碰撞" class="headerlink" title="碰撞"></a>碰撞</h3><p>上边这个面试题是通常只是开胃菜，每个熟悉 Java 的人都能知晓。上题热身之后，经常会有这样的问题提出： <strong>HashMap 是如何存储数据的?</strong><br>看过源码就能知道 HashMap 底层是使用 <strong>Array</strong> 和 <strong>Linked Table</strong> 来存储数据的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// jdk 1.8.0_74</span></div><div class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>HashMap 在 put 一个 key-value 对时，首先对 key 做 hash 操作，然后将 key 分配到 table[i] 的位置。如果两个 key 的 hash(key) 结果相同，那么这两个 key 就都会分配到 table[i] 的位置，这两个 key 就会在 table[i] 的位置以链表的形式存储，这种现象称为 <strong>碰撞</strong>。<br>可以用一张图来说明，我们假设将取模作为 <code>hash(key)</code> 的话，put 如下一组数据：</p>
<table>
<thead>
<tr>
<th>key</th>
<th>7</th>
<th>17</th>
<th>23</th>
<th>33</th>
<th>39</th>
<th>49</th>
<th>55</th>
<th>73</th>
<th>87</th>
<th>103</th>
</tr>
</thead>
<tbody>
<tr>
<td>value</td>
<td>a</td>
<td>b</td>
<td>c</td>
<td>d</td>
<td>e</td>
<td>f</td>
<td>g</td>
<td>h</td>
<td>i</td>
<td>j</td>
</tr>
</tbody>
</table>
<p>将形成下图的结构</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/hashmap_01.png" alt=""></p>
<p>可以看到对 hash(key) 操作后，数据通过链表的形式分别存储在索引1和7的位置， 17,33,49 都存储在位置1，就是上文提到的碰撞。如果要从 HashMap 中取到33的值，首先需要定位到位置1，再遍历链表。理想情况下，如果在一个 HashMap 中数据都分散在数组中，没有出现碰撞，那么 get 的速度最快，时间复杂度为 O(1) , 如果出现碰撞，get 的性能将有所下降。极端情况下，如果所有数据都存储在相同位置，那 HashMap 就变成了 Linked Table ，时间复杂度为 O(n) 。<br>针对这样的情况，JDK 1.8 对 HashMap 的实现方式进行了优化，如果链表的长度大于阀值，就将链表改成红黑树，get 的时间复杂度为 O(logn) , 如图：</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/hashmap_02.png" alt=""></p>
<p>好了，说了这么多，简单总结一下吧。通常情况下，如果两个对象的 key 的 hashCode() 相同，那么他们 bucket 的位置相同而发生碰撞，Map.Entry 对象存储在链表中。当 get 时，通过 hashCode() 找到 bucket 的位置，然后遍历链表，通过 key.equals() 找到指定的值。</p>
<p><strong>为什么使用 String 作为 key 是一个不错选择？</strong><br>其实，答案可以从上边获得。因为，String 是 final 的，并且有固定的 hashCode() 和 equals() 方法，所以能有效减少碰撞的发生，同时由于不可变，可以缓存 key 的 hashcode ，提高 get 对象的速度。同理，如果自定义对象作为 key ，应保证对象是不可变的，即保证 equals() 和 hashCode() 方法正确重写。</p>
<h3 id="rehashing-问题"><a href="#rehashing-问题" class="headerlink" title="rehashing 问题"></a>rehashing 问题</h3><p>HashMap 还有一个知识点会作为问题提出： HashMap 的容量是固定的么？ 如何扩容？ 会有什么问题？…等等。诸如此类的一系列问题，了解了 HashMap 的 resize 之后都可以轻松回答。<br>HashMap 有两个重要的参数，DEFAULT_INITIAL_CAPACITY 和 DEFAULT_LOAD_FACTOR 。在初始化时默认容量为16，当 bucket 的使用数量超过 DEFAULT_INITIAL_CAPACITY 和 DEFAULT_LOAD_FACTOR 的乘积时，HashMap 会将容量扩充为原来的两倍（就是将上图中的数组大小变成原来的两倍），同时重新按照 hash(key) 来存放对象到新的数组中，这个过程叫做 rehashing 。<br>在 JDK 1.8 之前，每次 resize 需要从新计算 hash(key) 的值，在 JDK 1.8 中对这里也做了优化。1.8 的 resize 使用的是2次幂扩展，所以在 resize 的过程中，元素要么在原索引位置，要么在2倍索引位置。如下图所示：</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/hashmap_03.png" alt=""></p>
<p>看一下源码会更清楚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// jdk 1.8.0_74</span></div><div class="line">Node&lt;K,V&gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</div><div class="line">Node&lt;K,V&gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</div><div class="line">Node&lt;K,V&gt; next;</div><div class="line">do &#123;</div><div class="line">    next = e.next;</div><div class="line">    <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</div><div class="line">            loHead = e;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            loTail.next = e;</div><div class="line">        loTail = e;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</div><div class="line">            hiHead = e;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            hiTail.next = e;</div><div class="line">        hiTail = e;</div><div class="line">    &#125;</div><div class="line">&#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</div><div class="line"><span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</div><div class="line">    loTail.next = <span class="keyword">null</span>;</div><div class="line">    newTab[j] = loHead;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</div><div class="line">    hiTail.next = <span class="keyword">null</span>;</div><div class="line">    newTab[j + oldCap] = hiHead;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>先遍历链表算出 hiTail 和 loTail ，然后根据 hiTail 和 loTail 得到元素在新数组中的位置。说简单点，由于扩容是向左移一位，那么不用每次都重新计算 hash(key) ，只要看左边新扩展的一位是0还是1, 0就留在原位置，1就将原位置索引加上原容量得到新位置的索引。计算结果参考下图：<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/hashmap_04.png" alt=""></p>
<p>最后 rehashing 有没有问题呢？ 在多线程环境下，rehashing 会出现条件竞争，导致程序死循环。这也是为什么要在多线程环境中对 HashMap 进行线程安全处理的原因了。</p>
<h3 id="concurrentHashMap-和-Hashtable-的区别"><a href="#concurrentHashMap-和-Hashtable-的区别" class="headerlink" title="concurrentHashMap 和 Hashtable 的区别"></a>concurrentHashMap 和 Hashtable 的区别</h3><p>HashMap 是线程不安全的，所以为了保证线程安全，我们有多种替代方案： Hashtable 、 Collections.sychroniziedMap() 和 concurrentHashMap 等。我们可以简单的将 Hashtable 理解为 HashMap 的线程安全版本，但是 Hashtable （包括 Collections.sychroniziedMap() ）的性能却不尽如人意，实际使用更多的是 concurrentHashMap 。<br>Hashtable 和 concurrentHashMap 的性能差异的关键是写锁的数量。Hashtable 简单粗暴的使用了整个 Map 范围的锁，插入、删除及检索，甚至遍历等操作都要保持锁，所以极大的限制了并发。<br>concurrentHashMap 则是将锁分散到每个 bucket 。bucket 的锁的数量是 32 ，也就意味着可以有 32 个线程同时操作 Map ，其性能自然比 Hashtable 要好很多。</p>
<h3 id="如何优化-HashMap-的性能"><a href="#如何优化-HashMap-的性能" class="headerlink" title="如何优化 HashMap 的性能"></a>如何优化 HashMap 的性能</h3><ol>
<li><strong>初始化容量</strong><br>通常情况下 HashMap 的性能还是比较稳定的，算是在 ArrayList 和 LinkedList 之间取了平衡。</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>获取</th>
<th>查找</th>
<th>添加/删除</th>
<th>空间     </th>
</tr>
</thead>
<tbody>
<tr>
<td>ArrayList</td>
<td>O(1)</td>
<td>O(1)</td>
<td>O(N)</td>
<td>O(N)</td>
</tr>
<tr>
<td>LinkedList</td>
<td>O(N)</td>
<td>O(N)</td>
<td>O(1)</td>
<td>O(N)</td>
</tr>
<tr>
<td>HashMap</td>
<td>O(N/Bucket_size)</td>
<td>O(N/Bucket_size)</td>
<td>O(N/Bucket_size)</td>
<td>O(N)</td>
</tr>
</tbody>
</table>
<p>N 为元素的个数，Bucket_size 是桶的数量，在碰撞很少的情况下，复杂度趋近于 O(1) 。如果想进一步提高 HashMap 的性能，则需要在设计时有更多考虑。HashMap 的初始容量为 16 ，容量超过 75% 就会 resizing 。虽然 HashMap 的 resizing 性能再不断提升，但是如果能预估 HashMap 的大小，就能够避免不必要的 resizing 。<br>如果有 1000 个元素， 下面的写法必定会触发 resizing 。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map map = <span class="keyword">new</span> HashMap();</div></pre></td></tr></table></figure></p>
<p>或<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map map = <span class="keyword">new</span> HashMap(<span class="number">1000</span>);</div></pre></td></tr></table></figure></p>
<p>不考虑空间因素，2 倍 size 是最简单的方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map map = <span class="keyword">new</span> HashMap(<span class="number">1000</span> * <span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<p>但这样并不是太好，因为 HashMap 本身就不省空间。所以靠谱的做法还是自己算一个 init size 。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">float</span> size = <span class="number">1000</span> / <span class="number">0.75f</span>;</div><div class="line">Map map = <span class="keyword">new</span> HashMap(size);</div></pre></td></tr></table></figure></p>
<p>或<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map map = Maps.newHashMapWithExpectedSize(<span class="number">1000</span>);</div></pre></td></tr></table></figure></p>
<ol>
<li><strong>Key 的设计建议</strong><br>我们知道 Map 获取元素是通过 Key 来比较的，Integer 的数值型的 Key 可以使用 == 来比较，而 String 需要用 equals ，一个一个字符比较还是比较慢的，好在 String 是 final 的，hashcode 可以缓存，但还是建议在只能使用 equals 的情况下，将 Key 设计的短一些。</li>
<li><strong>使用替代数据结构</strong><br>在极端情况下，如果 HashMap 的可以使用支持 int 、 long 等原生类型作为 Key 的数据结构来代替。</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java 中的回调函数]]></title>
      <url>http://bysonline.github.io/2016/08/08/Java-%E4%B8%AD%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>在 Spring 和 Hibernate 中有很多回调函数的用法，感觉使用起来非常方便，那么回调函数是如何实现的呢？</p>
<p>首先需要定义一个回调接口，比如：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">QueryCallback</span>&lt;<span class="title">T</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">query</span><span class="params">(Session session)</span></span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后在定义的方法是调用接口方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Query</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">queryForList</span><span class="params">(String sql, Callback callback)</span></span>&#123;</div><div class="line">        Session session = <span class="keyword">new</span> Session();</div><div class="line">        <span class="keyword">return</span> callback.query(session);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>调用的时候就可以使用回调了。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">String sql = <span class="string">"select * from user"</span>;</div><div class="line">List&lt;String&gt; list = <span class="keyword">new</span> QueryDB().queryForList(sql, <span class="keyword">new</span> Callback() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> List <span class="title">query</span><span class="params">(Session session)</span> </span>&#123;</div><div class="line">        List&lt;String&gt; list = session.query(sql);</div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java 关键字 volatile 详解]]></title>
      <url>http://bysonline.github.io/2016/08/08/Java-%E5%85%B3%E9%94%AE%E5%AD%97-volatile-%E8%AF%A6%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p>volatile 是 Java 语言的关键字，用来修饰变量。Java 的每个线程都拥有自己的内存，在某个时间点，多个线程中间的同一个变量的值可能是不同的，volatile 的作用就是让变量对所有线程都是一致的，每次获得的都是该变量的最新值。<br><a id="more"></a><br>volatile 在特殊情况下（变量之间或前后没有约束）是能够保证线程安全的，反之，是不能保证线程安全的，比如，不能使用 volatile 来实现线程安全的计数器。 因为 volatile 不是原子性的，而 <code>i+1</code> 或 <code>i++</code> 操作实际是三个原子操作（read，赋值，write）的组合，所以不能保证线程安全。</p>
<p>volatile 不能像 synchronized 一样广泛的用于线程安全，虽然 volatile 的用法要和某些情况下的性能要比 synchronized 和锁简单和高效，但误用将导致程序出现错误。如果能在正确的场景使用 volatile ，还是能使程序更加简单。比如程序需要有一个标识来指示一个一次性操作，像资源初始化，那么使用 volatile 是非常方便的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">volatile</span> <span class="keyword">boolean</span> isInit；</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</div><div class="line">  isINit = <span class="keyword">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>&#123;</div><div class="line">  <span class="keyword">while</span>(isInit)&#123;</div><div class="line">    <span class="comment">// do something</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>volatile 变量比使用 synchronized 代码要简单一些，在这种只有一种状态转换的情况使用 volatile 是合适的。</p>
<p><strong>volatile 和 synchronized 简单比较</strong></p>
<table>
<thead>
<tr>
<th></th>
<th>volatile</th>
<th>synchronized</th>
</tr>
</thead>
<tbody>
<tr>
<td>作用位置</td>
<td>变量</td>
<td>方法，代码块</td>
</tr>
<tr>
<td>同步对象</td>
<td>主内存和线程内存之间某个变量的值</td>
<td>主内存和线程内存之间所有变量的值</td>
</tr>
<tr>
<td>消耗资源</td>
<td>少</td>
<td>多</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[枚举单例读取配置文件]]></title>
      <url>http://bysonline.github.io/2016/08/02/%E6%9E%9A%E4%B8%BE%E5%8D%95%E4%BE%8B%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<p>枚举实现单例在《Effective in java》中提到过，好处是简洁，同时不会有序列化和反序列化的问题。<br><a id="more"></a><br>下面一个 enum 单例的实际示例，用来读取配置文件。</p>
<p><strong>config.properties</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">host=htt:<span class="comment">//localhost</span></div><div class="line">port=<span class="number">8080</span></div></pre></td></tr></table></figure></p>
<p><strong>AppContext.java</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ResourceBundle;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span>  AppContext &#123;</div><div class="line"></div><div class="line">    INSTANCE;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> ResourceBundle rb = ResourceBundle.getBundle(<span class="string">"config"</span>);</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">(String key)</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> rb.getString(key);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">``</div><div class="line"></div><div class="line">**client**</div><div class="line">```java</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        String host = AppContext.INSTANCE.getValue(<span class="string">"host"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[单例模式]]></title>
      <url>http://bysonline.github.io/2016/08/02/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>单例模式是最简单的设计模式之一，用于保证系统中只有一个类的实例的场景。</p>
<p>单例模式的特点：</p>
<ul>
<li>只有一个实例</li>
<li>只能自己创建自己的实例</li>
<li>能够对外提供自己创建的实例</li>
</ul>
<h3 id="1-程序示例"><a href="#1-程序示例" class="headerlink" title="1. 程序示例"></a>1. 程序示例</h3><h4 id="1-1-懒汉式"><a href="#1-1-懒汉式" class="headerlink" title="1.1 懒汉式"></a>1.1 懒汉式</h4><p>在 Gof 的设计模式中介绍单例模式使用的说明代码叫做懒汉式，java 版代码如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            instance = <span class="keyword">new</span> Singleton();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这是最简单的代码实现，但是这个代码存在问题，即在多线程的程序中，不能保证一定是单例的。原因也很简单，代码被编译成字节码被执行，有可能在刚进入 if 判断后时间分片就用完了，另一个线程也进入 if 判断，从而创建多个实例。一种简单的处理方法是将方法同步。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">synchronized</span> <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="1-2-饿汉式"><a href="#1-2-饿汉式" class="headerlink" title="1.2 饿汉式"></a>1.2 饿汉式</h4><p>另外还有一种比较常见的叫做饿汉式，这种方式更符合 java 的风格。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> INSTANCE;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="1-3-静态内部类"><a href="#1-3-静态内部类" class="headerlink" title="1.3 静态内部类"></a>1.3 静态内部类</h4><p>通常情况下，直接使用恶汉式是最安逸的，况且内存越来越不是瓶颈了。但是如果还对装载类时初始化耿耿于怀，可以使用这种方式。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> SingletonHolder.INSTANCE;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用静态内部类的好处是不会在装载 Singleton 的时候就实例化，而是在调用 getInstance() 方法时才创建实例。</p>
<h4 id="1-4-枚举"><a href="#1-4-枚举" class="headerlink" title="1.4 枚举"></a>1.4 枚举</h4><p>在 jdk1.5 以后加入了枚举，也可以使用枚举来实现单例。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton &#123;</div><div class="line">    INSTANCE;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whateverMethod</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用 enum 方式创建单例的好处是简单，简单到让人看不懂。怎么使用可参考一个例子 <a href="../../../../2016/08/02/枚举单例读取配置文件/">枚举单例读取配置文件</a> 。</p>
<h4 id="1-5-双重校验锁"><a href="#1-5-双重校验锁" class="headerlink" title="1.5 双重校验锁"></a>1.5 双重校验锁</h4><p>网上很多单例的文章中都提到了双重校验锁的方式。这种方式出现的目的是对懒汉式进行优化。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</div><div class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">                    instance = <span class="keyword">new</span> Singleton();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在《java 与模式》一书中针对这种方式也做了分析，这种方式并不能真正达到效果，所以还是安心使用饿汉吧。</p>
<p>2016-08-08 补充：<br>网上一些资料中提到，自 JDK 1.5 以后，修复了 volatile 关键字的 bug ，所以，JDK 1.5 以后双重校验锁可以正常工作了。关于 volatile 关键字更多知识点，参考 <a href="../../../../2016/08/08/Java 关键字 volatile/">Java 关键字 volatile</a></p>
<h3 id="2-类图"><a href="#2-类图" class="headerlink" title="2. 类图"></a>2. 类图</h3><p>如果要画出常用设计模式的类图，单例无疑是最简单的了。</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/singleton.png" alt="单例模式"></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[计算时间间隔]]></title>
      <url>http://bysonline.github.io/2016/07/29/%E8%AE%A1%E7%AE%97%E6%97%B6%E9%97%B4%E9%97%B4%E9%9A%94/</url>
      <content type="html"><![CDATA[<p>在计算日期或是计算程序执行时间时，经常会需要计算两个时间或日期的间隔，通常可以通过一下几种方法实现。</p>
<h3 id="1-使用-Java-日期-api"><a href="#1-使用-Java-日期-api" class="headerlink" title="1. 使用 Java 日期 api"></a>1. 使用 Java 日期 api</h3><p>先计算出相差的毫秒值，再转化成天，小时，分，秒。<br>按时间进制自己算，代码略。</p>
<h3 id="2-使用-Joda-库"><a href="#2-使用-Joda-库" class="headerlink" title="2. 使用 Joda 库"></a>2. 使用 Joda 库</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">DateTime dt1 = <span class="keyword">new</span> DateTime(d1);</div><div class="line">DateTime dt2 = <span class="keyword">new</span> DateTime(d2);</div><div class="line"></div><div class="line"><span class="keyword">int</span> days = Days.daysBetween(dt1, dt2).getDays();</div><div class="line"><span class="keyword">int</span> hours = Hours.hoursBetween(dt1, dt2).getHours() % <span class="number">24</span>;</div><div class="line"><span class="keyword">int</span> minutes = Minutes.minutesBetween(dt1, dt2).getMinutes() % <span class="number">60</span>;</div><div class="line"><span class="keyword">int</span> seconds = Seconds.secondsBetween(dt1, dt2).getSeconds() % <span class="number">60</span>;</div></pre></td></tr></table></figure>
<p>或<br>计算出两个时间的毫秒数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Interval interval = <span class="keyword">new</span> Interval(start, end);</div><div class="line">Period p = interval.toPeriod();</div><div class="line"><span class="keyword">int</span> days = p.getDays();</div><div class="line"><span class="keyword">int</span> hours = p.getHours();</div><div class="line"><span class="keyword">int</span> minutes = p.getMinutes();</div><div class="line"><span class="keyword">int</span> seconds = p.getSeconds();</div></pre></td></tr></table></figure>
<h3 id="3-使用-TimeUnit"><a href="#3-使用-TimeUnit" class="headerlink" title="3. 使用 TimeUnit"></a>3. 使用 TimeUnit</h3><p>计算出两个时间的毫秒数，使用 java.util.concurrent 包下的 TimeUint 。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">long</span> diff = t2 - t1;</div><div class="line"><span class="keyword">long</span> days = TimeUnit.MILLISECONDS.toDays(diff);</div><div class="line"><span class="keyword">long</span> hours = TimeUnit.MILLISECONDS.toHours(diff) % <span class="number">24</span>;</div><div class="line"><span class="keyword">long</span> minutes = TimeUnit.MILLISECONDS.toMinutes(diff) % <span class="number">60</span>;</div><div class="line"><span class="keyword">long</span> seconds = TimeUnit.MILLISECONDS.toSeconds(diff) % <span class="number">60</span>;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[线程的状态]]></title>
      <url>http://bysonline.github.io/2016/07/24/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81/</url>
      <content type="html"><![CDATA[<p>参考 jdk 源码 java.lant.Thread.State 。Java 的线程有以下几种状态：</p>
<ul>
<li>NEW<br>线程未启动。</li>
<li>RUNNABLE<br>线程在 JVM 中运行，也可能在等待其他资源。</li>
<li>BLOCKED<br>线程阻塞并等待锁，在调用 wait() 方法后进入或重新进入同步方法。</li>
<li>WAITTING<br>线程在执行特定的方法如： Object.wait(), Thread.join(), LockSupport.park() 后等待另一个线程执行特定的方法，如：Object.notify()/Object.notifyAll() 。</li>
<li>TIMED_WAITTING<br>线程在执行特定方法后进入执行时间的等待状态，如： Thread.sleep(), Object.wait(), Thread.join(), LockSupport.parkNanos, LockSupport.parkUntil</li>
<li>TERMINATED<br>线程执行完成。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[面试题汇总]]></title>
      <url>http://bysonline.github.io/2016/07/24/%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<p>把自己遇到和网上看到的一写面试题汇总了一下，帮助梳理和学习一些知识点。</p>
<h1 id="一-算法"><a href="#一-算法" class="headerlink" title="一. 算法"></a>一. 算法</h1><h2 id="1-1-排序"><a href="#1-1-排序" class="headerlink" title="1.1 排序"></a>1.1 排序</h2><h3 id="1）-时间复杂度"><a href="#1）-时间复杂度" class="headerlink" title="1） 时间复杂度"></a>1） 时间复杂度</h3><p>参考 <a href="../../../../2016/07/16/排序算法/">算法排序</a> 。</p>
<h3 id="2）-快速排序"><a href="#2）-快速排序" class="headerlink" title="2） 快速排序"></a>2） 快速排序</h3><p>参考 <a href="../../../../2016/07/16/快速排序/">快速排序</a> 。</p>
<h3 id="3）-冒泡排序"><a href="#3）-冒泡排序" class="headerlink" title="3） 冒泡排序"></a>3） 冒泡排序</h3><p>参考 <a href="../../../../2016/07/16/冒泡排序/">冒泡排序</a> 。</p>
<h3 id="4）-选择排序"><a href="#4）-选择排序" class="headerlink" title="4） 选择排序"></a>4） 选择排序</h3><p>参考 <a href="../../../../2016/07/16/选择排序/">选择排序</a> 。</p>
<h2 id="1-2-查找"><a href="#1-2-查找" class="headerlink" title="1.2 查找"></a>1.2 查找</h2><h3 id="1）-二分查找"><a href="#1）-二分查找" class="headerlink" title="1） 二分查找"></a>1） 二分查找</h3><p>参考 <a href="../../../../2016/07/16/二分查找/">二分查找</a> 。</p>
<h2 id="1-3-树"><a href="#1-3-树" class="headerlink" title="1.3 树"></a>1.3 树</h2><h3 id="1）-二叉树"><a href="#1）-二叉树" class="headerlink" title="1） 二叉树"></a>1） 二叉树</h3><p>参考 <a href="../../../../2016/07/16/二叉树/">二叉树</a> 。</p>
<h3 id="2）-红黑树"><a href="#2）-红黑树" class="headerlink" title="2） 红黑树"></a>2） 红黑树</h3><h1 id="二-Java-基础"><a href="#二-Java-基础" class="headerlink" title="二. Java 基础"></a>二. Java 基础</h1><h2 id="2-1-nio"><a href="#2-1-nio" class="headerlink" title="2.1 nio"></a>2.1 nio</h2><h2 id="2-2-线程"><a href="#2-2-线程" class="headerlink" title="2.2 线程"></a>2.2 线程</h2><h3 id="1）-线程有几种状态？"><a href="#1）-线程有几种状态？" class="headerlink" title="1） 线程有几种状态？"></a>1） 线程有几种状态？</h3><p>参考 <a href="../../../../2016/07/24/线程的状态/">线程的状态</a> 。</p>
<h3 id="2）-线程的优先级"><a href="#2）-线程的优先级" class="headerlink" title="2） 线程的优先级"></a>2） 线程的优先级</h3><p>Java 线程的优先级有10种，从1到10，默认为5。Java 线程的优先级具有继承性。</p>
<h2 id="2-3-JVM"><a href="#2-3-JVM" class="headerlink" title="2.3 JVM"></a>2.3 JVM</h2><h2 id="2-4-集合"><a href="#2-4-集合" class="headerlink" title="2.4 集合"></a>2.4 集合</h2><h3 id="1）-HashMap-工作原理"><a href="#1）-HashMap-工作原理" class="headerlink" title="1） HashMap 工作原理"></a>1） HashMap 工作原理</h3><p>参考 <a href="../../../../2016/08/09/HashMap 的工作原理/">HashMap 的工作原理</a></p>
<h3 id="2）-ConcurrentHashMap原理"><a href="#2）-ConcurrentHashMap原理" class="headerlink" title="2） ConcurrentHashMap原理"></a>2） ConcurrentHashMap原理</h3><p>参考 <a href="../../../../2016/08/09/HashMap 的工作原理/#concurrentHashMap-和-Hashtable-的区别">HashMap 的工作原理</a></p>
<h3 id="3）-某公司正在做一个寻找走失儿童的公益项目，现在有一个函数，可以输入两个图片，并返回这个儿童是否重复。请你设计一个系统，帮助他们寻找儿童。"><a href="#3）-某公司正在做一个寻找走失儿童的公益项目，现在有一个函数，可以输入两个图片，并返回这个儿童是否重复。请你设计一个系统，帮助他们寻找儿童。" class="headerlink" title="3） 某公司正在做一个寻找走失儿童的公益项目，现在有一个函数，可以输入两个图片，并返回这个儿童是否重复。请你设计一个系统，帮助他们寻找儿童。"></a>3） 某公司正在做一个寻找走失儿童的公益项目，现在有一个函数，可以输入两个图片，并返回这个儿童是否重复。请你设计一个系统，帮助他们寻找儿童。</h3><pre><code>网友可以同时上传一批图片
系统能够把所有图片分类并归为一组
网友上传图片后，网页要尽快返回该照片所在的组。
</code></pre><p>A：假设你现在有一个机器，请写出你的数据结构与处理流程，设计的思路。<br>B：如果你有多台机器，如果缩短请求的时间？</p>
<h1 id="三-设计模式"><a href="#三-设计模式" class="headerlink" title="三. 设计模式"></a>三. 设计模式</h1><h2 id="1）-单例模式"><a href="#1）-单例模式" class="headerlink" title="1） 单例模式"></a>1） 单例模式</h2><p>参考 <a href="../../../../2016/08/02/单例模式/">单例模式</a> 。</p>
<h1 id="四-大数据"><a href="#四-大数据" class="headerlink" title="四. 大数据"></a>四. 大数据</h1><h1 id="五-Linux"><a href="#五-Linux" class="headerlink" title="五. Linux"></a>五. Linux</h1>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[gulp 环境安装]]></title>
      <url>http://bysonline.github.io/2016/07/20/Gulp-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>gulp是一个前端代码构建工具。安装gulp需要node.js环境，node.js环境安装参考 <a href="../../../../2016/07/16/node.js 环境安装/">node.js 环境安装</a> 。</p>
<h3 id="全局安装gulp命令行工具"><a href="#全局安装gulp命令行工具" class="headerlink" title="全局安装gulp命令行工具"></a>全局安装gulp命令行工具</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">npm install -g gulp</div><div class="line">or</div><div class="line">npm install --global gulp</div></pre></td></tr></table></figure>
<h3 id="安装开发环境"><a href="#安装开发环境" class="headerlink" title="安装开发环境"></a>安装开发环境</h3><p>切换到项目目录安装开发环境。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -save-dev gulp</div></pre></td></tr></table></figure></p>
<p>如果网速慢，可以使用淘宝镜像。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g cnpm --registry=https://registry.npm.taobao.org</div><div class="line">sudo cnpm install</div></pre></td></tr></table></figure></p>
<h3 id="创建gulp文件"><a href="#创建gulp文件" class="headerlink" title="创建gulp文件"></a>创建gulp文件</h3><p>在项目根目录下创建gulpfile.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var gulp = require(&apos;gulp&apos;);</div><div class="line"></div><div class="line">gulp.task(&apos;default&apos;, function() &#123;</div><div class="line">  // 将你的默认的任务代码放在这</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>安装完成执行命令启动gulp。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[我的 hexo 我做主]]></title>
      <url>http://bysonline.github.io/2016/07/19/%E6%88%91%E7%9A%84-hexo-%E6%88%91%E5%81%9A%E4%B8%BB/</url>
      <content type="html"><![CDATA[<p>Maupassant 主题有一些细节对于强迫症晚期患者来说，不改实在是浑身难受，遂记录一下修改项和修改方案。</p>
<h3 id="1-修改-toc-的位置"><a href="#1-修改-toc-的位置" class="headerlink" title="1. 修改 toc 的位置"></a>1. 修改 toc 的位置</h3><p>toc 在正文的右上，占了正文的空间，在 toc 较长的情况下，正文不能很好的显示，所以将 toc 改为在文章开头显示。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">.toc-article &#123;</div><div class="line">  border: 1px solid #bbb;</div><div class="line">  border-radius: 7px;</div><div class="line">  margin: 1.1em 0 0 2em;</div><div class="line">  padding: 0.7em 0.7em 0 0.7em;</div><div class="line">  max-width: 40%;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#toc &#123;</div><div class="line">  line-height: 1em;</div><div class="line">  float: right;</div><div class="line">  .toc &#123;</div><div class="line">    padding: 0;</div><div class="line">    margin: 0.5em;</div><div class="line">    line-height: 1.8em;</div><div class="line">    li &#123;</div><div class="line">      list-style-type: none;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>主要是去掉浮动和边框，在调整一下周围位置。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.toc-article &#123;</div><div class="line">  padding: 40px 0 0 0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">#toc &#123;</div><div class="line">  line-height: 1em;</div><div class="line">  .toc &#123;</div><div class="line">    padding: 20px;</div><div class="line">    line-height: 1.8em;</div><div class="line">    li &#123;</div><div class="line">      list-style-type: none;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="2-去掉-toc-中的序号"><a href="#2-去掉-toc-中的序号" class="headerlink" title="2. 去掉 toc 中的序号"></a>2. 去掉 toc 中的序号</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#toc &#123;</div><div class="line">  line-height: 1em;</div><div class="line">  .toc &#123;</div><div class="line">    padding: 20px;</div><div class="line">    line-height: 1.8em;</div><div class="line">    li &#123;</div><div class="line">      list-style-type: none;</div><div class="line">      a &#123;</div><div class="line">        .toc-number &#123;</div><div class="line">          display: none;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  .toc-child &#123;</div><div class="line">    margin-left: 1em;</div><div class="line">    padding-left: 0;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-修改代码区样式"><a href="#3-修改代码区样式" class="headerlink" title="3. 修改代码区样式"></a>3. 修改代码区样式</h3><p>在将语言改成 zh_CN 后，代码区行高需要调整,去掉 <code>.codeblock</code> 的 line-height 属性,修改 <code>.codeblock.line</code> 的 height 属性。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">figure.highlight,</div><div class="line">.codeblock &#123;</div><div class="line">    background:     #f7f8f8;</div><div class="line">    margin:         10px 0;</div><div class="line">    /* line-height:    1.2em; */</div><div class="line">    color:          #333;</div><div class="line">    padding-top:    15px;</div><div class="line">    overflow:       hidden;</div><div class="line">    border: 1px solid #e5e5e5; /* 代码块加边框 */</div><div class="line"></div><div class="line">    // All lines in gutter and code container</div><div class="line">    .line &#123;</div><div class="line">        height:    2.1em;</div><div class="line">        font-size: 13px;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="4-去掉文章结尾-tags"><a href="#4-去掉文章结尾-tags" class="headerlink" title="4. 去掉文章结尾 tags"></a>4. 去掉文章结尾 tags</h3><p>tags 改成在文章开始位置显示，结尾的 tags 就没必要显示了，干脆隐藏掉。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">.post &#123;</div><div class="line">  ...</div><div class="line">  .tags&#123;</div><div class="line">    padding-bottom: 1em;</div><div class="line">    height: 30px;</div><div class="line">    a &#123;</div><div class="line">        display: none;</div><div class="line">        margin-right: .5em;</div><div class="line">        &amp;:before &#123;</div><div class="line">            font-family: "FontAwesome";</div><div class="line">            content: "\f0c6";</div><div class="line">            padding-right: 0.3em;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>调整分享按钮的位置<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.article-share-link</span> &#123;</div><div class="line">  <span class="attribute">margin-top</span>: <span class="number">1em</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="5-调整文章列表显示"><a href="#5-调整文章列表显示" class="headerlink" title="5. 调整文章列表显示"></a>5. 调整文章列表显示</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.post-content</span> &#123;</div><div class="line">    <span class="attribute">padding-top</span>: <span class="number">10px</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-修改-table-样式"><a href="#6-修改-table-样式" class="headerlink" title="6. 修改 table 样式"></a>6. 修改 table 样式</h3><p>给 table 加上边框，将原有框线调细<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">table &#123;</div><div class="line">    th &#123;</div><div class="line">        font-weight: bold;</div><div class="line">        padding: 5px 10px;</div><div class="line">        border: 1px solid #909ba2;</div><div class="line">    &#125;</div><div class="line">    td &#123;</div><div class="line">        padding: 5px 10px;</div><div class="line">        border: 1px solid #909ba2;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="7-列表去掉文章内容显示"><a href="#7-列表去掉文章内容显示" class="headerlink" title="7. 列表去掉文章内容显示"></a>7. 列表去掉文章内容显示</h3><p>去掉 index.jade 中引用 content 。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">for post in page.posts.toArray()</div><div class="line">  .post</div><div class="line">    .post-title</div><div class="line">      include _partial/helpers</div><div class="line">      a(href=url_for(post.path))</div><div class="line">        +title(post)</div><div class="line">        span.post-meta=post.date.format(config.date_format)</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Jade 语法实践]]></title>
      <url>http://bysonline.github.io/2016/07/18/Jade-%E8%AF%AD%E6%B3%95%E5%AE%9E%E8%B7%B5/</url>
      <content type="html"><![CDATA[<p>jade 是一个模板引擎，可以通过 node.js 来使用。本来对前端技术了解不多，接触 jade 源于搭建 hexo 博客系统。maupassant 主题模板是基于 jade 的，所以想按自己的想法来定制 maupassant 主题简单了解了一下 jade 。</p>
<p>hexo 的 maupassant 主题是一个极简主题模板，安装也很简单，用起来不错，但是有些小地方还是想按照自己的想法改一改：</p>
<ol>
<li>默认只有归档，没有 tags 和 categories ，而且添加了 tags 和 categories 后不能显示 tags 和 categories 的列表；</li>
<li>每篇文章 tags 标签在文章末尾，希望 categories 一样在文章开头显示；</li>
</ol>
<h3 id="增加-tags-列表"><a href="#增加-tags-列表" class="headerlink" title="增加 tags 列表"></a>增加 tags 列表</h3><p>安装 hexo 和 maupassant 主题后在 themes/maupassant/_ config.yml 中添加 tags 和 categories 两个 menu，重启服务界面能看到 tags 和 categories 的菜单导航。但是点击会报找不到页面错误，所以还需要生成 tags/index和categories/index 。执行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo new page tags</div><div class="line">hexo new page categories</div></pre></td></tr></table></figure></p>
<p>会生成 tags/index.md 和 categories/index.md 文件，重启后不会再报找不到页面的错误。<br>但 index.md 默认是空白页面，内容需要自己写，所以想参考 archive 来写一些内容。想显示的内容也很简单，首先就是列出所有 tags 或 categories ，然后能显示每个 tag 或category 下的文章数量。<br>网站的 tags 和 categories 不是固定的，所以在 index.md 中写死是不行的，需要利用模板来实现。看了看 maupassant 主题的 layout 结构，首先先参考 archive.jade 创建了一个 tags.jade 文件,只保留大的结构。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">extends base</div><div class="line"></div><div class="line">block title</div><div class="line">  title= page.tag + &apos; | &apos; + config.title</div><div class="line">block content</div><div class="line"></div><div class="line">  include _partial/paginator.jade</div></pre></td></tr></table></figure></p>
<p>参考 archive.jade 代码，对网站所有 tag 进行分组，然后遍历显示。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">each tags in _.groupBy(site.tags.toArray(), function(p)&#123;return page.tag&#125;)</div><div class="line">  ul.listing</div><div class="line">    for tag in tags</div><div class="line">      li</div><div class="line">        h4</div><div class="line">          a(href=url_for(tag.path))= _.split(tag.path,&apos;\/&apos;)[1]</div></pre></td></tr></table></figure></p>
<p>最后一行代码等号后边是 tag 的名字，原本以为 tag.name 就可以了，但是重建之后发现不能正常显示。不明白原因，查看了 hexo 的文档，在 hexo 的变量声明中 tag 的名字是page.tag，猜测是在 post 页面中才能引用 tag 属性。查了文档也没找到正确的打开方式，忽然发现 tag.path 可以正常显示 tag 的路径，所以是否可以在 path 中将 tag 的 name 提取出来呢？于是查了一下<a href="https://lodash.com/docs" target="_blank" rel="external">https://lodash.com/docs</a>( archive.jade 里注释中有让看的，就看看喽)，还真有 spilt 的函数。改完重新生成，显示正常了(别忘了把 tag/index.md 的 layout 改成 tags 哈)。</p>
<h3 id="改变文章中-tags-的显示位置"><a href="#改变文章中-tags-的显示位置" class="headerlink" title="改变文章中 tags 的显示位置"></a>改变文章中 tags 的显示位置</h3><p>默认界面 tags 在文章结束坐下位置，但我期望在界面文章开始位置增加 tags 的显示，即在点击量统计的后边再增加显示 tags 内容。结合模板代码和界面的显示效果，可以大致定位到具体代码位置。文章正文默认使用的 post 模板，位于 themes/maupassant/layout/post.jade 。在文件15-19行是点击量统计的代码，所以在后面可添加 tags 显示代码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if page.tags.length &gt; 0</div><div class="line">  span= &apos; | &apos;</div><div class="line">  span.tag</div><div class="line">    for tag in page.tags.toArray()</div><div class="line">      i(class=[&apos;fa&apos;,&apos;fa-paperclip&apos;]) &amp;nbsp;</div><div class="line">      a(href=url_for(tag.path))= tag.name + &apos;&apos;</div></pre></td></tr></table></figure></p>
<p>jade 模板的语法有严格缩进要求，所以和上边的代码位置一致即可。<br>代码看起来很简单，但是改的时候还是费了一些周折。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">page.tags.toArray()</div></pre></td></tr></table></figure></p>
<p>的写法参考上文<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">page.categories.toArray()</div></pre></td></tr></table></figure></p>
<p>很容易写出来。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">i(class=[&apos;fa&apos;,&apos;fa-paperclip&apos;]) &amp;nbsp;</div></pre></td></tr></table></figure></p>
<p>是一个 i 标签，用于显示图标，渲染成 html 是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;i class=&quot;fa fa-paperclip&quot;&gt;&amp;nbsp;&lt;/i&gt;</div></pre></td></tr></table></figure></p>
<p>如果不看 jade 的语法，只根据 post.jade 文件中的代码可以大致推测 jade 的语法规则比如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">span.category</div></pre></td></tr></table></figure></p>
<p>渲染成 html 后是<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;span class=&quot;category&quot;&gt;&lt;/span&gt;</div></pre></td></tr></table></figure></p>
<p>但是单 class 属性图标无法正常显示，也试过<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">i.fa.fa-paperclip</div><div class="line">或</div><div class="line">i.fa i.fa-paperclip</div></pre></td></tr></table></figure></p>
<p>等等写法，均不能达到效果，只好去看 jade 的文档。在<a href="http://jade-lang.com/reference/attributes/" target="_blank" rel="external">http://jade-lang.com/reference/attributes/</a>中 <strong>Class Attributes</strong> 找到了多个 class 的语法说明，问题至此得以解决。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Client SDK (Java 版)]]></title>
      <url>http://bysonline.github.io/2016/07/16/Client-SDK-(Java-%E7%89%88%EF%BC%89/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ChinadaasClient client = new ChinadaasClient(url, clientId, appId, token);</div><div class="line">PersonCheckRequest request1 = new PersonCheckRequest(name, identity, type);</div><div class="line">String result = client.get(request1);</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[电信数据核验接口]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E7%94%B5%E4%BF%A1%E6%95%B0%E6%8D%AE%E6%A0%B8%E9%AA%8C%E6%8E%A5%E5%8F%A3/</url>
      <content type="html"><![CDATA[<p>信息核查是一系列查询api接口，以REST服务方式提供。用户按照指定规则开发接口程序或引入SDK后，可通过程序调用接口。使用前请先申请客户账号和令牌。令牌由客户保存，用于生成签名。为使该服务的使用者详细了解服务接口调用方法和规范，特编制此接口使用说明文档。</p>
<h3 id="公共参数"><a href="#公共参数" class="headerlink" title="公共参数"></a>公共参数</h3><table>
<thead>
<tr>
<th>参数名称</th>
<th>类型</th>
<th>是否必需</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>clientId</td>
<td>string</td>
<td>必须</td>
<td>guest</td>
<td>用户唯一标识</td>
</tr>
<tr>
<td>signatrue</td>
<td>string</td>
<td>必须</td>
<td>123</td>
<td>用户请求的数据签名，由用户令牌，timestamp，nonce加密获得</td>
</tr>
<tr>
<td>timestamp</td>
<td>string</td>
<td>必须</td>
<td>2016-07-05 13:42:10</td>
<td>时间戳，服务器允许最大10分钟误差</td>
</tr>
<tr>
<td>nonce</td>
<td>string</td>
<td>必须</td>
<td>-1200534598</td>
<td>随机数</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>可选</td>
<td>xml</td>
<td>默认为json</td>
</tr>
</tbody>
</table>
<h3 id="1-电信数据身份核验"><a href="#1-电信数据身份核验" class="headerlink" title="1. 电信数据身份核验"></a>1. 电信数据身份核验</h3><p>根据提供的手机号，姓名，身份证号，由系统针对信息的一致性进行核查，并返回结果。</p>
<h4 id="1-1-URL"><a href="#1-1-URL" class="headerlink" title="1.1 URL"></a>1.1 URL</h4><p><a href="http://ip:port/drink/greenTea" target="_blank" rel="external">http://ip:port/drink/greenTea</a></p>
<h4 id="1-2-请求参数"><a href="#1-2-请求参数" class="headerlink" title="1.2 请求参数"></a>1.2 请求参数</h4><table>
<thead>
<tr>
<th>参数名称</th>
<th>类型</th>
<th>是否必需</th>
<th>示例值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>必须</td>
<td>张三</td>
<td>人员姓名</td>
<td></td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>必须</td>
<td>18610011001</td>
<td>手机号码</td>
</tr>
<tr>
<td>identity</td>
<td>string</td>
<td>必须</td>
<td>210219197101011246</td>
<td>身份证</td>
</tr>
</tbody>
</table>
<h4 id="1-3-响应参数"><a href="#1-3-响应参数" class="headerlink" title="1.3 响应参数"></a>1.3 响应参数</h4><table>
<thead>
<tr>
<th>参数</th>
<th>类</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Object</td>
<td>返回消息数据结构</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;├ errorCode</td>
<td>string</td>
<td>错误码，0表示成功</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;└ result</td>
<td>Object</td>
<td>核验结果数据结构</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├ code</td>
<td>string</td>
<td>消息码</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├ message</td>
<td>string</td>
<td>消息说明</td>
</tr>
</tbody>
</table>
<h4 id="1-4-响应示例"><a href="#1-4-响应示例" class="headerlink" title="1.4 响应示例"></a>1.4 响应示例</h4><p><strong><em>xml</em></strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">errorCode</span>&gt;</span>0<span class="tag">&lt;/<span class="name">errorCode</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">code</span>&gt;</span>2<span class="tag">&lt;/<span class="name">code</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">message</span>&gt;</span>核验不一致<span class="tag">&lt;/<span class="name">message</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><strong><em>json</em></strong><br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"errorCode"</span>: <span class="string">"0"</span>,</div><div class="line">    <span class="attr">"result"</span>:&#123;</div><div class="line">        <span class="attr">"code"</span>:<span class="string">"2"</span>,</div><div class="line">        <span class="attr">"message"</span>:<span class="string">"核验不一致"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="1-5-异常"><a href="#1-5-异常" class="headerlink" title="1.5 异常"></a>1.5 异常</h4><p><strong><em>xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</div><div class="line">&lt;data&gt;</div><div class="line">    &lt;errorCode&gt;9995&lt;/errorCode&gt;</div><div class="line">&lt;/data&gt;</div></pre></td></tr></table></figure></p>
<p><strong><em>json</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;errorCode&quot;: &quot;9995&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="1-6-消息码描述"><a href="#1-6-消息码描述" class="headerlink" title="1.6 消息码描述"></a>1.6 消息码描述</h4><table>
<thead>
<tr>
<th>类型</th>
<th>代码值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>1</td>
<td>一致</td>
</tr>
<tr>
<td></td>
<td></td>
<td>2</td>
<td>不一致</td>
</tr>
</tbody>
</table>
<h3 id="返回消息代码解释"><a href="#返回消息代码解释" class="headerlink" title="返回消息代码解释"></a>返回消息代码解释</h3><table>
<thead>
<tr>
<th>类型</th>
<th>代码值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>errorCode</td>
<td>0</td>
<td>成功</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9999</td>
<td>用户身份信息错误</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9998</td>
<td>账户状态异常</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9997</td>
<td>账户类型异常</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9996</td>
<td>没有订购该产品</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9995</td>
<td>没有查询权限</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9994</td>
<td>请求参数格式不正确</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9993</td>
<td>系统内部错误</td>
</tr>
<tr>
<td></td>
<td></td>
<td>9992</td>
<td>请求过期</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Zookeeper-3.4.6 安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Zookeeper-3.4.6-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>zookeeper 是分布式的开源协调服务程序，官方网站 <a href="http://zookeeper.apache.org/" target="_blank" rel="external">http://zookeeper.apache.org/</a> 。</p>
<h3 id="1-环境变量"><a href="#1-环境变量" class="headerlink" title="1. 环境变量"></a>1. 环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo echo &quot;ZOOKEEPER_HOME=/usr/zookeeper/zookeeper-3.4.6&quot;&gt;/etc/profile.d/zookeeper.sh</div><div class="line">sudo echo &apos;PATH=\$PATH :$ZOOKEEPER_HOME/bin&apos;&gt;&gt;/etc/profile.d/zookeeper.sh</div><div class="line">. /etc/profile</div></pre></td></tr></table></figure>
<h3 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2. 配置文件"></a>2. 配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp /usr/zookeeper/zookeeper-3.4.6/conf/zoo_sample.cfd /usr/zookeeper/zookeeper-3.4.6/conf/zoo.cfd</div></pre></td></tr></table></figure>
<h3 id="3-启动"><a href="#3-启动" class="headerlink" title="3. 启动"></a>3. 启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/zookeeper/zookeeper-3.4.6/bin/zkServer.sh start</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[jQuery常用操作操作]]></title>
      <url>http://bysonline.github.io/2016/07/16/jQuery-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%93%8D%E4%BD%9C/</url>
      <content type="html"><![CDATA[<p>jQuery 的常用操作整理一下，备忘。</p>
<h3 id="遍历-json-map"><a href="#遍历-json-map" class="headerlink" title="遍历 json map"></a>遍历 json map</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$.each(map,<span class="function"><span class="keyword">function</span>(<span class="params">key,values</span>)</span>&#123;     </div><div class="line">    <span class="built_in">console</span>.log(key);     </div><div class="line">    $(values).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;     </div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"/t"</span> + <span class="keyword">this</span>);     </div><div class="line">    &#125;);     </div><div class="line"> &#125;);</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Sqlplus 执行文件]]></title>
      <url>http://bysonline.github.io/2016/07/16/Sqlplus-%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/</url>
      <content type="html"><![CDATA[<p>使用客户端工具导入数据量大时会卡死，所以改用命令行执行。</p>
<h3 id="1-连接数据库"><a href="#1-连接数据库" class="headerlink" title="1. 连接数据库"></a>1. 连接数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sqlplus user/password@192.168.11.15:1521/orcl</div></pre></td></tr></table></figure>
<h3 id="2-执行文件"><a href="#2-执行文件" class="headerlink" title="2. 执行文件"></a>2. 执行文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SQL&gt; @D:\a.sql</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spring boot 使用]]></title>
      <url>http://bysonline.github.io/2016/07/16/Spring-boot-%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>spring boot可使用Main运行一个web程序，对于简单的web应用还是比较方便的。</p>
<h3 id="1-工程目录"><a href="#1-工程目录" class="headerlink" title="1. 工程目录"></a>1. 工程目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">    project</div><div class="line">        src/main/assembly/assembly.xml</div><div class="line">        src/main/java/com/rolex/samples/</div><div class="line">            bean/</div><div class="line">            controller/</div><div class="line">            dao/</div><div class="line">            service/</div><div class="line">            util/</div><div class="line">            Main.java</div><div class="line">        src/main/resources/</div><div class="line">            static/  (相当于webcontent)</div><div class="line">                css/</div><div class="line">                html/</div><div class="line">                js/</div><div class="line">                index.html</div><div class="line">            application.properties    </div><div class="line">        test/</div><div class="line">        target/</div><div class="line">        pom.xml</div><div class="line">        README.md</div><div class="line"></div><div class="line">### 2. 程序主要文件     </div><div class="line"></div><div class="line">***Main.java***</div></pre></td></tr></table></figure>
<p>import org.springframework.boot.SpringApplication;<br>import org.springframework.boot.autoconfigure.SpringBootApplication;</p>
<p>/**</p>
<ul>
<li>Created with IntelliJ IDEA.</li>
<li>User: rolex</li>
<li>Date: 2016/05/06</li>
<li>Version: 1.0<br>*/<br>@SpringBootApplication<br>public class Main {<br> public static void main(String[] args) {<pre><code>SpringApplication.run(Main.class, args);
</code></pre> }<br>}<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Main是程序的入口类，程序启动时会扫描Main所在目录子目录的所有文件进行spring注入（对声明了spring注解的类有效）。</div><div class="line"></div><div class="line">***pom.xml***</div></pre></td></tr></table></figure>
</li>
</ul>
<p>&lt;?xml version=”1.0” encoding=”UTF-8”?&gt;</p>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

<pre><code>...     
&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.4.0.BUILD-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
        &lt;optional&gt;true&lt;/optional&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;spring-snapshots&lt;/id&gt;
        &lt;name&gt;Spring Snapshots&lt;/name&gt;
        &lt;url&gt;https://repo.spring.io/libs-snapshot&lt;/url&gt;
        &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
        &lt;/snapshots&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</code></pre><p></p></project><br>```<p></p>
<h3 id="2-启动"><a href="#2-启动" class="headerlink" title="2. 启动"></a>2. 启动</h3><p>执行命令</p>
<blockquote>
<p>java -jar app.jar –spring.config.name=app</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spring boot cache （redis）使用]]></title>
      <url>http://bysonline.github.io/2016/07/16/Spring-boot-cache-%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h3 id="1-pom-xml"><a href="#1-pom-xml" class="headerlink" title="1. pom.xml"></a>1. pom.xml</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<h3 id="2-cachemanager"><a href="#2-cachemanager" class="headerlink" title="2. cachemanager"></a>2. cachemanager</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">import org.springframework.cache.CacheManager;</div><div class="line">import org.springframework.cache.annotation.EnableCaching;</div><div class="line">import org.springframework.cache.interceptor.KeyGenerator;</div><div class="line">import org.springframework.context.annotation.Bean;</div><div class="line">import org.springframework.context.annotation.Configuration;</div><div class="line">import org.springframework.data.redis.cache.RedisCacheManager;</div><div class="line">import org.springframework.data.redis.core.RedisTemplate;</div><div class="line"></div><div class="line">import java.lang.reflect.Method;</div><div class="line"></div><div class="line">@Configuration</div><div class="line">@EnableCaching</div><div class="line">public class RedisCache &#123;</div><div class="line">    @Bean</div><div class="line">    public CacheManager cacheManager(</div><div class="line">            @SuppressWarnings(&quot;rawtypes&quot;) RedisTemplate redisTemplate) &#123;</div><div class="line">        return new RedisCacheManager(redisTemplate);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 自定义key的生成策略</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    @Bean</div><div class="line">    public KeyGenerator myKeyGenerator()&#123;</div><div class="line">        return new KeyGenerator() &#123;</div><div class="line">            @Override</div><div class="line">            public Object generate(Object target, Method method, Object... params) &#123;</div><div class="line">                StringBuilder sb = new StringBuilder();</div><div class="line">                for (Object obj : params) &#123;</div><div class="line">                    sb.append(obj.toString());</div><div class="line">                &#125;</div><div class="line">                return sb.toString();</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-方法上添加注解"><a href="#3-方法上添加注解" class="headerlink" title="3. 方法上添加注解"></a>3. 方法上添加注解</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@Cacheable(value = &quot;entInfo&quot;, keyGenerator = &quot;myKeyGenerator&quot;)</div><div class="line">public EntMultipleInfo findEntInfo(String entName) &#123;</div><div class="line">    looger.info(&quot;no cache&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>在调用方法前会先去查询是否有缓存。<br>对象需要能够序列化</p>
</blockquote>
<h3 id="4-application-properties"><a href="#4-application-properties" class="headerlink" title="4. application.properties"></a>4. application.properties</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">spring.redis.database= 3</div><div class="line">spring.redis.host=192.168.11.21</div><div class="line">spring.redis.port=6379</div><div class="line">spring.redis.pool.max-idle=8</div><div class="line">spring.redis.pool.min-idle=0</div><div class="line">spring.redis.pool.max-active=8</div><div class="line">spring.redis.pool.max-wait=-1</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spark standalone 安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Spark-standalone-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>spark standalone即伪分布式部署,即在单击部署spark,部署方式比较简单.</p>
<h3 id="1-下载spark安装包"><a href="#1-下载spark安装包" class="headerlink" title="1. 下载spark安装包"></a>1. 下载spark安装包</h3><p><a href="http://www.apache.org/dyn/closer.lua/spark/spark-1.6.1/spark-1.6.1-bin-hadoop2.6.tgz" target="_blank" rel="external">http://www.apache.org/dyn/closer.lua/spark/spark-1.6.1/spark-1.6.1-bin-hadoop2.6.tgz</a></p>
<h3 id="2-解压"><a href="#2-解压" class="headerlink" title="2. 解压"></a>2. 解压</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf spark-1.6.1-bin-hadoop2.6.tgz</div></pre></td></tr></table></figure>
<h3 id="3-启动"><a href="#3-启动" class="headerlink" title="3. 启动"></a>3. 启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./sbin/start-all.sh</div></pre></td></tr></table></figure>
<p>启动后可访问<a href="http://node1:8080" target="_blank" rel="external">http://node1:8080</a>查看信息</p>
<h3 id="4-安装客户端"><a href="#4-安装客户端" class="headerlink" title="4. 安装客户端"></a>4. 安装客户端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf spark-1.6.1-bin-hadoop2.6.tgz</div></pre></td></tr></table></figure>
<h3 id="5-启动客户端"><a href="#5-启动客户端" class="headerlink" title="5. 启动客户端"></a>5. 启动客户端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./bin/spark-shell --master spark://node1:7077</div></pre></td></tr></table></figure>
<h3 id="6-测试"><a href="#6-测试" class="headerlink" title="6. 测试"></a>6. 测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var rdd1 = sc.textFile(&quot;hdfs://192.168.1.11:9000/user/sparkone/input/NOTICE.txt&quot;)</div><div class="line">val rdd2 = rdd1.flatMap(_.split(&quot; &quot;)).map(x=&gt;(x,1)).reduceByKey(_+_)</div><div class="line">rdd2.take(10)</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[一个shell脚本示例]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E4%B8%80%E4%B8%AA-shell-%E8%84%9A%E6%9C%AC%E7%A4%BA%E4%BE%8B/</url>
      <content type="html"><![CDATA[<p>一个通过shell执行java程序的示例。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/env bash</div><div class="line"></div><div class="line">#``倒引号中是需要执行命令</div><div class="line">#找到文件名字，/opt/demo/current/bin/start.sh</div><div class="line">SCRIPT_PATH=`readlink -f &quot;$0&quot;`</div><div class="line">#可用于定位路径，不用写绝对路径，增加可移植性</div><div class="line">cd `dirname $&#123;SCRIPT_PATH&#125;`</div><div class="line">#定位到/opt/demo/current/</div><div class="line">cd ..</div><div class="line">#创建目录</div><div class="line">mkdir -p logs</div><div class="line"></div><div class="line">PID_FILE=logs/web.pid</div><div class="line">PID=&quot;&quot;</div><div class="line">#如果文件存在，则读文件</div><div class="line">if [ -f $PID_FILE ]</div><div class="line">    then</div><div class="line">    PID=`cat $PID_FILE`</div><div class="line">fi</div><div class="line"></div><div class="line">#如果pid不为空，使用ps查进程</div><div class="line">if [ ! &quot;$PID&quot; = &quot;&quot; ]</div><div class="line">    then</div><div class="line">    #查到任何信息都丢弃，如果查到信息返回0，输出提示消息，没查到返回1</div><div class="line">    if ( /bin/ps -p $PID &gt;/dev/null 2&gt;&amp;1 )</div><div class="line">        then</div><div class="line">        echo &quot;already started, pid = $PID&quot;</div><div class="line">        exit 1</div><div class="line">    fi</div><div class="line">fi</div><div class="line"></div><div class="line">CP=&quot;etc&quot;</div><div class="line">#将target/classes加到classpath</div><div class="line">if [ -d target/classes ]</div><div class="line">    then</div><div class="line">    CP=$CP:target/classes</div><div class="line">fi</div><div class="line"></div><div class="line">#将lib目录下的所有jar包加到classpath</div><div class="line">for jar in `/bin/ls -1 lib/*.jar`</div><div class="line">do</div><div class="line">    CP=$CP:$jar</div><div class="line">done</div><div class="line"></div><div class="line">#执行java命令,$@表示所有的参数列表</div><div class="line">java -cp $CP com.daas.cfg.Main $@ &amp;</div><div class="line"></div><div class="line">#记录最后运行的后台Process的PID</div><div class="line">PID=$!</div><div class="line">#记录最后运行的命令的结束代码（返回值）</div><div class="line">CODE=$?</div><div class="line">#0 表示成功</div><div class="line">if [ &quot;$CODE&quot; = &quot;0&quot; ]</div><div class="line">    then</div><div class="line">    #将pid写到文件</div><div class="line">    echo $PID &gt;$PID_FILE</div><div class="line">    echo &quot;started, PID=$PID&quot;</div><div class="line">fi</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Oracle 分页 sql 模板]]></title>
      <url>http://bysonline.github.io/2016/07/16/Oracle-%E5%88%86%E9%A1%B5-sql-%E6%A8%A1%E6%9D%BF/</url>
      <content type="html"><![CDATA[<p>Oracle通过ROWNUM进行分页，通过子查询实现。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> *</div><div class="line"><span class="keyword">FROM</span> (<span class="keyword">SELECT</span></div><div class="line">        A.*,</div><div class="line">        <span class="keyword">ROWNUM</span> RN</div><div class="line">      <span class="keyword">FROM</span> (</div><div class="line">        <span class="keyword">SELECT</span> * <span class="keyword">FORM</span> t</div><div class="line">      ) A</div><div class="line">      <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt;= <span class="number">100</span>)</div><div class="line"><span class="keyword">WHERE</span> RN &gt;= <span class="number">0</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Oracle 日期转换]]></title>
      <url>http://bysonline.github.io/2016/07/16/Oracle-%E6%97%A5%E6%9C%9F%E8%BD%AC%E6%8D%A2/</url>
      <content type="html"><![CDATA[<p>Oracle 日期转换示例。</p>
<h3 id="1-英语日期格式转换"><a href="#1-英语日期格式转换" class="headerlink" title="1. 英语日期格式转换"></a>1. 英语日期格式转换</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span></div><div class="line">  <span class="keyword">TO_DATE</span>(<span class="keyword">SUBSTR</span>(<span class="string">'29-JAN-16 03.09.31.030943000 PM'</span>, <span class="number">0</span>, <span class="number">9</span>), <span class="string">'dd-MON-yy'</span>, <span class="string">'NLS_DATE_LANGUAGE = American'</span>) d1,</div><div class="line">  TO_CHAR(<span class="keyword">sysdate</span>, <span class="string">'DD-MON-YY'</span>, <span class="string">'NLS_DATE_LANGUAGE = American'</span>) d2,</div><div class="line">  TO_CHAR(<span class="keyword">sysdate</span>, <span class="string">'DD-MON-YY'</span>) d3</div><div class="line"><span class="keyword">FROM</span> dual</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>d1</th>
<th>d2</th>
<th>d3</th>
</tr>
</thead>
<tbody>
<tr>
<td>2016-01-29 00:00:00</td>
<td>01-JUL-16</td>
<td>01-7月 -16</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Oracle Clob 格式处理]]></title>
      <url>http://bysonline.github.io/2016/07/16/Oracle-Clob-%E6%A0%BC%E5%BC%8F%E5%A4%84%E7%90%86/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span> &#123;</div><div class="line">    Clob clob = resultSet.getClob(<span class="string">"FCT_PARTY"</span>);</div><div class="line">    <span class="keyword">if</span> (clob != <span class="keyword">null</span> &amp;&amp; clob.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">char</span>[] c = <span class="keyword">new</span> <span class="keyword">char</span>[(<span class="keyword">int</span>) clob.length()];</div><div class="line">        Reader reader = clob.getCharacterStream();</div><div class="line">        reader.read(c);</div><div class="line">        fygg.setParty(<span class="keyword">new</span> String(c));</div><div class="line">        reader.close();</div><div class="line">    &#125;</div><div class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">    logger.error(<span class="string">"column &#123;&#125;.FCT_PARTY read failed."</span>, tableName, e);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Nexus 私服搭建]]></title>
      <url>http://bysonline.github.io/2016/07/16/Nexus-%E7%A7%81%E6%9C%8D%E6%90%AD%E5%BB%BA/</url>
      <content type="html"><![CDATA[<h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>下载最新的Nexus OSS<br><a href="http://www.sonatype.org/downloads/nexus-latest-bundle.tar.gz" target="_blank" rel="external">http://www.sonatype.org/downloads/nexus-latest-bundle.tar.gz</a></p>
<h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar -zxf nexus-latest-bundle.tar.gz  </div><div class="line">mv nexus-2.11.1-01 nexus2</div><div class="line"></div><div class="line">chown -R nexus2</div><div class="line">chown -R sonatype-work</div></pre></td></tr></table></figure>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./bin/nexus start</div></pre></td></tr></table></figure>
<h3 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">vi ./bin/nexus</div><div class="line"></div><div class="line">PIDDIR=&quot;/home/rolex/piddir&quot;</div><div class="line"></div><div class="line">sudo ln -s /home/soft/nexus/nexus-2.11.2-06/bin/nexus /etc/init.d/nexus  </div><div class="line">chkconfig --add nexus  </div><div class="line">chkconfig --levels 345 nexus on  </div><div class="line"></div><div class="line">service nexus start</div></pre></td></tr></table></figure>
<h3 id="访问"><a href="#访问" class="headerlink" title="访问"></a>访问</h3><p>在浏览器中输入<a href="http://192.168.1.201:8081/nexus/" target="_blank" rel="external">http://192.168.1.201:8081/nexus/</a><br><img src="http://7xqgix.com1.z0.glb.clouddn.com/9.png" alt="img"></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>管理员账号admin，默认密码admin123，通过右上角登录。</p>
<h3 id="添加代理仓库"><a href="#添加代理仓库" class="headerlink" title="添加代理仓库"></a>添加代理仓库</h3><p>点击左侧的Repositories，然后再点击右侧的Add，会弹出下拉菜单，选择Proxy Repository，如下配置。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/10.png" alt="http://7xqgix.com1.z0.glb.clouddn.com/10.png"><br>选中Public Repositories，将新建的Proxy Repository加入到Public Repositories组，并Update Index。<br><img src="http://7xqgix.com1.z0.glb.clouddn.com/11.png" alt="http://7xqgix.com1.z0.glb.clouddn.com/11.png"></p>
<h3 id="配置maven"><a href="#配置maven" class="headerlink" title="配置maven"></a>配置maven</h3><p>修改maven的<strong>settings.xml</strong>文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;mirrors&gt;</div><div class="line">&lt;mirror&gt;</div><div class="line">  &lt;id&gt;nexus&lt;/id&gt;</div><div class="line">  &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;     </div><div class="line">  &lt;url&gt;http://192.168.1.201:8081/nexus/content/groups/public/&lt;/url&gt;</div><div class="line">&lt;/mirror&gt;</div><div class="line">&lt;/mirrors&gt;</div><div class="line"></div><div class="line">&lt;profiles&gt;</div><div class="line">&lt;profile&gt;</div><div class="line">    &lt;id&gt;nexus&lt;/id&gt;</div><div class="line">    &lt;repositories&gt;</div><div class="line">      &lt;repository&gt;</div><div class="line">        &lt;id&gt;nexus&lt;/id&gt;</div><div class="line">        &lt;name&gt;Nexus&lt;/name&gt;</div><div class="line">        &lt;url&gt;http://192.168.1.201:8081/nexus/content/groups/public/&lt;/url&gt;</div><div class="line">        &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</div><div class="line">        &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;</div><div class="line">      &lt;/repository&gt;</div><div class="line">    &lt;/repositories&gt;</div><div class="line">    &lt;pluginRepositories&gt;</div><div class="line">      &lt;pluginRepository&gt;</div><div class="line">        &lt;id&gt;nexus&lt;/id&gt;</div><div class="line">          &lt;name&gt;Nexus&lt;/name&gt;</div><div class="line">          &lt;url&gt;http://192.168.1.201:8081/nexus/content/groups/public/&lt;/url&gt;</div><div class="line">          &lt;releases&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/releases&gt;</div><div class="line">          &lt;snapshots&gt;&lt;enabled&gt;true&lt;/enabled&gt;&lt;/snapshots&gt;</div><div class="line">      &lt;/pluginRepository&gt;</div><div class="line">    &lt;/pluginRepositories&gt;</div><div class="line">  &lt;/profile&gt;</div><div class="line">&lt;/profiles&gt;</div><div class="line"></div><div class="line">&lt;activeProfiles&gt;</div><div class="line">	&lt;activeProfile&gt;nexus&lt;/activeProfile&gt;</div><div class="line">&lt;/activeProfiles&gt;</div></pre></td></tr></table></figure></p>
<p>第一次安装后，nexus私服仓库是空的，通过maven下载jar包显示从私服仓库下载，实际还是从公网下载，然后保存到本地,以后再下载相同的jar包就直接从本地下载了。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Maven打包专题]]></title>
      <url>http://bysonline.github.io/2016/07/16/Maven-%E6%89%93%E5%8C%85%E4%B8%93%E9%A2%98/</url>
      <content type="html"><![CDATA[<h3 id="可执行jar包"><a href="#可执行jar包" class="headerlink" title="可执行jar包"></a>可执行jar包</h3><p><strong><em>pom.xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;build&gt;</div><div class="line">    &lt;plugins&gt;</div><div class="line">        &lt;plugin&gt;</div><div class="line">            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;</div><div class="line">            &lt;configuration&gt;</div><div class="line">                &lt;descriptorRefs&gt;</div><div class="line">                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;</div><div class="line">                &lt;/descriptorRefs&gt;</div><div class="line">                &lt;archive&gt;</div><div class="line">                    &lt;manifest&gt;</div><div class="line">                        &lt;mainClass&gt;com.rolex.tools.Ashbringer&lt;/mainClass&gt;</div><div class="line">                    &lt;/manifest&gt;</div><div class="line">                &lt;/archive&gt;</div><div class="line">            &lt;/configuration&gt;</div><div class="line"></div><div class="line">        &lt;/plugin&gt;</div><div class="line">    &lt;/plugins&gt;</div><div class="line">&lt;/build&gt;</div></pre></td></tr></table></figure></p>
<p>使用命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn assembly:assembly</div></pre></td></tr></table></figure></p>
<p>可生成可执行 jar 包。配置文件是打在 jar 包里边的，所以想灵活的使用外部配置文件，此方法并不合适。</p>
<h3 id="jar-包"><a href="#jar-包" class="headerlink" title="jar 包"></a>jar 包</h3><p><strong><em>jar-with-dependencies</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;assembly xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3&quot;</div><div class="line">          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">          xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd&quot;&gt;</div><div class="line">    &lt;!-- TODO: a jarjar format would be better --&gt;</div><div class="line">    &lt;id&gt;jar-with-dependencies&lt;/id&gt;</div><div class="line">    &lt;formats&gt;</div><div class="line">        &lt;format&gt;jar&lt;/format&gt;</div><div class="line">    &lt;/formats&gt;</div><div class="line">    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;</div><div class="line">    &lt;dependencySets&gt;</div><div class="line">        &lt;dependencySet&gt;</div><div class="line">            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;</div><div class="line">            &lt;useProjectArtifact&gt;true&lt;/useProjectArtifact&gt;</div><div class="line">            &lt;unpack&gt;true&lt;/unpack&gt;</div><div class="line">            &lt;scope&gt;runtime&lt;/scope&gt;</div><div class="line">        &lt;/dependencySet&gt;</div><div class="line">    &lt;/dependencySets&gt;</div><div class="line">&lt;/assembly&gt;</div></pre></td></tr></table></figure></p>
<h3 id="war-包"><a href="#war-包" class="headerlink" title="war 包"></a>war 包</h3><h3 id="ear-包"><a href="#ear-包" class="headerlink" title="ear 包"></a>ear 包</h3><h3 id="tar-gz"><a href="#tar-gz" class="headerlink" title="tar.gz"></a>tar.gz</h3><p>针对开发、测试、生产环境各自有一套配置文件是，可将工程打 tgz 包部署，解压后使用软连接引用不同环境的配置。<br>文件目录如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">project</div><div class="line">    bin/</div><div class="line">    etc/</div><div class="line">    lib/</div><div class="line">    sql/</div><div class="line">    src/main/assembly/assembly.xml</div><div class="line">    src/main/java</div><div class="line">    src/main/resources</div><div class="line">    target/</div><div class="line">    pom.xml</div><div class="line">    README.md</div></pre></td></tr></table></figure></p>
<p><strong><em>pom.xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</div><div class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</div><div class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line"></div><div class="line">    &lt;groupId&gt;com.rolex.maven.samples&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;maven-samples&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</div><div class="line"></div><div class="line">    &lt;properties&gt;</div><div class="line">        &lt;maven.build.timestamp.format&gt;yyyyMMddHHmm&lt;/maven.build.timestamp.format&gt;</div><div class="line">        &lt;java-version&gt;1.8&lt;/java-version&gt;</div><div class="line">    &lt;/properties&gt;</div><div class="line"></div><div class="line">    &lt;profiles&gt;</div><div class="line">        &lt;!-- 防止idea每次更新pom都重置jdk设置 --&gt;</div><div class="line">        &lt;profile&gt;</div><div class="line">            &lt;id&gt;jdk-1.8&lt;/id&gt;</div><div class="line">            &lt;activation&gt;</div><div class="line">                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</div><div class="line">                &lt;jdk&gt;$&#123;java-version&#125;&lt;/jdk&gt;</div><div class="line">            &lt;/activation&gt;</div><div class="line">            &lt;properties&gt;</div><div class="line">                &lt;maven.compiler.source&gt;$&#123;java-version&#125;&lt;/maven.compiler.source&gt;</div><div class="line">                &lt;maven.compiler.target&gt;$&#123;java-version&#125;&lt;/maven.compiler.target&gt;</div><div class="line">                &lt;maven.compiler.compilerVersion&gt;$&#123;java-version&#125;&lt;/maven.compiler.compilerVersion&gt;</div><div class="line">            &lt;/properties&gt;</div><div class="line">        &lt;/profile&gt;</div><div class="line">    &lt;/profiles&gt;</div><div class="line"></div><div class="line">    &lt;dependencies&gt;</div><div class="line">        ...</div><div class="line">    &lt;/dependencies&gt;</div><div class="line"></div><div class="line">    &lt;build&gt;</div><div class="line">        &lt;plugins&gt;</div><div class="line">            &lt;!-- 编译插件 --&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;configuration&gt;</div><div class="line">                    &lt;source&gt;$&#123;java-version&#125;&lt;/source&gt;</div><div class="line">                    &lt;target&gt;$&#123;java-version&#125;&lt;/target&gt;</div><div class="line">                &lt;/configuration&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">            &lt;!-- 解决依赖jar包插件 --&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;executions&gt;</div><div class="line">                    &lt;execution&gt;</div><div class="line">                        &lt;id&gt;copy-dependencies&lt;/id&gt;</div><div class="line">                        &lt;phase&gt;package&lt;/phase&gt;</div><div class="line">                        &lt;goals&gt;</div><div class="line">                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;</div><div class="line">                        &lt;/goals&gt;</div><div class="line">                        &lt;configuration&gt;</div><div class="line">                            &lt;!-- 将jar拷贝到lib目录 --&gt;</div><div class="line">                            &lt;outputDirectory&gt;$&#123;project.basedir&#125;/lib&lt;/outputDirectory&gt;</div><div class="line">                            &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;</div><div class="line">                            &lt;overWriteSnapshots&gt;true&lt;/overWriteSnapshots&gt;</div><div class="line">                        &lt;/configuration&gt;</div><div class="line">                    &lt;/execution&gt;</div><div class="line">                &lt;/executions&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">            &lt;!-- 打tgz包插件 --&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;configuration&gt;</div><div class="line">                    &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;</div><div class="line">                    &lt;finalName&gt;$&#123;project.artifactId&#125;-$&#123;maven.build.timestamp&#125;&lt;/finalName&gt;</div><div class="line">                    &lt;descriptors&gt;</div><div class="line">                        &lt;descriptor&gt;src/main/assembly/assembly.xml&lt;/descriptor&gt;</div><div class="line">                    &lt;/descriptors&gt;</div><div class="line">                &lt;/configuration&gt;</div><div class="line">                &lt;executions&gt;</div><div class="line">                    &lt;execution&gt;</div><div class="line">                        &lt;id&gt;make-assembly&lt;/id&gt;</div><div class="line">                        &lt;phase&gt;package&lt;/phase&gt;</div><div class="line">                        &lt;goals&gt;</div><div class="line">                            &lt;goal&gt;single&lt;/goal&gt;</div><div class="line">                        &lt;/goals&gt;</div><div class="line">                    &lt;/execution&gt;</div><div class="line">                &lt;/executions&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">        &lt;/plugins&gt;</div><div class="line">    &lt;/build&gt;</div><div class="line"></div><div class="line">    &lt;repositories&gt;</div><div class="line">        &lt;!-- 设置中央仓库 --&gt;</div><div class="line">        &lt;repository&gt;</div><div class="line">            &lt;id&gt;spring-snapshots&lt;/id&gt;</div><div class="line">            &lt;name&gt;Spring Snapshots&lt;/name&gt;</div><div class="line">            &lt;url&gt;https://repo.spring.io/libs-snapshot&lt;/url&gt;</div><div class="line">            &lt;snapshots&gt;</div><div class="line">                &lt;enabled&gt;true&lt;/enabled&gt;</div><div class="line">            &lt;/snapshots&gt;</div><div class="line">        &lt;/repository&gt;</div><div class="line">    &lt;/repositories&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure></p>
<p><strong><em>assembly.xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;assembly xmlns=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2&quot;</div><div class="line">          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">          xsi:schemaLocation=&quot;http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd&quot;&gt;</div><div class="line">    &lt;id&gt;distribution&lt;/id&gt;</div><div class="line">    &lt;formats&gt;</div><div class="line">        &lt;format&gt;tgz&lt;/format&gt;</div><div class="line">    &lt;/formats&gt;</div><div class="line">    &lt;fileSets&gt;</div><div class="line">        &lt;fileSet&gt;</div><div class="line">            &lt;directory&gt;$&#123;project.basedir&#125;&lt;/directory&gt;</div><div class="line">            &lt;outputDirectory&gt;/&lt;/outputDirectory&gt;</div><div class="line">            &lt;includes&gt;</div><div class="line">                &lt;!-- 需要打进tgz包的文件和目录 --&gt;</div><div class="line">                &lt;include&gt;lib/**/*&lt;/include&gt;</div><div class="line">                &lt;include&gt;bin/**/*&lt;/include&gt;</div><div class="line">                &lt;include&gt;sql/**/*&lt;/include&gt;</div><div class="line">                &lt;include&gt;etc/**/*&lt;/include&gt;</div><div class="line">                &lt;include&gt;README*&lt;/include&gt;</div><div class="line">            &lt;/includes&gt;</div><div class="line">        &lt;/fileSet&gt;</div><div class="line">        &lt;fileSet&gt;</div><div class="line">            &lt;directory&gt;$&#123;project.basedir&#125;/target/classes&lt;/directory&gt;</div><div class="line">            &lt;outputDirectory&gt;/target/classes&lt;/outputDirectory&gt;</div><div class="line">            &lt;includes&gt;</div><div class="line">                &lt;include&gt;**/*.class&lt;/include&gt;</div><div class="line">            &lt;/includes&gt;</div><div class="line">        &lt;/fileSet&gt;</div><div class="line">    &lt;/fileSets&gt;</div><div class="line">&lt;/assembly&gt;</div></pre></td></tr></table></figure></p>
<p>assembly 的详细属性说明参考<a href="http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html" target="_blank" rel="external">http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html</a></p>
<p>使用命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mvn clean package</div></pre></td></tr></table></figure></p>
<p>可生成 tgz 包。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[node.js 环境安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Node.js-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="1-下载最新版本源代码"><a href="#1-下载最新版本源代码" class="headerlink" title="1. 下载最新版本源代码"></a>1. 下载最新版本源代码</h3><h3 id="2-解压安装"><a href="#2-解压安装" class="headerlink" title="2. 解压安装"></a>2. 解压安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar -zxf node-v5.11.0.tar.gz</div><div class="line">cd node-v5.11.0</div><div class="line">sudo ./configure</div><div class="line">sudo make</div><div class="line">sudo make install</div></pre></td></tr></table></figure>
<p>使用<code>node -v</code>输出版本信息则安装成功。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CentOS 6.5 minimal安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/CentOS-6.5-minimal-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="1-安装eth0"><a href="#1-安装eth0" class="headerlink" title="1. 安装eth0"></a>1. 安装eth0</h3><p><strong>/etc/sysconfig/network-scripts/ifcfg-eth0</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ONBOOT=yes</div><div class="line">BOOTPROTO=static</div><div class="line">IPADDR=192.168.1.64</div><div class="line">GATEWAY=192.168.1.1</div></pre></td></tr></table></figure></p>
<h3 id="2-创建用户和组"><a href="#2-创建用户和组" class="headerlink" title="2. 创建用户和组"></a>2. 创建用户和组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">groupadd rolex  </div><div class="line">useradd -g rolex rolex  </div><div class="line">passwd rolex</div></pre></td></tr></table></figure>
<h3 id="3-添加sudo权限"><a href="#3-添加sudo权限" class="headerlink" title="3. 添加sudo权限"></a>3. 添加sudo权限</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">visudo</div><div class="line"></div><div class="line">rolex	ALL=(ALL)	ALL</div><div class="line">rolex	ALL=NOPASSWD:	ALL</div></pre></td></tr></table></figure>
<h3 id="4-安装ftp"><a href="#4-安装ftp" class="headerlink" title="4. 安装ftp"></a>4. 安装ftp</h3><p>参考 <a href="../../../../2016/07/16/CentOS 6.5 minimal 安装ftp/">CentOS 6.5 minimal 安装ftp</a> 。</p>
<h3 id="5-安装JDK"><a href="#5-安装JDK" class="headerlink" title="5. 安装JDK"></a>5. 安装JDK</h3><p>参考 <a href="../../../../2016/07/16/CentOS 6.5 安装JDK/">CentOS 6.5 安装JDK</a> 。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CentOS 6.5 minimal安装ftp]]></title>
      <url>http://bysonline.github.io/2016/07/16/CentOS-6.5-minimal-%E5%AE%89%E8%A3%85-ftp/</url>
      <content type="html"><![CDATA[<h3 id="1-配置DNS"><a href="#1-配置DNS" class="headerlink" title="1. 配置DNS"></a>1. 配置DNS</h3><p><strong>/etc/resolv.conf</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">nameserver 8.8.8.8</div><div class="line">nameserver 4.4.4.4</div></pre></td></tr></table></figure></p>
<p>###2. 安装ftp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install vsftpd</div></pre></td></tr></table></figure></p>
<p>###3. 放开home路径权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">setsebool -P  ftp_home_dir  on</div></pre></td></tr></table></figure></p>
<p>###4. 虚拟机ftp配置</p>
<p>系统装完，可以ping通，但是ftp不通，错误消息如下：</p>
<p>状态:      尝试连接“ECONNREFUSED - Connection refused by server”失败</p>
<p>google说可能是端口没开或占用</p>
<p>所以检查一下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -na --ip</div></pre></td></tr></table></figure></p>
<p>21端口果然没有，打开ftp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service vsftpd start</div></pre></td></tr></table></figure></p>
<p>再连ftp，错误消息如下：</p>
<p>命令:      USER root<br>响应:      530 Permission denied.</p>
<p>用的root用户，vsftp默认关闭root用户，所以打开root用户<br>修改文件 <strong>/etc/vsftpd.ftpusers</strong> 和 <strong>/etc/vsftpd.user_list</strong></p>
<p>响应: 553 Could not create file.<br>错误: 严重文件传输错误</p>
<p>执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">setsebool allow_ftpd_full_access 1</div><div class="line">setsebool allow_ftpd_use_cifs 1</div><div class="line">setsebool allow_ftpd_use_nfs 1</div><div class="line">setsebool ftp_home_dir 1</div><div class="line">setsebool httpd_enable_ftp_server 1</div><div class="line">setsebool tftp_anon_write 1</div><div class="line">service vsftpd restart</div></pre></td></tr></table></figure></p>
<p>###5. vsftp上传文件限制</p>
<p>553 Could not create file.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/usr/sbin/setsebool -P ftp_home_dir 1</div><div class="line">/usr/sbin/setsebool allow_ftpd_full_access 1</div><div class="line">/usr/sbin/setsebool allow_ftpd_use_cifs 1</div><div class="line">/usr/sbin/setsebool allow_ftpd_use_nfs 1</div><div class="line">/usr/sbin/setsebool -P ftp_home_dir 1</div><div class="line">/usr/sbin/setsebool httpd_enable_ftp_server 1</div><div class="line">/usr/sbin/setsebool tftp_anon_write 1</div><div class="line">/usr/sbin/service vsftpd restart</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CentOS 6.5 安装JDK]]></title>
      <url>http://bysonline.github.io/2016/07/16/CentOS-6.5-%E5%AE%89%E8%A3%85JDK/</url>
      <content type="html"><![CDATA[<h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1. 下载"></a>1. 下载</h3><h4 id="1-1-安装wget"><a href="#1-1-安装wget" class="headerlink" title="1.1 安装wget"></a>1.1 安装wget</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y wget</div></pre></td></tr></table></figure>
<h4 id="1-2-下载JDK"><a href="#1-2-下载JDK" class="headerlink" title="1.2 下载JDK"></a>1.2 下载JDK</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget &quot;http://download.oracle.com/otn-pub/java/jdk/8u20-b26/jdk-8u20-linux-x64.tar.gz&quot;</div></pre></td></tr></table></figure>
<h3 id="2-解压"><a href="#2-解压" class="headerlink" title="2. 解压"></a>2. 解压</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf jdk-8u20-linux-x64.tar.gz</div></pre></td></tr></table></figure>
<h3 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3. 配置环境变量"></a>3. 配置环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">echo &quot;JAVA_HOME=/usr/java/jdk1.8.0_20&quot; &gt; /etc/profile.d/java.sh  </div><div class="line">echo &apos;\$JAVA_HOME/bin:$PATH&apos; &gt;&gt; /etc/profile.d/java.sh  </div><div class="line">echo &apos;export JAVA_HOME PATH&apos; &gt;&gt; /etc/profile.d/java.sh</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[/etc/profile和/etc/profile.d的区别]]></title>
      <url>http://bysonline.github.io/2016/07/16/profile-%E5%92%8C-profile.d-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      <content type="html"><![CDATA[<ol>
<li><p>两个文件都是设置环境变量文件的，/etc/profile是永久性的环境变量,是全局变量，/etc/profile.d/设置所有用户生效  </p>
</li>
<li><p>/etc/profile.d/比/etc/profile好维护，不想要什么变量直接删除/etc/profile.d/下对应的shell脚本即可，不用像/etc/profile需要改动此文件</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[linux 安装图形界面]]></title>
      <url>http://bysonline.github.io/2016/07/16/Linux-%E5%AE%89%E8%A3%85%E5%9B%BE%E5%BD%A2%E7%95%8C%E9%9D%A2/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">yum -y groupinstall Desktop</div><div class="line">yum -y groupinstall &quot;X Window System&quot;</div><div class="line">yum install libXfont-1.4.5-*</div><div class="line">yum install libX11</div><div class="line">startx</div></pre></td></tr></table></figure>
<p>切换界面失败<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chkconfig --level 35 haldaemon on</div><div class="line">chkconfig --level 35 messagebus on</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[查找文件中 abc 出现的次数]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E4%B8%AD-abc-%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>linux查找字符串的几种方法。</p>
<h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep -o abc file | wc -l</div></pre></td></tr></table></figure>
<h3 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk -v RS=&apos;abc&apos; &apos;END &#123;print --NR&#125;&apos; file</div></pre></td></tr></table></figure>
<h3 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">awk -v RS=&quot;@#$j&quot; &apos;&#123;print gsub(/abc/,&quot;&amp;&quot;)&#125;&apos; NOTICE</div></pre></td></tr></table></figure>
<h3 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep -c &quot;abc&quot; NOTICE</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[拷贝vmware文件方式创建虚拟机]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E6%8B%B7%E8%B4%9D-vmware-%E6%96%87%E4%BB%B6%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
      <content type="html"><![CDATA[<h3 id="vmware打开文件"><a href="#vmware打开文件" class="headerlink" title="vmware打开文件"></a>vmware打开文件</h3><h3 id="查看ifconfig-a发现没有eth0网卡"><a href="#查看ifconfig-a发现没有eth0网卡" class="headerlink" title="查看ifconfig -a发现没有eth0网卡"></a>查看ifconfig -a发现没有eth0网卡</h3><h4 id="打开-etc-udev-rules-d-70-persistent-net-rules文件，将eth1改成eth0。"><a href="#打开-etc-udev-rules-d-70-persistent-net-rules文件，将eth1改成eth0。" class="headerlink" title="打开 /etc/udev/rules.d/70-persistent-net.rules文件，将eth1改成eth0。"></a>打开 /etc/udev/rules.d/70-persistent-net.rules文件，将eth1改成eth0。</h4><h4 id="将-etc-sysconfig-network-scripts-ifcfg-eth0中的HWADDR改成当前虚拟机的mac地址。"><a href="#将-etc-sysconfig-network-scripts-ifcfg-eth0中的HWADDR改成当前虚拟机的mac地址。" class="headerlink" title="将/etc/sysconfig/network-scripts/ifcfg-eth0中的HWADDR改成当前虚拟机的mac地址。"></a>将/etc/sysconfig/network-scripts/ifcfg-eth0中的HWADDR改成当前虚拟机的mac地址。</h4><h3 id="reboot"><a href="#reboot" class="headerlink" title="reboot"></a>reboot</h3>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[单机搭建 elk + logback 环境]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E5%8D%95%E6%9C%BA%E6%90%AD%E5%BB%BA-elk-+-logback/</url>
      <content type="html"><![CDATA[<p>elk是开源日志分析平台，由<a href="http://www.elastic.co" target="_blank" rel="external">elastic</a>公司的三款开源产品组成。</p>
<h3 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h3><p>下载elasticsearch、logstash、kibana。</p>
<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h3><h4 id="2-1-elasticsearch"><a href="#2-1-elasticsearch" class="headerlink" title="2.1 elasticsearch"></a>2.1 elasticsearch</h4><p>解压<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf elasticsearch-2.3.1.tar.gz</div></pre></td></tr></table></figure></p>
<p><strong><em>elasticsearch-2.3.1/config/elasticsearch.yml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cluster.name: es</div><div class="line">node.name: node1</div><div class="line">network.host: node1</div><div class="line">discovery.zen.ping.unicast.hosts: [&quot;node1&quot;]</div></pre></td></tr></table></figure></p>
<p>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bin/elasticsearch</div></pre></td></tr></table></figure></p>
<h4 id="2-2-logstash"><a href="#2-2-logstash" class="headerlink" title="2.2 logstash"></a>2.2 logstash</h4><p>解压<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">logstash-2.3.2.tar.gz</div></pre></td></tr></table></figure></p>
<p>新建配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir etc</div><div class="line">cd etc</div></pre></td></tr></table></figure></p>
<p><strong><em>my.conf</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">input &#123;</div><div class="line"></div><div class="line">    stdin &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    redis &#123;</div><div class="line">        batch_count =&gt; 1</div><div class="line">        data_type =&gt; &quot;list&quot;</div><div class="line">        key =&gt; &quot;logstash&quot;</div><div class="line">        host =&gt; &quot;127.0.0.1&quot;</div><div class="line">        port =&gt; 6379</div><div class="line">        db =&gt; 0</div><div class="line">        threads =&gt; 1</div><div class="line">    &#125;</div><div class="line"></div><div class="line">#    tcp &#123;</div><div class="line">#        host  =&gt; &quot;127.0.0.1&quot;</div><div class="line">#        port  =&gt; 5678</div><div class="line">#        codec =&gt; &quot;line&quot;</div><div class="line">#    &#125;</div><div class="line"></div><div class="line">    log4j &#123;</div><div class="line">        mode =&gt; &quot;server&quot;</div><div class="line">        host  =&gt; &quot;127.0.0.1&quot;</div><div class="line">        port =&gt; 56789</div><div class="line">        type =&gt; &quot;log4j&quot;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">output &#123;</div><div class="line">    stdout &#123;</div><div class="line">        codec =&gt; rubydebug</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    elasticsearch &#123;</div><div class="line">        hosts =&gt; [&quot;node1:9200&quot;]</div><div class="line">        index =&gt; &quot;logstash&quot;</div><div class="line">        document_type =&gt; &quot;log&quot;</div><div class="line">        workers =&gt; 1</div><div class="line">        flush_size =&gt; 20000</div><div class="line">        idle_flush_time =&gt; 10</div><div class="line">        template_overwrite =&gt; true</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bin/logstash agent -f ../etc/my.conf</div></pre></td></tr></table></figure></p>
<h4 id="2-3-kibana"><a href="#2-3-kibana" class="headerlink" title="2.3 kibana"></a>2.3 kibana</h4><p>解压<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf kibana-4.5.1-linux-x64.tar.gz</div></pre></td></tr></table></figure></p>
<p><strong><em>config/kibana.yml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">elasticsearch.url: &quot;http://node1:9200&quot;</div></pre></td></tr></table></figure></p>
<p>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bin/kibana</div></pre></td></tr></table></figure></p>
<h3 id="3-收集日志"><a href="#3-收集日志" class="headerlink" title="3.收集日志"></a>3.收集日志</h3><h4 id="3-1-使用-log4j-收集日志"><a href="#3-1-使用-log4j-收集日志" class="headerlink" title="3.1 使用 log4j 收集日志"></a>3.1 使用 log4j 收集日志</h4><p>logstash 有 log4j 的 input 插件，所以使用 log4j 可以很容易将日志收集到 logstash 。</p>
<p><strong><em>Log4jTest.java</em></strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.apache.log4j.Logger;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Log4jTest</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Logger logger = Logger.getLogger(Log4jTest.class);</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        logger.debug(<span class="string">"hello logstash, this is a message from log4j"</span>);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><em>log4j.properties</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</div><div class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.stdout.layout.ConversionPattern=%d %p %t %c : %m%n</div><div class="line"></div><div class="line">log4j.appender.file=org.apache.log4j.RollingFileAppender</div><div class="line">log4j.appender.file.file=../log/test.log</div><div class="line">log4j.appender.file.maxFileSize=1024</div><div class="line">log4j.appender.file.layout=org.apache.log4j.PatternLayout</div><div class="line">log4j.appender.file.layout.ConversionPattern=%d %p %t %c : %m%n</div><div class="line"></div><div class="line"># logstash配置</div><div class="line">log4j.appender.logstash=org.apache.log4j.net.SocketAppender</div><div class="line">log4j.appender.logstash.port=56789</div><div class="line">log4j.appender.logstash.remoteHost=127.0.0.1</div><div class="line"></div><div class="line">log4j.rootLogger=debug,stdout,file,logstash</div></pre></td></tr></table></figure></p>
<p>运行程序可在 kibana 中看到日志。</p>
<h4 id="3-2-使用-logback-收集日志"><a href="#3-2-使用-logback-收集日志" class="headerlink" title="3.2 使用 logback 收集日志"></a>3.2 使用 logback 收集日志</h4><p>logstash 没有 logback 的插件，可以使用 tcp 方式收集日志（效果不好，官方也不建议在生产环境使用tcp方式）。</p>
<h5 id="3-2-1-tcp-方式"><a href="#3-2-1-tcp-方式" class="headerlink" title="3.2.1 tcp 方式"></a>3.2.1 tcp 方式</h5><p><strong><em>logback.xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line"></div><div class="line">    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;</div><div class="line">        &lt;!-- encoder 默认配置为PatternLayoutEncoder --&gt;</div><div class="line">        &lt;encoder&gt;</div><div class="line">            &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&lt;/pattern&gt;</div><div class="line">        &lt;/encoder&gt;</div><div class="line">    &lt;/appender&gt;</div><div class="line">    &lt;appender name=&quot;SOCKET&quot; class=&quot;ch.qos.logback.classic.net.SocketAppender&quot;&gt;</div><div class="line">        &lt;remoteHost&gt;127.0.0.1&lt;/remoteHost&gt;</div><div class="line">        &lt;port&gt;5678&lt;/port&gt;</div><div class="line">        &lt;reconnectionDelay&gt;10000&lt;/reconnectionDelay&gt;</div><div class="line">        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;</div><div class="line">    &lt;/appender&gt;</div><div class="line"></div><div class="line">    &lt;root level=&quot;INFO&quot;&gt;</div><div class="line">        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;</div><div class="line">        &lt;appender-ref ref=&quot;SOCKET&quot; /&gt;</div><div class="line">    &lt;/root&gt;</div><div class="line"></div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>
<h5 id="3-2-2-logback-redis"><a href="#3-2-2-logback-redis" class="headerlink" title="3.2.2 logback + redis"></a>3.2.2 logback + redis</h5><p>使用 redis 作为消息队列，需要用到 logback-rides 的开源包。</p>
<p>安装redis</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar -zxf redis-3.2.0.tar.gz</div><div class="line">cd redis-3.2.0/</div><div class="line">sudo make</div><div class="line">sudo make install</div></pre></td></tr></table></figure>
<p>注：如果logstash和redis不在同一台机器，需要修改<strong><em>redis.conf</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#bind 127.0.0.1</div><div class="line">protected-mode no</div></pre></td></tr></table></figure></p>
<p>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/local/bin/redis-server</div></pre></td></tr></table></figure></p>
<p><strong><em>pom.xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;com.cwbase&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;logback-redis-appender&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.1.5&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>
<p><strong><em>LogbackTest.java</em></strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.slf4j.Logger;</div><div class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogbackTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> Logger logger = LoggerFactory.getLogger(LogbackTest.class);</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        logger.info(<span class="string">"this log come from slf4j."</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong><em>logback.xml</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line"></div><div class="line">    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;</div><div class="line">        &lt;!-- encoder 默认配置为PatternLayoutEncoder --&gt;</div><div class="line">        &lt;encoder&gt;</div><div class="line">            &lt;pattern&gt;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&lt;/pattern&gt;</div><div class="line">        &lt;/encoder&gt;</div><div class="line">    &lt;/appender&gt;</div><div class="line"></div><div class="line">    &lt;appender name=&quot;LOGSTASH&quot; class=&quot;com.cwbase.logback.RedisAppender&quot;&gt;</div><div class="line">        &lt;source&gt;mySource&lt;/source&gt;</div><div class="line">        &lt;sourcePath&gt;mySourcePath&lt;/sourcePath&gt;</div><div class="line">        &lt;type&gt;myApplication&lt;/type&gt;</div><div class="line">        &lt;tags&gt;production&lt;/tags&gt;</div><div class="line">        &lt;host&gt;127.0.0.1&lt;/host&gt;</div><div class="line">        &lt;port&gt;6379&lt;/port&gt;</div><div class="line">        &lt;key&gt;logstash&lt;/key&gt;</div><div class="line">    &lt;/appender&gt;</div><div class="line"></div><div class="line">    &lt;root level=&quot;INFO&quot;&gt;</div><div class="line">        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;</div><div class="line">        &lt;appender-ref ref=&quot;LOGSTASH&quot; /&gt;</div><div class="line">    &lt;/root&gt;</div><div class="line"></div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[添加sudo权限]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E6%B7%BB%E5%8A%A0%20sudo%20%E6%9D%83%E9%99%90/</url>
      <content type="html"><![CDATA[<p>错误消息：xxx is not in the sudoers file<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">su root</div><div class="line">visudo</div></pre></td></tr></table></figure></p>
<p>root ALL=(ALL) ALL下添加一行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xxx  ALL=(ALL) ALL</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[选择排序]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F/</url>
      <content type="html"><![CDATA[<p>从序列中选择最小元素，放置在起始位置，直到全部排完。</p>
<p>选择排序的时间复杂度为O(n*n)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelectSort</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sort(<span class="keyword">int</span>[] arr) &#123;</div><div class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"can not sort"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; arr.length - <span class="number">1</span>; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (arr[i] &gt; arr[j]) &#123;</div><div class="line">                    swap(arr, i, j);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> temp = arr[x];</div><div class="line">        arr[x] = arr[y];</div><div class="line">        arr[y] = temp;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[字符界面安装 vmware tools]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E5%AD%97%E7%AC%A6%E7%95%8C%E9%9D%A2%E5%AE%89%E8%A3%85%20vmware%20tools/</url>
      <content type="html"><![CDATA[<h3 id="1-挂载cdrom"><a href="#1-挂载cdrom" class="headerlink" title="1. 挂载cdrom"></a>1. 挂载cdrom</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /mnt</div><div class="line">mkdir cdrom</div><div class="line">mount /dev/cdrom /mnt/cdrom</div></pre></td></tr></table></figure>
<h3 id="2-拷贝vmwaretools"><a href="#2-拷贝vmwaretools" class="headerlink" title="2. 拷贝vmwaretools"></a>2. 拷贝vmwaretools</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cp /mnt/cdrom/VMwareTools-9.6.1-1378637.tar.gz /tmp</div><div class="line">tar -zxvf /tmp/VMwareTools-9.6.1-1378637.tar.gz</div><div class="line">cd /tmp/vmware-tools-distrib/</div><div class="line">./vmware-install.pl</div></pre></td></tr></table></figure>
<h3 id="3-默认一路回车-yes"><a href="#3-默认一路回车-yes" class="headerlink" title="3. 默认一路回车+yes"></a>3. 默认一路回车+yes</h3><p>少perl包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install perl gcc kernel-devel</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[生产者消费者（BlockingQueue）]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%EF%BC%88BlockingQueue%EF%BC%89/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProducerAndConsumerInBlockingQueue</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		BlockingQueue&lt;Integer&gt; queue = <span class="keyword">new</span> ArrayBlockingQueue&lt;Integer&gt;(<span class="number">10</span>);</div><div class="line"></div><div class="line">	 	<span class="keyword">new</span> Thread(<span class="keyword">new</span> ProducerAndConsumerInBlockingQueue().new Producer(queue)).start();</div><div class="line">	 	<span class="keyword">new</span> Thread(<span class="keyword">new</span> ProducerAndConsumerInBlockingQueue().new Consumer(queue)).start();</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line"></div><div class="line">		BlockingQueue&lt;Integer&gt; queue;</div><div class="line"></div><div class="line">	 	<span class="function"><span class="keyword">public</span> <span class="title">Producer</span><span class="params">(BlockingQueue&lt;Integer&gt; queue)</span> </span>&#123;</div><div class="line">			<span class="keyword">this</span>.queue = queue;</div><div class="line">	 	&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">				<span class="keyword">int</span> i = <span class="keyword">new</span> Random().nextInt();</div><div class="line">			 	<span class="keyword">try</span> &#123;</div><div class="line">					queue.put(i);</div><div class="line">			 		System.out.println(<span class="string">"加入元素："</span> + i + <span class="string">"queue size="</span> + queue.size());</div><div class="line">			 		Thread.sleep(<span class="number">1000</span>);</div><div class="line">			 	&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">					e.printStackTrace();</div><div class="line">			 	&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line"></div><div class="line">		BlockingQueue&lt;Integer&gt; queue;</div><div class="line"></div><div class="line">	 	<span class="function"><span class="keyword">public</span> <span class="title">Consumer</span><span class="params">(BlockingQueue&lt;Integer&gt; queue)</span> </span>&#123;</div><div class="line">			<span class="keyword">this</span>.queue = queue;</div><div class="line">	 	&#125;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">			<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					Integer i = queue.take();</div><div class="line">					System.out.println(<span class="string">"取出元素："</span> + i + <span class="string">"queue size="</span> + queue.size());</div><div class="line">					Thread.sleep(<span class="number">1000</span>);</div><div class="line">	 			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">					e.printStackTrace();</div><div class="line">	 			&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[排序算法]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<h2 id="排序算法复杂度"><a href="#排序算法复杂度" class="headerlink" title="排序算法复杂度"></a>排序算法复杂度</h2><p><a href="../../../../2016/07/16/冒泡排序/">冒泡排序</a>、直接插入排序、<a href="../../../../2016/07/16/选择排序/">选择排序</a>、交换排序时间复杂度为：O(n*n)<br><a href="../../../../2016/07/16/快速排序/">快速排序</a>、归并排序、堆排序时间复杂度为：O(nlogn)<br>希尔排序的时间复杂度为：O(nlog2n)</p>
<h2 id="排序算法的稳定性"><a href="#排序算法的稳定性" class="headerlink" title="排序算法的稳定性"></a>排序算法的稳定性</h2><p>排序前2个相等的数其在序列的前后位置顺序和排序后它们两个的前后位置顺序相同。</p>
<p>选择排序、快速排序、希尔排序、堆排序不是稳定的排序算法。<br>冒泡排序、插入排序、归并排序和基数排序是稳定的排序算法。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[多线程]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E5%A4%9A%E7%BA%BF%E7%A8%8B1/</url>
      <content type="html"><![CDATA[<p>编写一个程序，开启3个线程，这3个线程的ID分别为A、B、C，每个线程将自己的ID在屏幕上打印10遍，要求输出结果必须按ABC的顺序显示；如：ABCABC….依次递推。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JoinTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            System.out.print(<span class="string">"A"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            System.out.print(<span class="string">"B"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            System.out.print(<span class="string">"C"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(Thread thread)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        Thread t = <span class="keyword">new</span> Thread(thread);</div><div class="line">        t.start();</div><div class="line">        t.join();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Thread <span class="title">get</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</div><div class="line">        Thread t = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">switch</span> (i % <span class="number">3</span>) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">                t = <span class="keyword">new</span> A();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">                t = <span class="keyword">new</span> B();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">                t = <span class="keyword">new</span> C();</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> t;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</div><div class="line">            run(get(i));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        <span class="keyword">new</span> JoinTest().print();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[冒泡排序]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/</url>
      <content type="html"><![CDATA[<p>比较两个元素，顺序错误则交换，直到将最大放置到末尾，一次排序结束。</p>
<p>冒泡排序的时间复杂度为O(n*n)</p>
<p><strong>Java 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BubbleSort</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sort(<span class="keyword">int</span>[] arr) &#123;</div><div class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"can not sort"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - i; j++) &#123;</div><div class="line">                <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</div><div class="line">                    swap(arr, j, j + <span class="number">1</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> temp = arr[x];</div><div class="line">        arr[x] = arr[y];</div><div class="line">        arr[y] = temp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Groovy 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">def <span class="keyword">int</span>[] bubbleSort(<span class="keyword">int</span>[] arr)&#123;</div><div class="line">    <span class="keyword">if</span>(arr != <span class="keyword">null</span> &amp;&amp; arr.length &gt; <span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;arr.length-i-<span class="number">1</span>;j++)&#123;</div><div class="line">                <span class="keyword">if</span>(arr[j]&gt;arr[j+<span class="number">1</span>])&#123;</div><div class="line">                    <span class="keyword">int</span> temp = arr[j]</div><div class="line">                    arr[j] = arr[j+<span class="number">1</span>]</div><div class="line">                    arr[j+<span class="number">1</span>] = temp</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">println <span class="title">bubbleSort</span><span class="params">(arr)</span></span></div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[交换两个数]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E4%BA%A4%E6%8D%A2%E4%B8%A4%E4%B8%AA%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>有两个数 a 和 b ,不使用新的变量，交换 a 和 b 的值。<br><a id="more"></a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">a=<span class="number">5</span>,b=<span class="number">10</span></div><div class="line">a=a+b    a=<span class="number">15</span> b=<span class="number">10</span></div><div class="line">a=b-a    a=-<span class="number">5</span> b=<span class="number">10</span></div><div class="line">b=a+b    b=<span class="number">5</span> a=-<span class="number">5</span></div><div class="line">a=b-a    a=<span class="number">10</span> b=<span class="number">5</span></div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">a=<span class="number">1</span>,b=<span class="number">10</span></div><div class="line">a=a+b    a=<span class="number">11</span> b=<span class="number">10</span></div><div class="line">a=b-a    a=-<span class="number">9</span> b=<span class="number">10</span></div><div class="line">b=a+b    b=<span class="number">1</span> a=-<span class="number">9</span></div><div class="line">a=b-a    a=<span class="number">10</span> b=<span class="number">1</span></div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[shell:autobak.sh]]></title>
      <url>http://bysonline.github.io/2016/07/16/autobak.sh/</url>
      <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"># backup</div><div class="line"></div><div class="line">DATE=$(date +%F)</div><div class="line"></div><div class="line"># 判断目录是否存在并且有执行权限</div><div class="line">if [ ! -x &quot;/test/backup&quot; ]</div><div class="line">then</div><div class="line">        mkdir /test/backup</div><div class="line">fi</div><div class="line"></div><div class="line"># 判断文件是否存在</div><div class="line">if [ ! -f &quot;/test/backup/$1.error&quot; ]</div><div class="line">then</div><div class="line">        touch &quot;/test/backup/$1.error&quot;</div><div class="line">fi</div><div class="line"></div><div class="line">/bin/tar -cf /test/backup/$1.$DATE.tar $1 &gt; /dev/null 2&gt;&gt; /test/backup/$1.error</div><div class="line">/bin/gzip /test/backup/$1.$DATE.tar</div><div class="line"></div><div class="line">if [ $? -eq 0 ]</div><div class="line">then</div><div class="line">        echo &quot;$1 backup successfully&quot;</div><div class="line">else</div><div class="line">        echo &quot;ERROR: $1 $DATE backup&quot; &gt;&gt; /test/backup/$1.error</div><div class="line">fi</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[二叉树]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      <content type="html"><![CDATA[<h2 id="二叉树概念"><a href="#二叉树概念" class="headerlink" title="二叉树概念"></a>二叉树概念</h2><ul>
<li>前序遍历（ DLR）也叫做先根遍历，可记做根左右。 前序遍历首先访问根结点然后遍历左子树，最后遍历右子树。在遍历左、右子树时，仍然先访问根结点，然后遍历左子树，最后遍历右子树。  </li>
<li>中序遍历，也叫中根遍历，遍历顺序为 左子树 -根 -右子树。  </li>
<li>后序遍历，也叫后根遍历，遍历顺序为 左子树 -右子树 -根。  </li>
</ul>
<h2 id="同构"><a href="#同构" class="headerlink" title="同构"></a>同构</h2><p>同构指两棵树的结构，包括子树的结构相似，节点的值可以不同。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span></span>&#123;</div><div class="line">    <span class="keyword">char</span> value</div><div class="line">    BinaryTree left</div><div class="line">    BinaryTree right</div><div class="line">&#125;</div><div class="line"></div><div class="line">def g = <span class="keyword">new</span> BinaryTree(value:<span class="string">'G'</span>)</div><div class="line">def f = <span class="keyword">new</span> BinaryTree(value:<span class="string">'F'</span>)</div><div class="line">def e = <span class="keyword">new</span> BinaryTree(value:<span class="string">'E'</span>)</div><div class="line">def d = <span class="keyword">new</span> BinaryTree(value:<span class="string">'D'</span>)</div><div class="line">def c = <span class="keyword">new</span> BinaryTree(value:<span class="string">'C'</span>,left: f,right: g)</div><div class="line">def b = <span class="keyword">new</span> BinaryTree(value:<span class="string">'B'</span>,left: d,right: e)</div><div class="line">def a = <span class="keyword">new</span> BinaryTree(value:<span class="string">'A'</span>,left: b,right: c)</div><div class="line"></div><div class="line">def g1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'g'</span>)</div><div class="line">def f1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'f'</span>)</div><div class="line">def e1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'e'</span>)</div><div class="line">def d1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'d'</span>)</div><div class="line">def c1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'c'</span>,left: f1)</div><div class="line">def b1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'b'</span>,left: d1,right: e1)</div><div class="line">def a1 = <span class="keyword">new</span> BinaryTree(value:<span class="string">'a'</span>,left: b1,right: c1)</div><div class="line"></div><div class="line"></div><div class="line"><span class="function">def <span class="keyword">boolean</span> <span class="title">like</span><span class="params">(BinaryTree a, BinaryTree b)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(a==<span class="keyword">null</span> &amp;&amp; b==<span class="keyword">null</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span></div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="keyword">if</span>(a!=<span class="keyword">null</span> &amp;&amp; b!=<span class="keyword">null</span>)&#123;</div><div class="line">            <span class="keyword">return</span> like(a.left,b.left) &amp; like(a.right,b.right)</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="function">println <span class="title">preorder</span><span class="params">(a)</span></span></div><div class="line">println <span class="title">postorder</span><span class="params">(a)</span></div><div class="line">println <span class="title">middleorder</span><span class="params">(a)</span></div><div class="line">println <span class="title">like</span><span class="params">(a,a1)</span></div></pre></td></tr></table></figure>
<h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><p><strong>Groovy 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function">def String <span class="title">preorder</span><span class="params">(BinaryTree tree)</span></span>&#123;</div><div class="line">		String s = <span class="string">''</span></div><div class="line">		<span class="keyword">if</span>(tree != <span class="keyword">null</span>)&#123;</div><div class="line">				s += tree.value</div><div class="line">				s += preorder(tree.left)</div><div class="line">				s += preorder(tree.right)</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> s</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">def String <span class="title">postorder</span><span class="params">(BinaryTree tree)</span></span>&#123;</div><div class="line">		String s = <span class="string">''</span></div><div class="line">		<span class="keyword">if</span>(tree != <span class="keyword">null</span>)&#123;</div><div class="line">				s += postorder(tree.left)</div><div class="line">				s += postorder(tree.right)</div><div class="line">				s += tree.value</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> s</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">def String <span class="title">middleorder</span><span class="params">(BinaryTree tree)</span></span>&#123;</div><div class="line">		String s = <span class="string">''</span></div><div class="line">		<span class="keyword">if</span>(tree != <span class="keyword">null</span>)&#123;</div><div class="line">				s += middleorder(tree.left)</div><div class="line">				s += tree.value</div><div class="line">				s += middleorder(tree.right)</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> s</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Java 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.rolex.algorithm;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 二叉树遍历</div><div class="line"> * &lt;p/&gt;</div><div class="line"> * User: rolex</div><div class="line"> * Date: 2015/4/12</div><div class="line"> * version: 1.0</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0412</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0412 algo = <span class="keyword">new</span> Algo0412();</div><div class="line">        BinaryTree d = <span class="keyword">new</span> BinaryTree(<span class="string">'D'</span>);</div><div class="line">        BinaryTree e = <span class="keyword">new</span> BinaryTree(<span class="string">'E'</span>);</div><div class="line">        BinaryTree f = <span class="keyword">new</span> BinaryTree(<span class="string">'F'</span>);</div><div class="line">        BinaryTree g = <span class="keyword">new</span> BinaryTree(<span class="string">'G'</span>);</div><div class="line">        BinaryTree c = <span class="keyword">new</span> BinaryTree(<span class="string">'C'</span>, f, g);</div><div class="line">        BinaryTree b = <span class="keyword">new</span> BinaryTree(<span class="string">'B'</span>, d, e);</div><div class="line">        BinaryTree a = <span class="keyword">new</span> BinaryTree(<span class="string">'A'</span>, b, c);</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"preorder : "</span> + algo.preorder(a));</div><div class="line">        System.out.println(<span class="string">"inorder : "</span> + algo.inorder(a));</div><div class="line">        System.out.println(<span class="string">"postorder : "</span> + algo.postorder(a));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">preorder</span><span class="params">(BinaryTree t)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        String s = <span class="string">""</span>;</div><div class="line">        s += t.getValue();</div><div class="line">        s += preorder(t.getLeft());</div><div class="line">        s += preorder(t.getRight());</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">inorder</span><span class="params">(BinaryTree t)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        String s = <span class="string">""</span>;</div><div class="line">        s += inorder(t.getLeft());</div><div class="line">        s += t.getValue();</div><div class="line">        s += inorder(t.getRight());</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">postorder</span><span class="params">(BinaryTree t)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (t == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">        &#125;</div><div class="line">        String s = <span class="string">""</span>;</div><div class="line">        s += postorder(t.getLeft());</div><div class="line">        s += postorder(t.getRight());</div><div class="line">        s += t.getValue();</div><div class="line">        <span class="keyword">return</span> s;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> BinaryTree left;</div><div class="line">    <span class="keyword">private</span> BinaryTree right;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">char</span> value;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BinaryTree</span><span class="params">(<span class="keyword">char</span> c, BinaryTree left, BinaryTree right)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.value = c;</div><div class="line">        <span class="keyword">this</span>.left = left;</div><div class="line">        <span class="keyword">this</span>.right = right;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BinaryTree</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>(c, <span class="keyword">null</span>, <span class="keyword">null</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLeft</span><span class="params">(BinaryTree left)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.left = left;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> BinaryTree <span class="title">getLeft</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> left;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRight</span><span class="params">(BinaryTree right)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.right = right;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> BinaryTree <span class="title">getRight</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> right;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.value = c;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> value;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[快速排序]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F/</url>
      <content type="html"><![CDATA[<p>快速排序算法是将数组中的一个元素作为基准 P，分别从前后两端进行比较交换，小于 P的放在 P前，大于 P的放在 P后。然后从 P分成两个数组进行递归。</p>
<p><strong>Groovy 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">def arr = [<span class="number">23</span>,<span class="number">4</span>,<span class="number">56</span>,<span class="number">67</span>,<span class="number">2</span>,<span class="number">38</span>,<span class="number">90</span>,<span class="number">7</span>] as <span class="keyword">int</span>[]</div><div class="line">def <span class="keyword">int</span>[] quickSort(<span class="keyword">int</span>[] a,<span class="keyword">int</span> low,<span class="keyword">int</span> high)&#123;</div><div class="line">    <span class="keyword">if</span>(a != <span class="keyword">null</span> &amp;&amp; a.length &gt; <span class="number">0</span>)&#123;</div><div class="line">        <span class="keyword">int</span> start = low</div><div class="line">        <span class="keyword">int</span> end = high</div><div class="line">        <span class="keyword">int</span> p = a[start]</div><div class="line">        <span class="keyword">while</span>(start &lt; end)&#123;</div><div class="line">            <span class="keyword">if</span>(a[end] &gt; p)&#123;</div><div class="line">                end--</div><div class="line">                <span class="keyword">continue</span></div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span>(a[start] &lt; p)&#123;</div><div class="line">                start++</div><div class="line">                <span class="keyword">continue</span></div><div class="line">            &#125;</div><div class="line">            swap(a,start,end)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(start-<span class="number">1</span>&gt;low)&#123;</div><div class="line">            quickSort(a,low,start-<span class="number">1</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(start+<span class="number">1</span> &lt;= high)&#123;</div><div class="line">            quickSort(a,start+<span class="number">1</span>,high)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> a</div><div class="line">&#125;</div><div class="line"><span class="function">def <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] a,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">    <span class="keyword">if</span>(a != <span class="keyword">null</span> &amp;&amp; a.length &gt;<span class="number">0</span> &amp;&amp; start&gt;=<span class="number">0</span> &amp;&amp; end &gt;=<span class="number">0</span> &amp;&amp; end &lt;a.length)&#123;</div><div class="line">        <span class="keyword">int</span> temp = a[start]</div><div class="line">        a[start] = a[end]</div><div class="line">        a[end] = temp</div><div class="line">    &#125;</div><div class="line">    println a</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">println <span class="title">quickSort</span><span class="params">(arr,<span class="number">0</span>,arr.length<span class="number">-1</span>)</span></span></div></pre></td></tr></table></figure></p>
<p><strong>Java 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] sort(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> low, <span class="keyword">int</span> high) &#123;</div><div class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"can not sort"</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">int</span> start = low;</div><div class="line">        <span class="keyword">int</span> end = high;</div><div class="line">        <span class="keyword">int</span> p = arr[start];</div><div class="line"></div><div class="line">        <span class="keyword">while</span> (start &lt; end) &#123;</div><div class="line">            <span class="keyword">if</span> (p &lt; arr[end]) &#123;</div><div class="line">                end--;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (p &gt; arr[start]) &#123;</div><div class="line">                start++;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            swap(arr, start, end);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (start - <span class="number">1</span> &gt; low) &#123;</div><div class="line">            sort(arr, low, start - <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (start + <span class="number">1</span> &lt; high) &#123;</div><div class="line">            sort(arr, start + <span class="number">1</span>, high);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> arr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> temp = arr[x];</div><div class="line">        arr[x] = arr[y];</div><div class="line">        arr[y] = temp;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[二分查找]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/</url>
      <content type="html"><![CDATA[<p>二分查找，又叫折半查找，时间复杂度为 O(logn)</p>
<p><strong>groovy 版</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">def s = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>] as <span class="keyword">int</span>[]</div><div class="line"></div><div class="line"><span class="function">def <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span>[] a, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> low = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> high = a.length - <span class="number">1</span></div><div class="line">    <span class="keyword">while</span> (low &lt; high) &#123;</div><div class="line">        <span class="keyword">int</span> middle = (low + high) / <span class="number">2</span> <span class="function">as <span class="keyword">int</span></span></div><div class="line">        <span class="title">if</span> <span class="params">(b &lt; a[middle])</span> &#123;</div><div class="line">            high = middle - <span class="number">1</span></div><div class="line">            <span class="keyword">continue</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (b &gt; a[middle]) &#123;</div><div class="line">            low = middle + <span class="number">1</span></div><div class="line">            <span class="keyword">continue</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (b == a[middle]) &#123;</div><div class="line">            <span class="keyword">return</span> middle</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> -<span class="number">1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function">println <span class="title">binarySearch</span><span class="params">(s, <span class="number">80</span>)</span></span></div></pre></td></tr></table></figure></p>
<p><strong>Java 版</strong></p>
<p>迭代：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearch</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> low = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> high = arr.length - <span class="number">1</span>;</div><div class="line">        <span class="keyword">while</span> (low &lt; high) &#123;</div><div class="line">            <span class="keyword">int</span> middle = (low + high) / <span class="number">2</span>;</div><div class="line">            <span class="keyword">if</span> (x &gt; arr[middle]) &#123;</div><div class="line">                low = middle + <span class="number">1</span>;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (x &lt; arr[middle]) &#123;</div><div class="line">                high = middle - <span class="number">1</span>;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (x == arr[middle]) &#123;</div><div class="line">                <span class="keyword">return</span> middle;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>递归：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinarySearch</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> low = start;</div><div class="line">        <span class="keyword">int</span> high = end;</div><div class="line">        <span class="keyword">int</span> middle = (low + high) / <span class="number">2</span>;</div><div class="line">        <span class="keyword">while</span> (low &lt;= high) &#123;</div><div class="line">            <span class="keyword">if</span> (x == arr[middle]) &#123;</div><div class="line">                <span class="keyword">return</span> middle;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (x &lt; arr[middle]) &#123;</div><div class="line">                <span class="keyword">return</span> search(arr, start, middle - <span class="number">1</span>, x);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (x &gt; arr[middle]) &#123;</div><div class="line">                <span class="keyword">return</span> search(arr, middle + <span class="number">1</span>, high, x);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ubuntu 16.04 安装oracle instant client]]></title>
      <url>http://bysonline.github.io/2016/07/16/Ubuntu-16.04-%E5%AE%89%E8%A3%85-oracle-instant-client/</url>
      <content type="html"><![CDATA[<h3 id="1-安装alien"><a href="#1-安装alien" class="headerlink" title="1. 安装alien"></a>1. 安装alien</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install alien</div></pre></td></tr></table></figure>
<h3 id="2-下载oracle-instant-client"><a href="#2-下载oracle-instant-client" class="headerlink" title="2. 下载oracle instant client"></a>2. 下载oracle instant client</h3><p>oracle-instantclient12.1-basic-12.1.0.2.0-1.x86_64.rpm<br>oracle-instantclient12.1-devel-12.1.0.2.0-1.x86_64.rpm<br>oracle-instantclient12.1-sqlplus-12.1.0.2.0-1.x86_64.rpm</p>
<h3 id="3-安装"><a href="#3-安装" class="headerlink" title="3. 安装"></a>3. 安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo alien -i *.rpm</div></pre></td></tr></table></figure>
<h3 id="4-配置环境变量"><a href="#4-配置环境变量" class="headerlink" title="4. 配置环境变量"></a>4. 配置环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">echo &apos;export ORACLE_HOME=/usr/lib/oracle/12.1/client64&apos; &gt; /etc/profile.d/oracle.sh</div><div class="line">echo &apos;export ORACLE_BASE=/usr/lib/oracle/12.1&apos; &gt;&gt; /etc/profile.d/oracle.sh</div><div class="line">echo &apos;export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH&apos; &gt;&gt; /etc/profile.d/oracle.sh</div><div class="line">echo &apos;export NLS_LANG=AMERICAN_AMERICA.AL32UTF8&apos; &gt;&gt; /etc/profile.d/oracle.sh</div><div class="line">echo &apos;export PATH=$ORACLE_HOME/bin:$PATH&apos; &gt;&gt; /etc/profile.d/oracle.sh</div><div class="line">source /etc/profile</div></pre></td></tr></table></figure>
<h3 id="5-解决上下左右键乱码"><a href="#5-解决上下左右键乱码" class="headerlink" title="5. 解决上下左右键乱码"></a>5. 解决上下左右键乱码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install rlwrap</div><div class="line">echo &quot;alias sqlplus=&apos;rlwrap sqlplus&apos;&quot; &gt;&gt; ~/.bashrc</div><div class="line">source /etc/profile</div></pre></td></tr></table></figure>
<h3 id="6-测试"><a href="#6-测试" class="headerlink" title="6. 测试"></a>6. 测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sqlplus username/passwd@//hostname:post/sid</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java URL下载 zip]]></title>
      <url>http://bysonline.github.io/2016/07/16/Java-URL-%E4%B8%8B%E8%BD%BD-zip-%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</div><div class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">import</span> java.io.OutputStream;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> java.net.URLConnection;</div><div class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</div><div class="line"><span class="keyword">import</span> java.util.zip.ZipInputStream;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CilentTest</span> </span>&#123;</div><div class="line"></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">          String urlString = <span class="string">"http://115.182.16.65:9090/ONOFFIQWS/download/1485356343/151030183903530378126.zip"</span>;</div><div class="line">          String path = <span class="string">"D:\\test.zip"</span>;</div><div class="line">          download(urlString, path);</div><div class="line"></div><div class="line">          unzip(path);</div><div class="line"></div><div class="line">          String savePath = path.substring(<span class="number">0</span>, path.lastIndexOf(File.separator))</div><div class="line">                    + File.separator + <span class="string">"temp"</span>;</div><div class="line">          read(savePath);</div><div class="line"></div><div class="line">          removeDir(<span class="keyword">new</span> File(path));</div><div class="line">          removeDir(<span class="keyword">new</span> File(savePath));</div><div class="line"></div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 下载文件</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> urlString</div><div class="line">     *            文件地址</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            本地存放路径</div><div class="line">     * <span class="doctag">@throws</span> Exception</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">(String urlString, String path)</span></span></div><div class="line">               <span class="keyword">throws</span> Exception &#123;</div><div class="line">          InputStream in = <span class="keyword">null</span>;</div><div class="line">          OutputStream out = <span class="keyword">null</span>;</div><div class="line">          <span class="keyword">int</span> connectTimeout = <span class="number">30</span> * <span class="number">1000</span>; <span class="comment">// 连接超时:30s</span></div><div class="line">          <span class="keyword">int</span> readTimeout = <span class="number">1</span> * <span class="number">1000</span> * <span class="number">1000</span>; <span class="comment">// IO超时:1min</span></div><div class="line">          <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span> * <span class="number">1024</span>]; <span class="comment">// IO缓冲区:8KB</span></div><div class="line"></div><div class="line">          URL url = <span class="keyword">new</span> URL(urlString);</div><div class="line">          File file = <span class="keyword">new</span> File(path);</div><div class="line">          URLConnection conn = url.openConnection();</div><div class="line"></div><div class="line">          conn.setConnectTimeout(connectTimeout);</div><div class="line">          conn.setReadTimeout(readTimeout);</div><div class="line">          conn.connect();</div><div class="line"></div><div class="line">          in = conn.getInputStream();</div><div class="line">          out = <span class="keyword">new</span> FileOutputStream(file);</div><div class="line"></div><div class="line">          <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">               <span class="keyword">int</span> bytes = in.read(buffer);</div><div class="line">               <span class="keyword">if</span> (bytes == -<span class="number">1</span>) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">               &#125;</div><div class="line">               out.write(buffer, <span class="number">0</span>, bytes);</div><div class="line"></div><div class="line">          &#125;</div><div class="line"></div><div class="line">          in.close();</div><div class="line">          out.close();</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 解压缩zip</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            文件路径</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unzip</span><span class="params">(String path)</span> </span>&#123;</div><div class="line">          <span class="keyword">final</span> <span class="keyword">int</span> buffer = <span class="number">2048</span>;</div><div class="line">          <span class="keyword">int</span> count = -<span class="number">1</span>;</div><div class="line">          <span class="keyword">int</span> index = -<span class="number">1</span>;</div><div class="line"></div><div class="line">          <span class="comment">// 解压缩路径 .\temp</span></div><div class="line">          String savePath = path.substring(<span class="number">0</span>, path.lastIndexOf(File.separator))</div><div class="line">                    + File.separator + <span class="string">"temp"</span> + File.separator;</div><div class="line"></div><div class="line">          File temPath = <span class="keyword">new</span> File(savePath);</div><div class="line">          <span class="comment">// 创建temp文件夹</span></div><div class="line">          <span class="keyword">if</span> (!temPath.exists()) &#123;</div><div class="line">               temPath.mkdirs();</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          <span class="keyword">try</span> &#123;</div><div class="line">               BufferedOutputStream bos = <span class="keyword">null</span>;</div><div class="line">               ZipEntry entry = <span class="keyword">null</span>;</div><div class="line">               FileInputStream fis = <span class="keyword">new</span> FileInputStream(path);</div><div class="line">               ZipInputStream zis = <span class="keyword">new</span> ZipInputStream(</div><div class="line">                         <span class="keyword">new</span> BufferedInputStream(fis));</div><div class="line"></div><div class="line">               <span class="keyword">while</span> ((entry = zis.getNextEntry()) != <span class="keyword">null</span>) &#123;</div><div class="line"></div><div class="line">                    String tempFile = entry.getName();</div><div class="line"></div><div class="line">                    index = tempFile.lastIndexOf(<span class="string">"/"</span>);</div><div class="line">                    <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</div><div class="line">                         tempFile = tempFile.substring(index + <span class="number">1</span>);</div><div class="line">                    &#125;</div><div class="line">                    tempFile = savePath + tempFile;</div><div class="line">                    File f = <span class="keyword">new</span> File(tempFile);</div><div class="line">                    f.createNewFile();</div><div class="line"></div><div class="line">                    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(f);</div><div class="line">                    bos = <span class="keyword">new</span> BufferedOutputStream(fos, buffer);</div><div class="line"></div><div class="line">                    <span class="keyword">byte</span> data[] = <span class="keyword">new</span> <span class="keyword">byte</span>[buffer];</div><div class="line">                    <span class="keyword">while</span> ((count = zis.read(data, <span class="number">0</span>, buffer)) != -<span class="number">1</span>) &#123;</div><div class="line">                         bos.write(data, <span class="number">0</span>, count);</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    bos.flush();</div><div class="line">                    bos.close();</div><div class="line">               &#125;</div><div class="line"></div><div class="line">               zis.close();</div><div class="line"></div><div class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">               e.printStackTrace();</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 读目录下所有文件内容</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            文件夹</div><div class="line">     * <span class="doctag">@throws</span> Exception</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(String path)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">          File dir = <span class="keyword">new</span> File(path);</div><div class="line">          <span class="keyword">if</span> (!dir.exists()) &#123;</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"doss not exist"</span>);</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (dir.isDirectory()) &#123;</div><div class="line">               File[] files = dir.listFiles();</div><div class="line">               <span class="keyword">for</span> (File f : files) &#123;</div><div class="line">                    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</div><div class="line">                    String filePath = path + File.separator + f.getName();</div><div class="line">                    BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(filePath));</div><div class="line">                    String s = <span class="keyword">null</span>;</div><div class="line">                    <span class="keyword">while</span> ((s = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">                         sb.append(s);</div><div class="line">                    &#125;</div><div class="line">                    System.out.println(sb.toString());</div><div class="line">                    br.close();</div><div class="line">               &#125;</div><div class="line">          &#125; <span class="keyword">else</span> &#123;</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"dose not a directory"</span>);</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 递归删除文件夹</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            文件夹</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">removeDir</span><span class="params">(File path)</span> </span>&#123;</div><div class="line">          <span class="keyword">if</span> (!path.exists()) &#123;</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"doss not exist"</span>);</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (path.isFile()) &#123;</div><div class="line">               path.delete();</div><div class="line">               <span class="keyword">return</span>;</div><div class="line">          &#125;</div><div class="line">          File[] files = path.listFiles();</div><div class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</div><div class="line">               removeDir(files[i]);</div><div class="line">          &#125;</div><div class="line">          path.delete();</div><div class="line">     &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Java URL下载zip和解压缩]]></title>
      <url>http://bysonline.github.io/2016/07/16/Java-URL-%E4%B8%8B%E8%BD%BD-zip/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</div><div class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">import</span> java.io.OutputStream;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> java.net.URLConnection;</div><div class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</div><div class="line"><span class="keyword">import</span> java.util.zip.ZipInputStream;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CilentTest</span> </span>&#123;</div><div class="line"></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">          String urlString = <span class="string">"http://115.182.16.65:9090/ONOFFIQWS/download/1485356343/151030183903530378126.zip"</span>;</div><div class="line">          String path = <span class="string">"D:\\test.zip"</span>;</div><div class="line">          download(urlString, path);</div><div class="line"></div><div class="line">          unzip(path);</div><div class="line"></div><div class="line">          String savePath = path.substring(<span class="number">0</span>, path.lastIndexOf(File.separator))</div><div class="line">                    + File.separator + <span class="string">"temp"</span>;</div><div class="line">          read(savePath);</div><div class="line"></div><div class="line">          removeDir(<span class="keyword">new</span> File(path));</div><div class="line">          removeDir(<span class="keyword">new</span> File(savePath));</div><div class="line"></div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 下载文件</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> urlString</div><div class="line">     *            文件地址</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            本地存放路径</div><div class="line">     * <span class="doctag">@throws</span> Exception</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">(String urlString, String path)</span></span></div><div class="line">               <span class="keyword">throws</span> Exception &#123;</div><div class="line">          InputStream in = <span class="keyword">null</span>;</div><div class="line">          OutputStream out = <span class="keyword">null</span>;</div><div class="line">          <span class="keyword">int</span> connectTimeout = <span class="number">30</span> * <span class="number">1000</span>; <span class="comment">// 连接超时:30s</span></div><div class="line">          <span class="keyword">int</span> readTimeout = <span class="number">1</span> * <span class="number">1000</span> * <span class="number">1000</span>; <span class="comment">// IO超时:1min</span></div><div class="line">          <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">8</span> * <span class="number">1024</span>]; <span class="comment">// IO缓冲区:8KB</span></div><div class="line"></div><div class="line">          URL url = <span class="keyword">new</span> URL(urlString);</div><div class="line">          File file = <span class="keyword">new</span> File(path);</div><div class="line">          URLConnection conn = url.openConnection();</div><div class="line"></div><div class="line">          conn.setConnectTimeout(connectTimeout);</div><div class="line">          conn.setReadTimeout(readTimeout);</div><div class="line">          conn.connect();</div><div class="line"></div><div class="line">          in = conn.getInputStream();</div><div class="line">          out = <span class="keyword">new</span> FileOutputStream(file);</div><div class="line"></div><div class="line">          <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</div><div class="line">               <span class="keyword">int</span> bytes = in.read(buffer);</div><div class="line">               <span class="keyword">if</span> (bytes == -<span class="number">1</span>) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">               &#125;</div><div class="line">               out.write(buffer, <span class="number">0</span>, bytes);</div><div class="line"></div><div class="line">          &#125;</div><div class="line"></div><div class="line">          in.close();</div><div class="line">          out.close();</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 解压缩zip</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            文件路径</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">unzip</span><span class="params">(String path)</span> </span>&#123;</div><div class="line">          <span class="keyword">final</span> <span class="keyword">int</span> buffer = <span class="number">2048</span>;</div><div class="line">          <span class="keyword">int</span> count = -<span class="number">1</span>;</div><div class="line">          <span class="keyword">int</span> index = -<span class="number">1</span>;</div><div class="line"></div><div class="line">          <span class="comment">// 解压缩路径 .\temp</span></div><div class="line">          String savePath = path.substring(<span class="number">0</span>, path.lastIndexOf(File.separator))</div><div class="line">                    + File.separator + <span class="string">"temp"</span> + File.separator;</div><div class="line"></div><div class="line">          File temPath = <span class="keyword">new</span> File(savePath);</div><div class="line">          <span class="comment">// 创建temp文件夹</span></div><div class="line">          <span class="keyword">if</span> (!temPath.exists()) &#123;</div><div class="line">               temPath.mkdirs();</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          <span class="keyword">try</span> &#123;</div><div class="line">               BufferedOutputStream bos = <span class="keyword">null</span>;</div><div class="line">               ZipEntry entry = <span class="keyword">null</span>;</div><div class="line">               FileInputStream fis = <span class="keyword">new</span> FileInputStream(path);</div><div class="line">               ZipInputStream zis = <span class="keyword">new</span> ZipInputStream(</div><div class="line">                         <span class="keyword">new</span> BufferedInputStream(fis));</div><div class="line"></div><div class="line">               <span class="keyword">while</span> ((entry = zis.getNextEntry()) != <span class="keyword">null</span>) &#123;</div><div class="line"></div><div class="line">                    String tempFile = entry.getName();</div><div class="line"></div><div class="line">                    index = tempFile.lastIndexOf(<span class="string">"/"</span>);</div><div class="line">                    <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</div><div class="line">                         tempFile = tempFile.substring(index + <span class="number">1</span>);</div><div class="line">                    &#125;</div><div class="line">                    tempFile = savePath + tempFile;</div><div class="line">                    File f = <span class="keyword">new</span> File(tempFile);</div><div class="line">                    f.createNewFile();</div><div class="line"></div><div class="line">                    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(f);</div><div class="line">                    bos = <span class="keyword">new</span> BufferedOutputStream(fos, buffer);</div><div class="line"></div><div class="line">                    <span class="keyword">byte</span> data[] = <span class="keyword">new</span> <span class="keyword">byte</span>[buffer];</div><div class="line">                    <span class="keyword">while</span> ((count = zis.read(data, <span class="number">0</span>, buffer)) != -<span class="number">1</span>) &#123;</div><div class="line">                         bos.write(data, <span class="number">0</span>, count);</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    bos.flush();</div><div class="line">                    bos.close();</div><div class="line">               &#125;</div><div class="line"></div><div class="line">               zis.close();</div><div class="line"></div><div class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">               e.printStackTrace();</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 读目录下所有文件内容</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            文件夹</div><div class="line">     * <span class="doctag">@throws</span> Exception</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(String path)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">          File dir = <span class="keyword">new</span> File(path);</div><div class="line">          <span class="keyword">if</span> (!dir.exists()) &#123;</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"doss not exist"</span>);</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (dir.isDirectory()) &#123;</div><div class="line">               File[] files = dir.listFiles();</div><div class="line">               <span class="keyword">for</span> (File f : files) &#123;</div><div class="line">                    StringBuffer sb = <span class="keyword">new</span> StringBuffer();</div><div class="line">                    String filePath = path + File.separator + f.getName();</div><div class="line">                    BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(filePath));</div><div class="line">                    String s = <span class="keyword">null</span>;</div><div class="line">                    <span class="keyword">while</span> ((s = br.readLine()) != <span class="keyword">null</span>) &#123;</div><div class="line">                         sb.append(s);</div><div class="line">                    &#125;</div><div class="line">                    System.out.println(sb.toString());</div><div class="line">                    br.close();</div><div class="line">               &#125;</div><div class="line">          &#125; <span class="keyword">else</span> &#123;</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"dose not a directory"</span>);</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * 递归删除文件夹</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> path</div><div class="line">     *            文件夹</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">removeDir</span><span class="params">(File path)</span> </span>&#123;</div><div class="line">          <span class="keyword">if</span> (!path.exists()) &#123;</div><div class="line">               <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"doss not exist"</span>);</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">if</span> (path.isFile()) &#123;</div><div class="line">               path.delete();</div><div class="line">               <span class="keyword">return</span>;</div><div class="line">          &#125;</div><div class="line">          File[] files = path.listFiles();</div><div class="line">          <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</div><div class="line">               removeDir(files[i]);</div><div class="line">          &#125;</div><div class="line">          path.delete();</div><div class="line">     &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[JAXB 操作 xml]]></title>
      <url>http://bysonline.github.io/2016/07/16/JAXB-%E6%93%8D%E4%BD%9C-xml/</url>
      <content type="html"><![CDATA[<h3 id="使用-XmlRootElement-和-XmlElement-标示根节点对象和属性节点对象"><a href="#使用-XmlRootElement-和-XmlElement-标示根节点对象和属性节点对象" class="headerlink" title="使用 @XmlRootElement 和 @XmlElement 标示根节点对象和属性节点对象"></a>使用 @XmlRootElement 和 @XmlElement 标示根节点对象和属性节点对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@XmlRootElement</span>(name = <span class="string">"DATA"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Data</span> </span>&#123;</div><div class="line"></div><div class="line">    List&lt;DataItem&gt; dataItems;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Data</span><span class="params">()</span> </span>&#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@XmlElement</span>(name = <span class="string">"ITEM"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;DataItem&gt; <span class="title">getDataItems</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> dataItems;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDataItems</span><span class="params">(List&lt;DataItem&gt; dataItems)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.dataItems = dataItems;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="xml-转对象"><a href="#xml-转对象" class="headerlink" title="xml 转对象"></a>xml 转对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Data <span class="title">fromXml</span><span class="params">(String xml)</span></span>&#123;</div><div class="line">    Data data = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        JAXBContext context = JAXBContext.newInstance(Data.class);</div><div class="line">        Unmarshaller unmarshaller = context.createUnmarshaller();</div><div class="line">        data = (Data) unmarshaller.unmarshal(<span class="keyword">new</span> StringReader(xml));</div><div class="line">    &#125; <span class="keyword">catch</span> (JAXBException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> data;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="对象转-xml"><a href="#对象转-xml" class="headerlink" title="对象转 xml"></a>对象转 xml</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">toXml</span><span class="params">(String path)</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        JAXBContext context = JAXBContext.newInstance(Data.class);</div><div class="line">        Marshaller marshaller = context.createMarshaller();</div><div class="line">        marshaller.marshal(fromXml(xml), <span class="keyword">new</span> File(path));</div><div class="line">    &#125; <span class="keyword">catch</span> (JAXBException e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="设置-xml-节点的顺序"><a href="#设置-xml-节点的顺序" class="headerlink" title="设置 xml 节点的顺序"></a>设置 xml 节点的顺序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@XmlType</span>(propOrder = &#123;<span class="string">"orderList"</span>, <span class="string">"basic"</span>, <span class="string">"shareholder"</span>, <span class="string">"person"</span>&#125;)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataItem</span> </span>&#123;</div><div class="line"></div><div class="line">    OrderList orderList;</div><div class="line">    Basic basic;</div><div class="line">    Shareholder shareholder;</div><div class="line">    Person person;</div><div class="line"></div><div class="line">     <span class="comment">//getter and setter</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[多线程下载]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E8%BD%BD/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</div><div class="line"><span class="keyword">import</span> java.net.URL;</div><div class="line"><span class="keyword">import</span> java.net.URLConnection;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MutiThreadDownloadTest</span> </span>&#123;</div><div class="line"></div><div class="line">     <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> args</div><div class="line">     */</div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">          String urlString = <span class="string">"http://www.7-zip.org/a/7z920-x64.msi"</span>;</div><div class="line">          String path = <span class="string">"D:\\7z.msi"</span>;</div><div class="line">          <span class="keyword">try</span> &#123;</div><div class="line">               <span class="keyword">new</span> MutiThreadDownloadTest().new MutiThreadDownload(urlString, path, <span class="number">3</span>).download();</div><div class="line">          &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">               e.printStackTrace();</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="class"><span class="keyword">class</span> <span class="title">MutiThreadDownload</span> </span>&#123;</div><div class="line">          <span class="keyword">private</span> String urlString;<span class="comment">// 下载路径</span></div><div class="line">          <span class="keyword">private</span> String path;<span class="comment">// 文件存储路径</span></div><div class="line">          <span class="keyword">private</span> <span class="keyword">int</span> threadNum;<span class="comment">// 线程数量</span></div><div class="line">          <span class="keyword">private</span> <span class="keyword">int</span> fileSize;<span class="comment">// 文件大小</span></div><div class="line"></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="title">MutiThreadDownload</span><span class="params">(String urlString, String path, <span class="keyword">int</span> threadNum)</span> </span>&#123;</div><div class="line">               <span class="keyword">super</span>();</div><div class="line">               <span class="keyword">this</span>.urlString = urlString;</div><div class="line">               <span class="keyword">this</span>.path = path;</div><div class="line">               <span class="keyword">this</span>.threadNum = threadNum;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">               URL url = <span class="keyword">new</span> URL(urlString);</div><div class="line">               URLConnection conn = url.openConnection();</div><div class="line">               fileSize = conn.getContentLength();<span class="comment">// 获取文件大小</span></div><div class="line">               RandomAccessFile destFile = <span class="keyword">new</span> RandomAccessFile(path, <span class="string">"rw"</span>);<span class="comment">// 创建空文件</span></div><div class="line">               <span class="comment">// 设置下载文件相同大小</span></div><div class="line">               destFile.setLength(fileSize);</div><div class="line">               destFile.close();</div><div class="line">               <span class="comment">// 计算每个线程的下载大小</span></div><div class="line">               <span class="keyword">int</span> sizePerThread = fileSize / threadNum;</div><div class="line">               <span class="comment">// 开启线程</span></div><div class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; threadNum; i++) &#123;</div><div class="line">                    <span class="comment">// 计算每条线程的下载的开始位置</span></div><div class="line">                    <span class="keyword">int</span> startPos = i * sizePerThread;<span class="comment">// 开始位置</span></div><div class="line">                    <span class="keyword">int</span> endPos = sizePerThread * (i + <span class="number">1</span>) - <span class="number">1</span>;<span class="comment">// 结束位置</span></div><div class="line"></div><div class="line">                    <span class="keyword">new</span> DownloadThread(startPos,endPos,urlString,path).start();</div><div class="line">               &#125;</div><div class="line">               destFile.close();</div><div class="line">               conn = <span class="keyword">null</span>;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="class"><span class="keyword">class</span> <span class="title">DownloadThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</div><div class="line">          <span class="comment">// 定义下载的起始点</span></div><div class="line">          <span class="keyword">private</span> <span class="keyword">long</span> startPos;</div><div class="line">          <span class="comment">// 定义下载的结束点</span></div><div class="line">          <span class="keyword">private</span> <span class="keyword">long</span> endPos;</div><div class="line">          <span class="keyword">private</span> String urlString;</div><div class="line">          <span class="keyword">private</span> String path;</div><div class="line"></div><div class="line">          <span class="comment">// 构造器，传入输入流，输出流和下载起始点、结束点</span></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="title">DownloadThread</span><span class="params">(<span class="keyword">long</span> startPos, <span class="keyword">long</span> endPos, String urlString, String path)</span> </span>&#123;</div><div class="line">               <span class="comment">// 输出该线程负责下载的字节位置</span></div><div class="line">               System.out.println(<span class="string">"startPos="</span>+startPos + <span class="string">" - endPos:"</span> + endPos);</div><div class="line">               <span class="keyword">this</span>.startPos = startPos;</div><div class="line">               <span class="keyword">this</span>.endPos = endPos;</div><div class="line">               <span class="keyword">this</span>.urlString = urlString;</div><div class="line">               <span class="keyword">this</span>.path = path;</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">               URL url = <span class="keyword">null</span>;</div><div class="line">               URLConnection conn = <span class="keyword">null</span>;</div><div class="line">               InputStream is = <span class="keyword">null</span>;</div><div class="line">               RandomAccessFile out = <span class="keyword">null</span>;</div><div class="line">               <span class="keyword">try</span> &#123;</div><div class="line">                    url = <span class="keyword">new</span> URL(urlString);</div><div class="line">                    conn = url.openConnection();</div><div class="line">                    is = conn.getInputStream();</div><div class="line">                    <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</div><div class="line">                    <span class="keyword">int</span> hasRead = <span class="number">0</span>;</div><div class="line">                    <span class="comment">// 读取网络数据，并写入本地文件</span></div><div class="line">                    <span class="keyword">int</span> length = <span class="number">0</span>;</div><div class="line">                    out = <span class="keyword">new</span> RandomAccessFile(path, <span class="string">"rw"</span>);</div><div class="line">                    is.skip(<span class="keyword">this</span>.startPos);<span class="comment">//流从什么位置读</span></div><div class="line">                    out.seek(startPos);<span class="comment">//文件从什么位置写</span></div><div class="line"></div><div class="line">                    <span class="comment">// 读取网络数据，并写入本地文件</span></div><div class="line">                    <span class="keyword">while</span> (length &lt; endPos - startPos</div><div class="line">                              &amp;&amp; (hasRead = is.read(buffer)) &gt; <span class="number">0</span>) &#123;</div><div class="line">                         out.write(buffer, <span class="number">0</span>, hasRead);</div><div class="line">                         <span class="comment">// 累计该线程下载的总大小</span></div><div class="line">                         length += hasRead;</div><div class="line">                    &#125;</div><div class="line">                    System.out.println(<span class="string">"线程:"</span> + Thread.currentThread().getId() + <span class="string">"下载完成!"</span>);</div><div class="line">               &#125; <span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">                    ex.printStackTrace();</div><div class="line">               &#125;</div><div class="line">               <span class="comment">// 使用finally块来关闭当前线程的输入流、输出流</span></div><div class="line">               <span class="keyword">finally</span> &#123;</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                         <span class="keyword">if</span> (out != <span class="keyword">null</span>) &#123;</div><div class="line">                              out.close();</div><div class="line">                         &#125;</div><div class="line">                         <span class="keyword">if</span> (is != <span class="keyword">null</span>) &#123;</div><div class="line">                              is.close();</div><div class="line">                         &#125;</div><div class="line">                         <span class="keyword">if</span> (conn != <span class="keyword">null</span>)&#123;</div><div class="line">                              conn = <span class="keyword">null</span>;</div><div class="line">                         &#125;</div><div class="line">                    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">                         ex.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">               &#125;</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[idea 使用 maven 每次更新 pom 不重置 LanguageLevel 和 JavaCompiler 的办法]]></title>
      <url>http://bysonline.github.io/2016/07/16/Idea-%E4%BD%BF%E7%94%A8-maven-%E6%AF%8F%E6%AC%A1%E6%9B%B4%E6%96%B0-pom-%E4%B8%8D%E9%87%8D%E7%BD%AE-LanguageLevel-%E5%92%8C-JavaCompiler-%E7%9A%84%E5%8A%9E%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>在pom.xml中加入</p>
<pre><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.3.2&lt;/version&gt;
            &lt;configuration&gt;
                &lt;source&gt;1.7&lt;/source&gt;
                &lt;target&gt;1.7&lt;/target&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[idea内存溢出解决办法]]></title>
      <url>http://bysonline.github.io/2016/07/16/Idea-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>###1. 使用idea64.exe启动</p>
<p>###2. 修改bin目录下的idea.exe.vmoptions文件<br>    -Xms128m<br>    -Xmx1024m</p>
<p>###3. 添加运行VM参数<br>     -server -XX:PermSize=512M -XX:MaxPermSize=1024m</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[http上传文件原理]]></title>
      <url>http://bysonline.github.io/2016/07/16/Http-%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%8E%9F%E7%90%86/</url>
      <content type="html"><![CDATA[<ol>
<li>通过request.getInputStream()来得到上传的整个post实体的流</li>
<li>用 request.getHeader(“Content-Type”)来取得实体内容的分界字符串</li>
<li>然后根据http协议，分析取得的上传的实体流</li>
<li>把文件部分给筛出来在服务器端保存到磁盘文件中</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hive-0.9.0 安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hive-0.9.0-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>###1. 解压缩<br>    [rolex@node2 hive]$ pwd<br>/usr/hive<br>[rolex@node2 hive]$ tar -zxf hive-0.9.0.tar.gz</p>
<p>###2. 配置环境变量<br>    [rolex@node2 hive]$ sudo echo “HIVE_HOME=/usr/hive/hive-0.9.0”&gt;/etc/profile.d/hive.sh<br>[rolex@node2 hive]$ sudo echo ‘PATH=$PATH:$HIVE_HOME/bin’&gt;&gt;/etc/profile.d/hive.sh<br>    [rolex@node2 hive]$ sudo echo “export HIVE_HOME PATH”&gt;&gt;/etc/profile.d/hive.sh<br>[rolex@node2 hive]$ . /etc/profile</p>
<p>###3. 配置文件<br>    [rolex@node2 conf]$ pwd<br>/usr/hive/hive-0.9.0/conf<br>[rolex@node2 conf]$ cp hive-default.xml.template hive-default.xml<br>    [rolex@node2 conf]$ cp hive-env.sh.template hive-env.sh<br>[rolex@node2 conf]$ cp hive-log4j.properties.template hive-log4j.properties<br>    [rolex@node2 conf]$ cp hive-exec-log4j.properties.template hive-exec-log4j.properties<br>[rolex@node2 conf]$ cp hive-default.xml.template hive-site.xml</p>
<p>###4. 启动<br>    [rolex@node2 bin]$ pwd<br>/usr/hive/hive-0.9.0/bin<br>[rolex@node2 bin]$ ./hive<br>    Logging initialized using configuration in file:/usr/hive/hive-0.9.0/conf/hive-log4j.properties<br>    Hive history file=/tmp/rolex/hive_job_log_rolex_201511061336_165277921.txt<br>    hive&gt;</p>
<p>###5. 测试<br>    hive&gt; show databases;<br>    OK<br>    default<br>    Time taken: 0.101 seconds<br>    hive&gt; CREATE TABLE x (a INT);<br>    OK<br>    Time taken: 0.702 seconds<br>    hive&gt; SELECT * FROM x;<br>    OK<br>    Time taken: 0.283 seconds<br>    hive&gt; DROP TABLE x;<br>    OK<br>    Time taken: 1.059 seconds<br>    hive&gt; exit;</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux ftp 问题汇总]]></title>
      <url>http://bysonline.github.io/2016/07/16/Linux-FTP-%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
      <content type="html"><![CDATA[<p>####虚拟机ftp配置</p>
<p>今天在vmware上装contos，系统装完，可以ping通，但是ftp不通，错误消息如下：</p>
<blockquote>
<p>状态:      尝试连接“ECONNREFUSED - Connection refused by server”失败</p>
</blockquote>
<p>google说可能是端口没开或占用</p>
<p>所以检查一下</p>
<pre><code>#netstat -na --ip
</code></pre><p>21端口果然没有，打开ftp</p>
<pre><code># service vsftpd start
</code></pre><p>再连ftp，错误消息如下：</p>
<blockquote>
<p>命令:      USER root<br>响应:      530 Permission denied.</p>
</blockquote>
<p>用的root用户，vsftp默认关闭root用户，所以打开root用户<br>修改文件 <strong><code>/etc/vsftpd.ftpusers</code></strong> 和 <strong><code>/etc/vsftpd.user_list</code></strong></p>
<blockquote>
<p>响应: 553 Could not create file.<br>错误: 严重文件传输错误</p>
</blockquote>
<p>执行命令</p>
<pre><code>setsebool allow_ftpd_full_access 1
setsebool allow_ftpd_use_cifs 1
setsebool allow_ftpd_use_nfs 1
setsebool ftp_home_dir 1
setsebool httpd_enable_ftp_server 1
setsebool tftp_anon_write 1
service vsftpd restart
</code></pre><p>####vsftp上传文件限制</p>
<blockquote>
<p>553 Could not create file.</p>
</blockquote>
<pre><code>[root@node3 vsftpd]# /usr/sbin/setsebool -P ftp_home_dir 1
[root@node3 vsftpd]# setsebool allow_ftpd_full_access 1
[root@node3 vsftpd]# setsebool allow_ftpd_use_cifs 1
[root@node3 vsftpd]# setsebool allow_ftpd_use_nfs 1
[root@node3 vsftpd]# setsebool -P ftp_home_dir 1
[root@node3 vsftpd]# setsebool httpd_enable_ftp_server 1
[root@node3 vsftpd]# setsebool tftp_anon_write 1
[root@node3 vsftpd]# service vsftpd restart
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hbase shell 操作]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hbase-shell-%E6%93%8D%E4%BD%9C/</url>
      <content type="html"><![CDATA[<p>###COMMAND GROUPS:</p>
<pre><code>Group name: general
Commands: status, version, whoami

Group name: ddl
Commands: alter, alter_async, alter_status, create, describe, disable, disable_all, drop, drop_all, enable, enable_all, exists, is_disabled, is_enabled, list, show_filters

Group name: dml
Commands: count, delete, deleteall, get, get_counter, incr, put, scan, truncate, truncate_preserve

Group name: tools
Commands: assign, balance_switch, balancer, close_region, compact, flush, hlog_roll, major_compact, move, split, unassign, zk_dump

Group name: replication
Commands: add_peer, disable_peer, enable_peer, list_peers, list_replicated_tables, remove_peer, start_replication, stop_replication

Group name: snapshot
Commands: clone_snapshot, delete_snapshot, list_snapshots, restore_snapshot, snapshot

Group name: security
Commands: grant, revoke, user_permission
</code></pre><p>###put : 循环插入记录</p>
<pre><code>hbase(main):061:0&gt;for i in &apos;a&apos;..&apos;z&apos; do for j in &apos;a&apos;..&apos;z&apos; do put &apos;t1&apos;, &quot;row#{i}#{j}&quot;, &quot;F:#{j}&quot;, &quot;#{j}&quot; end end
</code></pre><p>###alter : 修改表结构</p>
<pre><code>hbase(main):061:0&gt;disable &apos;t1&apos;
hbase(main):061:0&gt;alter &apos;t1&apos;,{NAME =&gt; &apos;F&apos;}
hbase(main):061:0&gt;enable &apos;t1&apos;
</code></pre><p>###scan: 扫描前10条记录</p>
<pre><code>hbase(main):061:0&gt;scan &apos;t1&apos;, {LIMIT =&gt; 10}
</code></pre><p>###扫描F:a-F:c的记录</p>
<pre><code>hbase(main):061:0&gt;scan &apos;t1&apos;, {COLUMNS =&gt; [&apos;F:a&apos;,&apos;F:c&apos;]}
</code></pre><p>###扫描行健范围<br>    scan ‘t1’,{STARTROW =&gt; ‘row-aa’, STOPROW =&gt; ‘row-az’}</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hbase 0.94.26 伪分布模式安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hbase-0.94.26-%E4%BC%AA%E5%88%86%E5%B8%83%E6%A8%A1%E5%BC%8F%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>###1. 解压缩<br>    tar -zxvf hbase-0.94.26.tar.gz</p>
<p>###2. 修改配置文件</p>
<p>####hbase-env.sh</p>
<pre><code># The java implementation to use.  Java 1.6 required.
export JAVA_HOME=/usr/java/jdk1.6.0_45/
# Extra Java CLASSPATH elements.  Optional.
export HBASE_CLASSPATH=/user/hadoop/hadoop-1.2.1/conf
# Tell HBase whether it should manage it&apos;s own instance of Zookeeper or not.
export HBASE_MANAGES_ZK=true
</code></pre><p>####hbase-site.xml<br>    <configuration><br>        <property><br>            <name>hbase.rootdir</name><br>            <value>hdfs://localhost:9000/hbase</value><br>          </property><br>        <property><br>            <name>hbase.cluster.distributed</name><br>            <value>true</value><br>          </property><br>           <property><br>            <name>hbase.zookeeper.quorum</name><br>            <value>localhost</value><br>          </property><br>    </configuration></p>
<p>###3. 运行<br>     /usr/hadoop/hadoop-1.2.1/bin<br>     [rolex@node2 bin]$ ./start-all.sh （先运行hdfs）<br>     /usr/hbase/hbase-0.94.27/bin<br>     [rolex@node2 bin]$ ./start-hbase.sh （启动hbase）<br>     [rolex@node2 bin]$ ./local-master-backup.sh start 1  （启动master备份）<br>     [rolex@node2 bin]$ ./local-regionservers.sh start 1  （启动regionserver）</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Bloom Filter]]></title>
      <url>http://bysonline.github.io/2016/07/16/Bloom-Filter/</url>
      <content type="html"><![CDATA[<p>bloom filter是一种节省空间的数据结构。</p>
<p>内在表现为m个比特位的数组。</p>
<p>优势在于大小固定且在初始化时被设置。</p>
<p>一个典型的bloom filter包含add和contrans操作，和set类似。</p>
<pre><code>class BloomFilter&lt;E&gt; {
     public BloomFilter(int m, int k) { ... }
     public void add(E obj) { ... }
     public boolean contains(E obj) { ... }
}
</code></pre><p>初始状态时，Bloom Filter是一个包含m位的位数组，每一位都置为0。</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/2.png" alt="1"></p>
<p>对于任意元素x，bloom filter将其使用hash函数计算k个索引，存放在数组中，每个位置的值为1。</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/3.png" alt="2"></p>
<p>判断一个元素y是否属于集合时，对y进行k次hash函数计算，如果所有索引位置在数组中的值都为1，则y属于这个集合。如果有任意个索引位置的值为0，则y不属于这个集合。</p>
<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/4.png" alt="1"></p>
<p>增加元素到bloom filter中不会改变其大小，只会改变误报率。</p>
<p>误报率的近似值为0.7*(m/n)</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hadoop 2.6.2 安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hadoop-2.6.2-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>###1. 下载<br><a href=""></a></p>
<p>###2. 解压缩</p>
<blockquote>
<p>tar -zxf hadoop-2.6.2.tar.gz</p>
<p>###3. 修改配置文件<br>vi ./etc/hadoop/core-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><blockquote>
<p>vi ./etc/hadoop/hdfs-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><blockquote>
<p>vi ./etc/hadoop/mapred-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><blockquote>
<p>vi ./etc/hadoop/yarn-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>###4. 设置互信</p>
<blockquote>
<p>ssh-keygen -t dsa -P ‘’ -f ~/.ssh/id_dsa<br>cat ~/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys<br>chmod 0600 ~/.ssh/authorized_keys</p>
<p>###5. 格式化namenode<br>./bin/hdfs namenode -format</p>
</blockquote>
<p>###6. 启动yarn</p>
<blockquote>
<p>./sbin/start-yarn.sh</p>
</blockquote>
<p>###7. 启动hdfs</p>
<blockquote>
<p>./sbin/start-dfs.sh</p>
</blockquote>
<p>###8. 执行wordcount</p>
<blockquote>
<p>./bin/hdfs dfs -mkdir /user<br>./bin/hdfs dfs -mkdir /user/rolex<br>./bin/hdfs dfs -mkdir /user/rolex/input<br>./bin/hdfs dfs -put ./NOTICE.txt /user/rolex/input/  </p>
<p>./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.6.2.jar wordcount /user/rolex/input/NOTICE.txt /user/rolex/output/</p>
<p>./bin/hdfs dfs -cat /user/rolex/output/part-r-00000</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hbase-0.98.17-hadoop2 安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hbase-0.98.17-hadoop2-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>###1. 下载解压</p>
<pre><code>tar -zxf hbase-0.98.17-hadoop2-bin.tar.gz
</code></pre><p>###2. 修改配置</p>
<p>####2.1 hbase-env.sh</p>
<pre><code>export JAVA_HOME=/usr/java/jdk1.6.0_45
</code></pre><p>####2.2 hbase-site.xml</p>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;hbase.rootdir&lt;/name&gt;
        &lt;value&gt;hdfs://node1:8020/hbase&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hbase.master&lt;/name&gt;
        &lt;value&gt;hdfs://node1:60000/hbase&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hbase.cluster.distributed&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;
        &lt;value&gt;node1&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>####3. 检查jar包</p>
<p>检查/usr/hbase/hbase-0.98.17-hadoop2/lib下hadoopjar包的版本是否和安装的hadoop一致。如不一致需要将$HADOOP_HOME/share/hadoop下的hadoop*.jar拷贝到$HBASE_HOME/lib下。</p>
<pre><code>find $HADOOP_HOME/share/hadoop -name &quot;hadoop*.jar&quot; | xargs -i cp {} $HABASE_HOME/lib
</code></pre><p>###4. 格式化namenode并删除原有数据信息（可选）</p>
<blockquote>
<p>如之前装过其他版本hadoop或hbase，建议执行该步操作</p>
</blockquote>
<p>###5. 启动</p>
<pre><code>./start-hbase.sh

./local-regionservers.sh start 1

./local-master-backup.sh start 1

./hbase shell
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[编译 hadoop-1.2.1 eclipse 插件]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E7%BC%96%E8%AF%91-hadoop-1.2.1-eclipse-%E6%8F%92%E4%BB%B6/</url>
      <content type="html"><![CDATA[<h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p>需要安装 ant 环境，Ubuntu 默认已经安装了 ant ，如果没有，执行下面命令安装。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install ant</div></pre></td></tr></table></figure></p>
<h3 id="1-1-下载和解压"><a href="#1-1-下载和解压" class="headerlink" title="1.1 下载和解压"></a>1.1 下载和解压</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget https://archive.apache.org/dist/hadoop/common/hadoop-1.2.1/hadoop-1.2.1.tar.gz</div><div class="line">tar -zxf hadoop-1.2.1.tar.gz</div></pre></td></tr></table></figure>
<h3 id="2-修改配置文件"><a href="#2-修改配置文件" class="headerlink" title="2. 修改配置文件"></a>2. 修改配置文件</h3><h4 id="2-1-hadoop-1-2-1-src-contrib-eclipse-plugin-build-xml"><a href="#2-1-hadoop-1-2-1-src-contrib-eclipse-plugin-build-xml" class="headerlink" title="2.1 hadoop-1.2.1\src\contrib\eclipse-plugin\build.xml"></a>2.1 <strong>hadoop-1.2.1\src\contrib\eclipse-plugin\build.xml</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</div><div class="line"></div><div class="line">&lt;!--</div><div class="line">   Licensed to the Apache Software Foundation (ASF) under one or more</div><div class="line">   contributor license agreements.  See the NOTICE file distributed with</div><div class="line">   this work for additional information regarding copyright ownership.</div><div class="line">   The ASF licenses this file to You under the Apache License, Version 2.0</div><div class="line">   (the &quot;License&quot;); you may not use this file except in compliance with</div><div class="line">   the License.  You may obtain a copy of the License at</div><div class="line"></div><div class="line">       http://www.apache.org/licenses/LICENSE-2.0</div><div class="line"></div><div class="line">   Unless required by applicable law or agreed to in writing, software</div><div class="line">   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</div><div class="line">   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class="line">   See the License for the specific language governing permissions and</div><div class="line">   limitations under the License.</div><div class="line">--&gt;</div><div class="line"></div><div class="line">&lt;project default=&quot;jar&quot; name=&quot;eclipse-plugin&quot;&gt;</div><div class="line"></div><div class="line">  &lt;import file=&quot;../build-contrib.xml&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;path id=&quot;eclipse-sdk-jars&quot;&gt;</div><div class="line">    &lt;fileset dir=&quot;$&#123;eclipse.home&#125;/plugins/&quot;&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.ui*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.jdt*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.core*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.equinox*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.debug*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.osgi*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.swt*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;org.eclipse.jface*.jar&quot;/&gt;</div><div class="line"></div><div class="line">      &lt;include name=&quot;org.eclipse.team.cvs.ssh2*.jar&quot;/&gt;</div><div class="line">      &lt;include name=&quot;com.jcraft.jsch*.jar&quot;/&gt;</div><div class="line">    &lt;/fileset&gt;</div><div class="line">  &lt;/path&gt;</div><div class="line"></div><div class="line">  &lt;!-- Override classpath to include Eclipse SDK jars --&gt;</div><div class="line">  &lt;path id=&quot;classpath&quot;&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.classes&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build/classes&quot;/&gt;</div><div class="line">    &lt;path refid=&quot;eclipse-sdk-jars&quot;/&gt;</div><div class="line">     &lt;fileset dir=&quot;$&#123;hadoop.root&#125;/&quot;&gt;</div><div class="line">      &lt;include name=&quot;*.jar&quot;/&gt;</div><div class="line">&lt;/fileset&gt;</div><div class="line">  &lt;/path&gt;</div><div class="line"></div><div class="line">  &lt;!-- Skip building if eclipse.home is unset. --&gt;</div><div class="line">  &lt;target name=&quot;check-contrib&quot; unless=&quot;eclipse.home&quot;&gt;</div><div class="line">    &lt;property name=&quot;skip.contrib&quot; value=&quot;yes&quot;/&gt;</div><div class="line">    &lt;echo message=&quot;eclipse.home unset: skipping eclipse plugin&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">&lt;target name=&quot;compile&quot; depends=&quot;init, ivy-retrieve-common&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;javac</div><div class="line">     encoding=&quot;$&#123;build.encoding&#125;&quot;</div><div class="line">     srcdir=&quot;$&#123;src.dir&#125;&quot;</div><div class="line">     includes=&quot;**/*.java&quot;</div><div class="line">     destdir=&quot;$&#123;build.classes&#125;&quot;</div><div class="line">     debug=&quot;$&#123;javac.debug&#125;&quot;</div><div class="line">     deprecation=&quot;$&#123;javac.deprecation&#125;&quot;&gt;</div><div class="line">     &lt;classpath refid=&quot;classpath&quot;/&gt;</div><div class="line">    &lt;/javac&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- Override jar target to specify manifest --&gt;</div><div class="line">  &lt;target name=&quot;jar&quot; depends=&quot;compile&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.dir&#125;/lib&quot;/&gt;</div><div class="line">     &lt;!--</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/build/hadoop-core-$&#123;version&#125;.jar&quot; tofile=&quot;$&#123;build.dir&#125;/lib/hadoop-core.jar&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/build/ivy/lib/Hadoop/common/commons-cli-$&#123;commons-cli.version&#125;.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;--&gt;</div><div class="line">     &lt;copy file=&quot;$&#123;hadoop.root&#125;/hadoop-core-$&#123;version&#125;.jar&quot; tofile=&quot;$&#123;build.dir&#125;/lib/hadoop-core.jar&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/lib/commons-cli-1.2.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/lib/commons-lang-2.4.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/lib/commons-configuration-1.6.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/lib/jackson-mapper-asl-1.8.8.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/lib/jackson-core-asl-1.8.8.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;copy file=&quot;$&#123;hadoop.root&#125;/lib/commons-httpclient-3.0.1.jar&quot;  todir=&quot;$&#123;build.dir&#125;/lib&quot; verbose=&quot;true&quot;/&gt;</div><div class="line">    &lt;jar</div><div class="line">      jarfile=&quot;$&#123;build.dir&#125;/hadoop-$&#123;name&#125;-$&#123;version&#125;.jar&quot;</div><div class="line">      manifest=&quot;$&#123;root&#125;/META-INF/MANIFEST.MF&quot;&gt;</div><div class="line">      &lt;fileset dir=&quot;$&#123;build.dir&#125;&quot; includes=&quot;classes/ lib/&quot;/&gt;</div><div class="line">      &lt;fileset dir=&quot;$&#123;root&#125;&quot; includes=&quot;resources/ plugin.xml&quot;/&gt;</div><div class="line">    &lt;/jar&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<h4 id="2-2-hadoop-1-2-1-src-contrib-build-contrib-xml"><a href="#2-2-hadoop-1-2-1-src-contrib-build-contrib-xml" class="headerlink" title="2.2 hadoop-1.2.1\src\contrib\build-contrib.xml"></a>2.2 <strong>hadoop-1.2.1\src\contrib\build-contrib.xml</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class="line"></div><div class="line">&lt;!--</div><div class="line">   Licensed to the Apache Software Foundation (ASF) under one or more</div><div class="line">   contributor license agreements.  See the NOTICE file distributed with</div><div class="line">   this work for additional information regarding copyright ownership.</div><div class="line">   The ASF licenses this file to You under the Apache License, Version 2.0</div><div class="line">   (the &quot;License&quot;); you may not use this file except in compliance with</div><div class="line">   the License.  You may obtain a copy of the License at</div><div class="line"></div><div class="line">       http://www.apache.org/licenses/LICENSE-2.0</div><div class="line"></div><div class="line">   Unless required by applicable law or agreed to in writing, software</div><div class="line">   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</div><div class="line">   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class="line">   See the License for the specific language governing permissions and</div><div class="line">   limitations under the License.</div><div class="line">--&gt;</div><div class="line"></div><div class="line">&lt;!-- Imported by contrib/*/build.xml files to share generic targets. --&gt;</div><div class="line"></div><div class="line">&lt;project name=&quot;hadoopbuildcontrib&quot; xmlns:ivy=&quot;antlib:org.apache.ivy.ant&quot;&gt;</div><div class="line"></div><div class="line">  &lt;property name=&quot;name&quot; value=&quot;$&#123;ant.project.name&#125;&quot;/&gt;</div><div class="line">  &lt;property name=&quot;root&quot; value=&quot;$&#123;basedir&#125;&quot;/&gt;</div><div class="line">  &lt;property name=&quot;version&quot; value=&quot;1.2.1&quot;/&gt;</div><div class="line">  &lt;property name=&quot;ivy.version&quot; value=&quot;2.1.0&quot;/&gt;</div><div class="line">  &lt;property name=&quot;eclipse.home&quot; location=&quot;D:/Program Files/eclipse-jee-indigo-SR2-win32-x86_64&quot;/&gt;</div><div class="line">  &lt;property name=&quot;hadoop.root&quot; location=&quot;D:/hadoop/hadoop-1.2.1&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;!-- Load all the default properties, and any the user wants    --&gt;</div><div class="line">  &lt;!-- to contribute (without having to type -D or edit this file --&gt;</div><div class="line">  &lt;property file=&quot;$&#123;user.home&#125;/$&#123;name&#125;.build.properties&quot; /&gt;</div><div class="line">  &lt;property file=&quot;$&#123;root&#125;/build.properties&quot; /&gt;</div><div class="line">  &lt;property file=&quot;$&#123;hadoop.root&#125;/build.properties&quot; /&gt;</div><div class="line"></div><div class="line">  &lt;property name=&quot;src.dir&quot;  location=&quot;$&#123;root&#125;/src/java&quot;/&gt;</div><div class="line">  &lt;property name=&quot;src.test&quot; location=&quot;$&#123;root&#125;/src/test&quot;/&gt;</div><div class="line">  &lt;property name=&quot;src.test.data&quot; location=&quot;$&#123;root&#125;/src/test/data&quot;/&gt;</div><div class="line">  &lt;!-- Property added for contrib system tests --&gt;</div><div class="line">  &lt;property name=&quot;build-fi.dir&quot; location=&quot;$&#123;hadoop.root&#125;/build-fi&quot;/&gt;</div><div class="line">  &lt;property name=&quot;system-test-build-dir&quot; location=&quot;$&#123;build-fi.dir&#125;/system&quot;/&gt;</div><div class="line">  &lt;property name=&quot;src.test.system&quot; location=&quot;$&#123;root&#125;/src/test/system&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;property name=&quot;src.examples&quot; location=&quot;$&#123;root&#125;/src/examples&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;available file=&quot;$&#123;src.examples&#125;&quot; type=&quot;dir&quot; property=&quot;examples.available&quot;/&gt;</div><div class="line">  &lt;available file=&quot;$&#123;src.test&#125;&quot; type=&quot;dir&quot; property=&quot;test.available&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;!-- Property added for contrib system tests --&gt;</div><div class="line">  &lt;available file=&quot;$&#123;src.test.system&#125;&quot; type=&quot;dir&quot;</div><div class="line">      property=&quot;test.system.available&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;property name=&quot;conf.dir&quot; location=&quot;$&#123;hadoop.root&#125;/conf&quot;/&gt;</div><div class="line">  &lt;property name=&quot;test.junit.output.format&quot; value=&quot;plain&quot;/&gt;</div><div class="line">  &lt;property name=&quot;test.output&quot; value=&quot;no&quot;/&gt;</div><div class="line">  &lt;property name=&quot;test.timeout&quot; value=&quot;900000&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.contrib.dir&quot; location=&quot;$&#123;hadoop.root&#125;/build/contrib&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.dir&quot; location=&quot;$&#123;hadoop.root&#125;/build/contrib/$&#123;name&#125;&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.classes&quot; location=&quot;$&#123;build.dir&#125;/classes&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.test&quot; location=&quot;$&#123;build.dir&#125;/test&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.examples&quot; location=&quot;$&#123;build.dir&#125;/examples&quot;/&gt;</div><div class="line">  &lt;property name=&quot;hadoop.log.dir&quot; location=&quot;$&#123;build.dir&#125;/test/logs&quot;/&gt;</div><div class="line">  &lt;!-- all jars together --&gt;</div><div class="line">  &lt;property name=&quot;javac.deprecation&quot; value=&quot;off&quot;/&gt;</div><div class="line">  &lt;property name=&quot;javac.debug&quot; value=&quot;on&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.ivy.lib.dir&quot; value=&quot;$&#123;hadoop.root&#125;/build/ivy/lib&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;property name=&quot;javadoc.link&quot;</div><div class="line">            value=&quot;http://java.sun.com/j2se/1.4/docs/api/&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;property name=&quot;build.encoding&quot; value=&quot;ISO-8859-1&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;fileset id=&quot;lib.jars&quot; dir=&quot;$&#123;root&#125;&quot; includes=&quot;lib/*.jar&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;!-- Property added for contrib system tests --&gt;</div><div class="line">  &lt;property name=&quot;build.test.system&quot; location=&quot;$&#123;build.dir&#125;/system&quot;/&gt;</div><div class="line">  &lt;property name=&quot;build.system.classes&quot;</div><div class="line">      location=&quot;$&#123;build.test.system&#125;/classes&quot;/&gt;</div><div class="line"></div><div class="line">   &lt;!-- IVY properties set here --&gt;</div><div class="line">  &lt;property name=&quot;ivy.dir&quot; location=&quot;ivy&quot; /&gt;</div><div class="line">  &lt;!-- loglevel take values like default|download-only|quiet --&gt;</div><div class="line">  &lt;property name=&quot;loglevel&quot; value=&quot;quiet&quot;/&gt;</div><div class="line">  &lt;property name=&quot;ivysettings.xml&quot; location=&quot;$&#123;hadoop.root&#125;/ivy/ivysettings.xml&quot;/&gt;</div><div class="line">  &lt;loadproperties srcfile=&quot;$&#123;ivy.dir&#125;/libraries.properties&quot;/&gt;</div><div class="line">  &lt;loadproperties srcfile=&quot;$&#123;hadoop.root&#125;/ivy/libraries.properties&quot;/&gt;</div><div class="line">  &lt;property name=&quot;ivy.jar&quot; location=&quot;$&#123;hadoop.root&#125;/ivy/ivy-$&#123;ivy.version&#125;.jar&quot;/&gt;</div><div class="line">  &lt;property name=&quot;ivy_repo_url&quot;</div><div class="line">     value=&quot;http://repo2.maven.org/maven2/org/apache/ivy/ivy/$&#123;ivy.version&#125;/ivy-$&#123;ivy.version&#125;.jar&quot; /&gt;</div><div class="line">  &lt;property name=&quot;build.dir&quot; location=&quot;build&quot; /&gt;</div><div class="line">  &lt;property name=&quot;build.ivy.dir&quot; location=&quot;$&#123;build.dir&#125;/ivy&quot; /&gt;</div><div class="line">  &lt;property name=&quot;build.ivy.lib.dir&quot; location=&quot;$&#123;build.ivy.dir&#125;/lib&quot; /&gt;</div><div class="line">  &lt;property name=&quot;build.ivy.report.dir&quot; location=&quot;$&#123;build.ivy.dir&#125;/report&quot; /&gt;</div><div class="line">  &lt;property name=&quot;common.ivy.lib.dir&quot; location=&quot;$&#123;build.ivy.lib.dir&#125;/$&#123;ant.project.name&#125;/common&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;!--this is the naming policy for artifacts we want pulled down--&gt;</div><div class="line">  &lt;property name=&quot;ivy.artifact.retrieve.pattern&quot;</div><div class="line">                   value=&quot;$&#123;ant.project.name&#125;/[conf]/[artifact]-[revision].[ext]&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;!-- the normal classpath --&gt;</div><div class="line">  &lt;path id=&quot;contrib-classpath&quot;&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.classes&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build/tools&quot;/&gt;</div><div class="line">    &lt;fileset refid=&quot;lib.jars&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build/classes&quot;/&gt;</div><div class="line">    &lt;fileset dir=&quot;$&#123;hadoop.root&#125;/lib&quot;&gt;</div><div class="line">      &lt;include name=&quot;**/*.jar&quot; /&gt;</div><div class="line">    &lt;/fileset&gt;</div><div class="line">    &lt;path refid=&quot;$&#123;ant.project.name&#125;.common-classpath&quot;/&gt;</div><div class="line">    &lt;pathelement path=&quot;$&#123;clover.jar&#125;&quot;/&gt;</div><div class="line">  &lt;/path&gt;</div><div class="line"></div><div class="line">  &lt;!-- the unit test classpath --&gt;</div><div class="line">  &lt;path id=&quot;test.classpath&quot;&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.test&#125;&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build/test/classes&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/src/contrib/test&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;conf.dir&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.examples&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build/examples&quot;/&gt;</div><div class="line">    &lt;path refid=&quot;contrib-classpath&quot;/&gt;</div><div class="line">  &lt;/path&gt;</div><div class="line"></div><div class="line">  &lt;!-- The system test classpath --&gt;</div><div class="line">  &lt;path id=&quot;test.system.classpath&quot;&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/src/contrib/$&#123;name&#125;/src/test/system&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.test.system&#125;&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.test.system&#125;/classes&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;build.examples&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build-fi/system/classes&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build-fi/system/test/classes&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build-fi&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build-fi/tools&quot; /&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.home&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.conf.dir&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.conf.dir.deployed&#125;&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build/examples&quot;/&gt;</div><div class="line">    &lt;pathelement location=&quot;$&#123;hadoop.root&#125;/build-fi/test/classes&quot; /&gt;</div><div class="line">    &lt;path refid=&quot;contrib-classpath&quot;/&gt;</div><div class="line">    &lt;fileset dir=&quot;$&#123;hadoop.root&#125;/src/test/lib&quot;&gt;</div><div class="line">      &lt;include name=&quot;**/*.jar&quot; /&gt;</div><div class="line">      &lt;exclude name=&quot;**/excluded/&quot; /&gt;</div><div class="line">    &lt;/fileset&gt;</div><div class="line">    &lt;fileset dir=&quot;$&#123;hadoop.root&#125;/build-fi/system&quot;&gt;</div><div class="line">       &lt;include name=&quot;**/*.jar&quot; /&gt;</div><div class="line">       &lt;exclude name=&quot;**/excluded/&quot; /&gt;</div><div class="line">     &lt;/fileset&gt;</div><div class="line">    &lt;fileset dir=&quot;$&#123;hadoop.root&#125;/build-fi/test/testjar&quot;&gt;</div><div class="line">      &lt;include name=&quot;**/*.jar&quot; /&gt;</div><div class="line">      &lt;exclude name=&quot;**/excluded/&quot; /&gt;</div><div class="line">    &lt;/fileset&gt;</div><div class="line">    &lt;fileset dir=&quot;$&#123;hadoop.root&#125;/build/contrib/$&#123;name&#125;&quot;&gt;</div><div class="line">      &lt;include name=&quot;**/*.jar&quot; /&gt;</div><div class="line">      &lt;exclude name=&quot;**/excluded/&quot; /&gt;</div><div class="line">    &lt;/fileset&gt;</div><div class="line">  &lt;/path&gt;</div><div class="line"></div><div class="line">  &lt;!-- to be overridden by sub-projects --&gt;</div><div class="line">  &lt;target name=&quot;check-contrib&quot;/&gt;</div><div class="line">  &lt;target name=&quot;init-contrib&quot;/&gt;</div><div class="line"></div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;!-- Stuff needed by all targets                            --&gt;</div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;target name=&quot;init&quot; depends=&quot;check-contrib&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.dir&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.classes&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.test&#125;&quot;/&gt;</div><div class="line">    &lt;!-- The below two tags  added for contrib system tests --&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.test.system&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.system.classes&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;build.examples&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;hadoop.log.dir&#125;&quot;/&gt;</div><div class="line">    &lt;antcall target=&quot;init-contrib&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;!-- Compile a Hadoop contrib&apos;s files                       --&gt;</div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;target name=&quot;compile&quot; depends=&quot;init, ivy-retrieve-common&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;javac</div><div class="line">     encoding=&quot;$&#123;build.encoding&#125;&quot;</div><div class="line">     srcdir=&quot;$&#123;src.dir&#125;&quot;</div><div class="line">     includes=&quot;**/*.java&quot;</div><div class="line">     destdir=&quot;$&#123;build.classes&#125;&quot;</div><div class="line">     debug=&quot;$&#123;javac.debug&#125;&quot;</div><div class="line">     deprecation=&quot;$&#123;javac.deprecation&#125;&quot;&gt;</div><div class="line">     &lt;classpath refid=&quot;contrib-classpath&quot;/&gt;</div><div class="line">    &lt;/javac&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;!-- ======================================================= --&gt;</div><div class="line">  &lt;!-- Compile a Hadoop contrib&apos;s example files (if available) --&gt;</div><div class="line">  &lt;!-- ======================================================= --&gt;</div><div class="line">  &lt;target name=&quot;compile-examples&quot; depends=&quot;compile&quot; if=&quot;examples.available&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;javac</div><div class="line">     encoding=&quot;$&#123;build.encoding&#125;&quot;</div><div class="line">     srcdir=&quot;$&#123;src.examples&#125;&quot;</div><div class="line">     includes=&quot;**/*.java&quot;</div><div class="line">     destdir=&quot;$&#123;build.examples&#125;&quot;</div><div class="line">     debug=&quot;$&#123;javac.debug&#125;&quot;&gt;</div><div class="line">     &lt;classpath refid=&quot;contrib-classpath&quot;/&gt;</div><div class="line">    &lt;/javac&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;!-- Compile test code                                                  --&gt;</div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;target name=&quot;compile-test&quot; depends=&quot;compile-examples&quot; if=&quot;test.available&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;javac</div><div class="line">     encoding=&quot;$&#123;build.encoding&#125;&quot;</div><div class="line">     srcdir=&quot;$&#123;src.test&#125;&quot;</div><div class="line">     includes=&quot;**/*.java&quot;</div><div class="line">     excludes=&quot;system/**/*.java&quot;</div><div class="line">     destdir=&quot;$&#123;build.test&#125;&quot;</div><div class="line">     debug=&quot;$&#123;javac.debug&#125;&quot;&gt;</div><div class="line">    &lt;classpath refid=&quot;test.classpath&quot;/&gt;</div><div class="line">    &lt;/javac&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;!-- Compile system test code                                           --&gt;</div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;target name=&quot;compile-test-system&quot; depends=&quot;compile-examples&quot;</div><div class="line">     if=&quot;test.system.available&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;javac</div><div class="line">       encoding=&quot;$&#123;build.encoding&#125;&quot;</div><div class="line">       srcdir=&quot;$&#123;src.test.system&#125;&quot;</div><div class="line">       includes=&quot;**/*.java&quot;</div><div class="line">       destdir=&quot;$&#123;build.system.classes&#125;&quot;</div><div class="line">       debug=&quot;$&#123;javac.debug&#125;&quot;&gt;</div><div class="line">      &lt;classpath refid=&quot;test.system.classpath&quot;/&gt;</div><div class="line">    &lt;/javac&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;!-- Make a Hadoop contrib&apos;s jar                            --&gt;</div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;target name=&quot;jar&quot; depends=&quot;compile&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;jar</div><div class="line">      jarfile=&quot;$&#123;build.dir&#125;/hadoop-$&#123;name&#125;-$&#123;version&#125;.jar&quot;</div><div class="line">      basedir=&quot;$&#123;build.classes&#125;&quot;     </div><div class="line">    /&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;!-- Make a Hadoop contrib&apos;s examples jar                   --&gt;</div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;target name=&quot;jar-examples&quot; depends=&quot;compile-examples&quot;</div><div class="line">          if=&quot;examples.available&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;jar jarfile=&quot;$&#123;build.dir&#125;/hadoop-$&#123;name&#125;-examples-$&#123;version&#125;.jar&quot;&gt;</div><div class="line">      &lt;fileset dir=&quot;$&#123;build.classes&#125;&quot;&gt;</div><div class="line">      &lt;/fileset&gt;</div><div class="line">      &lt;fileset dir=&quot;$&#123;build.examples&#125;&quot;&gt;</div><div class="line">      &lt;/fileset&gt;</div><div class="line">    &lt;/jar&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;!-- Package a Hadoop contrib                               --&gt;</div><div class="line">  &lt;!-- ====================================================== --&gt;</div><div class="line">  &lt;target name=&quot;package&quot; depends=&quot;jar, jar-examples&quot; unless=&quot;skip.contrib&quot;&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;dist.dir&#125;/contrib/$&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;copy todir=&quot;$&#123;dist.dir&#125;/contrib/$&#123;name&#125;&quot; includeEmptyDirs=&quot;false&quot; flatten=&quot;true&quot;&gt;</div><div class="line">      &lt;fileset dir=&quot;$&#123;build.dir&#125;&quot;&gt;</div><div class="line">        &lt;include name=&quot;hadoop-$&#123;name&#125;-$&#123;version&#125;.jar&quot; /&gt;</div><div class="line">      &lt;/fileset&gt;</div><div class="line">    &lt;/copy&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;!-- Run unit tests                                                     --&gt;</div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;target name=&quot;test&quot; depends=&quot;compile-test, compile&quot; if=&quot;test.available&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;delete dir=&quot;$&#123;hadoop.log.dir&#125;&quot;/&gt;</div><div class="line">    &lt;mkdir dir=&quot;$&#123;hadoop.log.dir&#125;&quot;/&gt;</div><div class="line">    &lt;junit</div><div class="line">      printsummary=&quot;yes&quot; showoutput=&quot;$&#123;test.output&#125;&quot;</div><div class="line">      haltonfailure=&quot;no&quot; fork=&quot;yes&quot; maxmemory=&quot;512m&quot;</div><div class="line">      errorProperty=&quot;tests.failed&quot; failureProperty=&quot;tests.failed&quot;</div><div class="line">      timeout=&quot;$&#123;test.timeout&#125;&quot;&gt;</div><div class="line"></div><div class="line">      &lt;sysproperty key=&quot;test.build.data&quot; value=&quot;$&#123;build.test&#125;/data&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;build.test&quot; value=&quot;$&#123;build.test&#125;&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;src.test.data&quot; value=&quot;$&#123;src.test.data&#125;&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;contrib.name&quot; value=&quot;$&#123;name&#125;&quot;/&gt;</div><div class="line"></div><div class="line">      &lt;!-- requires fork=yes for:</div><div class="line">        relative File paths to use the specified user.dir</div><div class="line">        classpath to use build/contrib/*.jar</div><div class="line">      --&gt;</div><div class="line">      &lt;sysproperty key=&quot;user.dir&quot; value=&quot;$&#123;build.test&#125;/data&quot;/&gt;</div><div class="line"></div><div class="line">      &lt;sysproperty key=&quot;fs.default.name&quot; value=&quot;$&#123;fs.default.name&#125;&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;hadoop.test.localoutputfile&quot; value=&quot;$&#123;hadoop.test.localoutputfile&#125;&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;hadoop.log.dir&quot; value=&quot;$&#123;hadoop.log.dir&#125;&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;taskcontroller-path&quot; value=&quot;$&#123;taskcontroller-path&#125;&quot;/&gt;</div><div class="line">      &lt;sysproperty key=&quot;taskcontroller-ugi&quot; value=&quot;$&#123;taskcontroller-ugi&#125;&quot;/&gt;</div><div class="line">      &lt;classpath refid=&quot;test.classpath&quot;/&gt;</div><div class="line">      &lt;formatter type=&quot;$&#123;test.junit.output.format&#125;&quot; /&gt;</div><div class="line">      &lt;batchtest todir=&quot;$&#123;build.test&#125;&quot; unless=&quot;testcase&quot;&gt;</div><div class="line">        &lt;fileset dir=&quot;$&#123;src.test&#125;&quot;</div><div class="line">                 includes=&quot;**/Test*.java&quot; excludes=&quot;**/$&#123;test.exclude&#125;.java, system/**/*.java&quot; /&gt;</div><div class="line">      &lt;/batchtest&gt;</div><div class="line">      &lt;batchtest todir=&quot;$&#123;build.test&#125;&quot; if=&quot;testcase&quot;&gt;</div><div class="line">        &lt;fileset dir=&quot;$&#123;src.test&#125;&quot; includes=&quot;**/$&#123;testcase&#125;.java&quot; excludes=&quot;system/**/*.java&quot; /&gt;</div><div class="line">      &lt;/batchtest&gt;</div><div class="line">    &lt;/junit&gt;</div><div class="line">    &lt;antcall target=&quot;checkfailure&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;!-- Run system tests                                                   --&gt;</div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;target name=&quot;test-system&quot; depends=&quot;compile, compile-test-system, jar&quot;</div><div class="line">     if=&quot;test.system.available&quot;&gt;</div><div class="line">     &lt;delete dir=&quot;$&#123;build.test.system&#125;/extraconf&quot;/&gt;</div><div class="line">     &lt;mkdir dir=&quot;$&#123;build.test.system&#125;/extraconf&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.src.dir&quot; location=&quot;$&#123;hadoop.root&#125;/src/test&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.junit.printsummary&quot; value=&quot;yes&quot; /&gt;</div><div class="line">     &lt;property name=&quot;test.junit.haltonfailure&quot; value=&quot;no&quot; /&gt;</div><div class="line">     &lt;property name=&quot;test.junit.maxmemory&quot; value=&quot;512m&quot; /&gt;</div><div class="line">     &lt;property name=&quot;test.junit.fork.mode&quot; value=&quot;perTest&quot; /&gt;</div><div class="line">     &lt;property name=&quot;test.all.tests.file&quot; value=&quot;$&#123;test.src.dir&#125;/all-tests&quot; /&gt;</div><div class="line">     &lt;property name=&quot;test.build.dir&quot; value=&quot;$&#123;hadoop.root&#125;/build/test&quot;/&gt;</div><div class="line">     &lt;property name=&quot;basedir&quot; value=&quot;$&#123;hadoop.root&#125;&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.timeout&quot; value=&quot;900000&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.junit.output.format&quot; value=&quot;plain&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.tools.input.dir&quot; value=&quot;$&#123;basedir&#125;/src/test/tools/data&quot;/&gt;</div><div class="line">     &lt;property name=&quot;c++.src&quot; value=&quot;$&#123;basedir&#125;/src/c++&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.include&quot; value=&quot;Test*&quot;/&gt;</div><div class="line">     &lt;property name=&quot;c++.libhdfs.src&quot; value=&quot;$&#123;c++.src&#125;/libhdfs&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.build.data&quot; value=&quot;$&#123;build.test.system&#125;/data&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.cache.data&quot; value=&quot;$&#123;build.test.system&#125;/cache&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.debug.data&quot; value=&quot;$&#123;build.test.system&#125;/debug&quot;/&gt;</div><div class="line">     &lt;property name=&quot;test.log.dir&quot; value=&quot;$&#123;build.test.system&#125;/logs&quot;/&gt;</div><div class="line">     &lt;patternset id=&quot;empty.exclude.list.id&quot; /&gt;</div><div class="line">        &lt;exec executable=&quot;sed&quot; inputstring=&quot;$&#123;os.name&#125;&quot;</div><div class="line">            outputproperty=&quot;nonspace.os&quot;&gt;</div><div class="line">          &lt;arg value=&quot;s/ /_/g&quot;/&gt;</div><div class="line">        &lt;/exec&gt;</div><div class="line">     &lt;property name=&quot;build.platform&quot;</div><div class="line">         value=&quot;$&#123;nonspace.os&#125;-$&#123;os.arch&#125;-$&#123;sun.arch.data.model&#125;&quot;/&gt;</div><div class="line">     &lt;property name=&quot;build.native&quot;</div><div class="line">         value=&quot;$&#123;hadoop.root&#125;/build/native/$&#123;build.platform&#125;&quot;/&gt;</div><div class="line">     &lt;property name=&quot;lib.dir&quot; value=&quot;$&#123;hadoop.root&#125;/lib&quot;/&gt;</div><div class="line">     &lt;property name=&quot;install.c++.examples&quot;</div><div class="line">         value=&quot;$&#123;hadoop.root&#125;/build/c++-examples/$&#123;build.platform&#125;&quot;/&gt;</div><div class="line">    &lt;condition property=&quot;tests.testcase&quot;&gt;</div><div class="line">       &lt;and&gt;</div><div class="line">         &lt;isset property=&quot;testcase&quot; /&gt;</div><div class="line">       &lt;/and&gt;</div><div class="line">    &lt;/condition&gt;</div><div class="line">     &lt;property name=&quot;test.junit.jvmargs&quot; value=&quot;-ea&quot; /&gt;</div><div class="line">    &lt;macro-system-test-runner test.file=&quot;$&#123;test.all.tests.file&#125;&quot;</div><div class="line">                     classpath=&quot;test.system.classpath&quot;</div><div class="line">                     test.dir=&quot;$&#123;build.test.system&#125;&quot;</div><div class="line">                     fileset.dir=&quot;$&#123;hadoop.root&#125;/src/contrib/$&#123;name&#125;/src/test/system&quot;</div><div class="line">                     hadoop.conf.dir.deployed=&quot;$&#123;hadoop.conf.dir.deployed&#125;&quot;&gt;</div><div class="line">  &lt;/macro-system-test-runner&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;macrodef name=&quot;macro-system-test-runner&quot;&gt;</div><div class="line">    &lt;attribute name=&quot;test.file&quot; /&gt;</div><div class="line">    &lt;attribute name=&quot;classpath&quot; /&gt;</div><div class="line">    &lt;attribute name=&quot;test.dir&quot; /&gt;</div><div class="line">    &lt;attribute name=&quot;fileset.dir&quot; /&gt;</div><div class="line">    &lt;attribute name=&quot;hadoop.conf.dir.deployed&quot; default=&quot;&quot; /&gt;</div><div class="line">    &lt;sequential&gt;</div><div class="line">      &lt;delete dir=&quot;@&#123;test.dir&#125;/data&quot;/&gt;</div><div class="line">      &lt;mkdir dir=&quot;@&#123;test.dir&#125;/data&quot;/&gt;</div><div class="line">      &lt;delete dir=&quot;@&#123;test.dir&#125;/logs&quot;/&gt;</div><div class="line">      &lt;mkdir dir=&quot;@&#123;test.dir&#125;/logs&quot;/&gt;</div><div class="line">      &lt;copy file=&quot;$&#123;test.src.dir&#125;/hadoop-policy.xml&quot;</div><div class="line">        todir=&quot;@&#123;test.dir&#125;/extraconf&quot; /&gt;</div><div class="line">      &lt;copy file=&quot;$&#123;test.src.dir&#125;/fi-site.xml&quot;</div><div class="line">        todir=&quot;@&#123;test.dir&#125;/extraconf&quot; /&gt;</div><div class="line">      &lt;junit showoutput=&quot;$&#123;test.output&#125;&quot;</div><div class="line">        printsummary=&quot;$&#123;test.junit.printsummary&#125;&quot;</div><div class="line">        haltonfailure=&quot;$&#123;test.junit.haltonfailure&#125;&quot;</div><div class="line">        fork=&quot;yes&quot;</div><div class="line">        forkmode=&quot;$&#123;test.junit.fork.mode&#125;&quot;</div><div class="line">        maxmemory=&quot;$&#123;test.junit.maxmemory&#125;&quot;</div><div class="line">        dir=&quot;$&#123;basedir&#125;&quot; timeout=&quot;$&#123;test.timeout&#125;&quot;</div><div class="line">        errorProperty=&quot;tests.failed&quot; failureProperty=&quot;tests.failed&quot;&gt;</div><div class="line">        &lt;jvmarg value=&quot;$&#123;test.junit.jvmargs&#125;&quot; /&gt;</div><div class="line">        &lt;sysproperty key=&quot;java.net.preferIPv4Stack&quot; value=&quot;true&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.build.data&quot; value=&quot;@&#123;test.dir&#125;/data&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.tools.input.dir&quot; value = &quot;$&#123;test.tools.input.dir&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.cache.data&quot; value=&quot;$&#123;test.cache.data&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.debug.data&quot; value=&quot;$&#123;test.debug.data&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;hadoop.log.dir&quot; value=&quot;@&#123;test.dir&#125;/logs&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.src.dir&quot; value=&quot;@&#123;fileset.dir&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;taskcontroller-path&quot; value=&quot;$&#123;taskcontroller-path&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;taskcontroller-ugi&quot; value=&quot;$&#123;taskcontroller-ugi&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.build.extraconf&quot; value=&quot;@&#123;test.dir&#125;/extraconf&quot; /&gt;</div><div class="line">        &lt;sysproperty key=&quot;hadoop.policy.file&quot; value=&quot;hadoop-policy.xml&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;java.library.path&quot;</div><div class="line">          value=&quot;$&#123;build.native&#125;/lib:$&#123;lib.dir&#125;/native/$&#123;build.platform&#125;&quot;/&gt;</div><div class="line">        &lt;sysproperty key=&quot;install.c++.examples&quot; value=&quot;$&#123;install.c++.examples&#125;&quot;/&gt;</div><div class="line">        &lt;syspropertyset dynamic=&quot;no&quot;&gt;</div><div class="line">          &lt;propertyref name=&quot;hadoop.tmp.dir&quot;/&gt;</div><div class="line">        &lt;/syspropertyset&gt;</div><div class="line">        &lt;!-- set compile.c++ in the child jvm only if it is set --&gt;</div><div class="line">        &lt;syspropertyset dynamic=&quot;no&quot;&gt;</div><div class="line">          &lt;propertyref name=&quot;compile.c++&quot;/&gt;</div><div class="line">        &lt;/syspropertyset&gt;</div><div class="line">        &lt;!-- Pass probability specifications to the spawn JVM --&gt;</div><div class="line">        &lt;syspropertyset id=&quot;FaultProbabilityProperties&quot;&gt;</div><div class="line">          &lt;propertyref regex=&quot;fi.*&quot;/&gt;</div><div class="line">        &lt;/syspropertyset&gt;</div><div class="line">        &lt;sysproperty key=&quot;test.system.hdrc.deployed.hadoopconfdir&quot;</div><div class="line">                     value=&quot;@&#123;hadoop.conf.dir.deployed&#125;&quot; /&gt;</div><div class="line">        &lt;classpath refid=&quot;@&#123;classpath&#125;&quot;/&gt;</div><div class="line">        &lt;formatter type=&quot;$&#123;test.junit.output.format&#125;&quot; /&gt;</div><div class="line">        &lt;batchtest todir=&quot;@&#123;test.dir&#125;&quot; unless=&quot;testcase&quot;&gt;</div><div class="line">          &lt;fileset dir=&quot;@&#123;fileset.dir&#125;&quot;</div><div class="line">            excludes=&quot;**/$&#123;test.exclude&#125;.java aop/** system/**&quot;&gt;</div><div class="line">            &lt;patternset&gt;</div><div class="line">              &lt;includesfile name=&quot;@&#123;test.file&#125;&quot;/&gt;</div><div class="line">            &lt;/patternset&gt;</div><div class="line">          &lt;/fileset&gt;</div><div class="line">        &lt;/batchtest&gt;</div><div class="line">        &lt;batchtest todir=&quot;@&#123;test.dir&#125;&quot; if=&quot;testcase&quot;&gt;</div><div class="line">          &lt;fileset dir=&quot;@&#123;fileset.dir&#125;&quot; includes=&quot;**/$&#123;testcase&#125;.java&quot;/&gt;</div><div class="line">        &lt;/batchtest&gt;</div><div class="line">      &lt;/junit&gt;</div><div class="line">      &lt;antcall target=&quot;checkfailure&quot;/&gt;</div><div class="line">    &lt;/sequential&gt;</div><div class="line">  &lt;/macrodef&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;target name=&quot;checkfailure&quot; if=&quot;tests.failed&quot;&gt;</div><div class="line">    &lt;touch file=&quot;$&#123;build.contrib.dir&#125;/testsfailed&quot;/&gt;</div><div class="line">    &lt;fail unless=&quot;continueOnFailure&quot;&gt;Contrib Tests failed!&lt;/fail&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;!-- Clean.  Delete the build files, and their directories              --&gt;</div><div class="line">  &lt;!-- ================================================================== --&gt;</div><div class="line">  &lt;target name=&quot;clean&quot;&gt;</div><div class="line">    &lt;echo message=&quot;contrib: $&#123;name&#125;&quot;/&gt;</div><div class="line">    &lt;delete dir=&quot;$&#123;build.dir&#125;&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;target name=&quot;ivy-probe-antlib&quot; &gt;</div><div class="line">    &lt;condition property=&quot;ivy.found&quot;&gt;</div><div class="line">      &lt;typefound uri=&quot;antlib:org.apache.ivy.ant&quot; name=&quot;cleancache&quot;/&gt;</div><div class="line">    &lt;/condition&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line"></div><div class="line">  &lt;target name=&quot;ivy-download&quot; description=&quot;To download ivy &quot; unless=&quot;offline&quot;&gt;</div><div class="line">    &lt;get src=&quot;$&#123;ivy_repo_url&#125;&quot; dest=&quot;$&#123;ivy.jar&#125;&quot; usetimestamp=&quot;true&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;target name=&quot;ivy-init-antlib&quot; depends=&quot;ivy-download,ivy-probe-antlib&quot; unless=&quot;ivy.found&quot;&gt;</div><div class="line">    &lt;typedef uri=&quot;antlib:org.apache.ivy.ant&quot; onerror=&quot;fail&quot;</div><div class="line">      loaderRef=&quot;ivyLoader&quot;&gt;</div><div class="line">      &lt;classpath&gt;</div><div class="line">        &lt;pathelement location=&quot;$&#123;ivy.jar&#125;&quot;/&gt;</div><div class="line">      &lt;/classpath&gt;</div><div class="line">    &lt;/typedef&gt;</div><div class="line">    &lt;fail &gt;</div><div class="line">      &lt;condition &gt;</div><div class="line">        &lt;not&gt;</div><div class="line">          &lt;typefound uri=&quot;antlib:org.apache.ivy.ant&quot; name=&quot;cleancache&quot;/&gt;</div><div class="line">        &lt;/not&gt;</div><div class="line">      &lt;/condition&gt;</div><div class="line">      You need Apache Ivy 2.0 or later from http://ant.apache.org/</div><div class="line">      It could not be loaded from $&#123;ivy_repo_url&#125;</div><div class="line">    &lt;/fail&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;target name=&quot;ivy-init&quot; depends=&quot;ivy-init-antlib&quot;&gt;</div><div class="line">    &lt;ivy:configure settingsid=&quot;$&#123;ant.project.name&#125;.ivy.settings&quot; file=&quot;$&#123;ivysettings.xml&#125;&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;target name=&quot;ivy-resolve-common&quot; depends=&quot;ivy-init&quot;&gt;</div><div class="line">    &lt;ivy:resolve settingsRef=&quot;$&#123;ant.project.name&#125;.ivy.settings&quot; conf=&quot;common&quot; log=&quot;$&#123;loglevel&#125;&quot;/&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line"></div><div class="line">  &lt;target name=&quot;ivy-retrieve-common&quot; depends=&quot;ivy-resolve-common&quot;</div><div class="line">    description=&quot;Retrieve Ivy-managed artifacts for the compile/test configurations&quot;&gt;</div><div class="line">    &lt;ivy:retrieve settingsRef=&quot;$&#123;ant.project.name&#125;.ivy.settings&quot;</div><div class="line">      pattern=&quot;$&#123;build.ivy.lib.dir&#125;/$&#123;ivy.artifact.retrieve.pattern&#125;&quot; sync=&quot;true&quot; log=&quot;$&#123;loglevel&#125;&quot;/&gt;</div><div class="line">    &lt;ivy:cachepath pathid=&quot;$&#123;ant.project.name&#125;.common-classpath&quot; conf=&quot;common&quot; /&gt;</div><div class="line">  &lt;/target&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<h4 id="2-3-hadoop-1-2-1-src-contrib-eclipse-plugin-META-INF-MANIFEST-MF"><a href="#2-3-hadoop-1-2-1-src-contrib-eclipse-plugin-META-INF-MANIFEST-MF" class="headerlink" title="2.3 hadoop-1.2.1\src\contrib\eclipse-plugin\META-INF\MANIFEST.MF"></a>2.3 <strong>hadoop-1.2.1\src\contrib\eclipse-plugin\META-INF\MANIFEST.MF</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">Manifest-Version: 1.0</div><div class="line">Bundle-ManifestVersion: 2</div><div class="line">Bundle-Name: MapReduce Tools for Eclipse</div><div class="line">Bundle-SymbolicName: org.apache.hadoop.eclipse;singleton:=true</div><div class="line">Bundle-Version: 0.18</div><div class="line">Bundle-Activator: org.apache.hadoop.eclipse.Activator</div><div class="line">Bundle-Localization: plugin</div><div class="line">Require-Bundle: org.eclipse.ui,</div><div class="line">org.eclipse.core.runtime,</div><div class="line">org.eclipse.jdt.launching,</div><div class="line">org.eclipse.debug.core,</div><div class="line">org.eclipse.jdt,</div><div class="line">org.eclipse.jdt.core,</div><div class="line">org.eclipse.core.resources,</div><div class="line">org.eclipse.ui.ide,</div><div class="line">org.eclipse.jdt.ui,</div><div class="line">org.eclipse.debug.ui,</div><div class="line">org.eclipse.jdt.debug.ui,</div><div class="line">org.eclipse.core.expressions,</div><div class="line">org.eclipse.ui.cheatsheets,</div><div class="line">org.eclipse.ui.console,</div><div class="line">org.eclipse.ui.navigator,</div><div class="line">org.eclipse.core.filesystem,</div><div class="line">org.apache.commons.logging</div><div class="line">Eclipse-LazyStart: true</div><div class="line">Bundle-ClassPath: classes/,lib/hadoop-core.jar,lib/jackson-core-asl-1.8.8.jar ,lib/jackson-mapper-asl-1.8.8.jar, lib/commons-configuration-1.6.jar,lib/commons-lang-2.4.jar, lib/commons-httpclient-3.0.1.jar,lib/commons-cli-1.2.jar</div><div class="line">Bundle-Vendor: Apache Hadoop</div></pre></td></tr></table></figure>
<h3 id="3-编译"><a href="#3-编译" class="headerlink" title="3. 编译"></a>3. 编译</h3><p>配置文件修改完成后，使用ant进行编译（过程需要联网）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ant D:\hadoop\hadoop-1.2.1\src\contrib\eclipse-plugin\build.xml</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[读书笔记：hadoop权威指南（Hadoop The Definitive Guide）]]></title>
      <url>http://bysonline.github.io/2016/07/16/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%9Ahadoop%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%EF%BC%88Hadoop%20The%20Definitive%20Guide%EF%BC%89/</url>
      <content type="html"><![CDATA[<h3 id="第3章-Hadoop分布式文件系统"><a href="#第3章-Hadoop分布式文件系统" class="headerlink" title="第3章 Hadoop分布式文件系统"></a>第3章 Hadoop分布式文件系统</h3><h4 id="3-1-Hadoop的概念"><a href="#3-1-Hadoop的概念" class="headerlink" title="3.1 Hadoop的概念"></a>3.1 Hadoop的概念</h4><h5 id="3-1-1-数据块"><a href="#3-1-1-数据块" class="headerlink" title="3.1.1 数据块"></a>3.1.1 数据块</h5><p>数据块默认大小64M，修改？？？<br>修改数据块的大小是为了减少磁盘寻址时间带来的消耗，但块过大会使map的数量变少（map一次处理一个block），MapReduce的效率降低。</p>
<h5 id="3-1-2-NameNode和DataNode"><a href="#3-1-2-NameNode和DataNode" class="headerlink" title="3.1.2 NameNode和DataNode"></a>3.1.2 NameNode和DataNode</h5><p>HDFS的特点是采用主从结构（Master/Slave）。NameNode存储2类文件：命名空间镜像文件和操作日志文件，用于记录文件系统数及树的文件和目录。NameNode是HDFS的核心，NameNode损坏将导致整个HDFS不可用。所以需要进行备份，备份的机制有2种：将NameNode信息同时写入NFS和使用SecondaryNameNode。SecondaryNameNode通常在单独节点运行，因为需要大量的CUP与和NameNode相同大小的内存用于进行命名空间合并。SecondaryNameNode的数据滞后于NameNode，所以在恢复时需要将NFS的数据拷贝到SecondaryNameNode。</p>
<h5 id="3-1-3-命令行"><a href="#3-1-3-命令行" class="headerlink" title="3.1.3 命令行"></a>3.1.3 命令行</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">hadoop fs [-fs &lt;local | file system URI&gt;] [-conf &lt;configuration file&gt;]</div><div class="line">[-D &lt;property=value&gt;] [-ls &lt;path&gt;] [-lsr &lt;path&gt;] [-du &lt;path&gt;]</div><div class="line">[-dus &lt;path&gt;] [-mv &lt;src&gt; &lt;dst&gt;] [-cp &lt;src&gt; &lt;dst&gt;] [-rm [-skipTrash] &lt;src&gt;]</div><div class="line">[-rmr [-skipTrash] &lt;src&gt;] [-put &lt;localsrc&gt; ... &lt;dst&gt;] [-copyFromLocal &lt;localsrc&gt; ... &lt;dst&gt;]</div><div class="line">[-moveFromLocal &lt;localsrc&gt; ... &lt;dst&gt;] [-get [-ignoreCrc] [-crc] &lt;src&gt; &lt;localdst&gt;</div><div class="line">[-getmerge &lt;src&gt; &lt;localdst&gt; [addnl]] [-cat &lt;src&gt;]</div><div class="line">[-copyToLocal [-ignoreCrc] [-crc] &lt;src&gt; &lt;localdst&gt;] [-moveToLocal &lt;src&gt; &lt;localdst&gt;]</div><div class="line">[-mkdir &lt;path&gt;] [-report] [-setrep [-R] [-w] &lt;rep&gt; &lt;path/file&gt;]</div><div class="line">[-touchz &lt;path&gt;] [-test -[ezd] &lt;path&gt;] [-stat [format] &lt;path&gt;]</div><div class="line">[-tail [-f] &lt;path&gt;] [-text &lt;path&gt;]</div><div class="line">[-chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; PATH...]</div><div class="line">[-chown [-R] [OWNER][:[GROUP]] PATH...]</div><div class="line">[-chgrp [-R] GROUP PATH...]</div><div class="line">[-count[-q] &lt;path&gt;]</div><div class="line">[-help [cmd]]</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Google地图求两点之间距离]]></title>
      <url>http://bysonline.github.io/2016/07/16/Google-%E5%9C%B0%E5%9B%BE%E6%B1%82%E4%B8%A4%E7%82%B9%E4%B9%8B%E9%97%B4%E8%B7%9D%E7%A6%BB/</url>
      <content type="html"><![CDATA[<p>地球是一个近乎标准的椭球体，它的赤道半径为6378.140千米，极半径为6356.755千米，平均半径6371.004千米。如果我们假设地球是一个完美的球体，那么它的半径就是地球的平均半径，记为R。如果以0度经线为基准，那么根据地球表面任意两点的经纬度就可以计算出这两点间的地表距离（这里 忽略地球表面地形对计算带来的误差，仅仅是理论上的估算值）。设第一点A的经纬度为(LonA, LatA)，第二点B的经纬度为(LonB, LatB)，按照0度经线的基准，东经取经度的正值(Longitude)，西经取经度负值(-Longitude)，北纬取90-纬度值(90- Latitude)，南纬取90+纬度值(90+Latitude)，则经过上述处理过后的两点被计为(MLonA, MLatA)和(MLonB, MLatB)。那么根据三角推导，可以得到计算两点距离的如下公式：</p>
<pre><code>C = sin(MLatA)*sin(MLatB)*cos(MLonA-MLonB) + cos(MLatA)*cos(MLatB)

Distance = R*Arccos(C)*Pi/180
</code></pre><p>这里，R和Distance单位是相同，如果是采用6371.004千米作为半径，那么Distance就是千米为单位，如果要使用其他单位，比如mile，还需要做单位换算，1千米=0.621371192mile<br>如果仅对经度作正负的处理，而不对纬度作90-Latitude(假设都是北半球，南半球只有澳洲具有应用意义)的处理，那么公式将是：</p>
<pre><code>C = sin(LatA)*sin(LatB) + cos(LatA)*cos(LatB)*cos(MLonA-MLonB)

Distance = R*Arccos(C)*Pi/180
</code></pre><p>以上通过简单的三角变换就可以推出。</p>
<pre><code>var EARTH_RADIUS = 6378.137;
function rad(d){
    return d * Math.PI / 180.0;
}

function GetDistance(lat1, lng1, lat2, lng2){
    var radLat1 = rad(lat1);
    var radLat2 = rad(lat2);
    var a = radLat1 - radLat2;
    var b = rad(lng1) - rad(lng2);
    var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2) +
Math.cos(radLat1)*Math.cos(radLat2)*Math.pow(Math.sin(b/2),2)));
    s = s * EARTH_RADIUS;
    s = Math.round(s * 10000) / 10000;
    return s;
}
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hadoop 2.2.0 安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hadoop-2.2.0-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1. 下载"></a>1. 下载</h3><p><a href="https://archive.apache.org/dist/hadoop/common/hadoop-2.2.0/hadoop-2.2.0.tar.gz" title="hadoop-2.2.0" target="_blank" rel="external">https://archive.apache.org/dist/hadoop/common/hadoop-2.2.0/hadoop-2.2.0.tar.gz</a></p>
<p>###2. 解压</p>
<blockquote>
<p>tar -zxf hadoop-2.2.0.tar.gz</p>
<p>###3. 配置环境变量<br>HADOOP_HOME=/usr/hadoop/hadoop-2.2.0<br>配置文件路径 $HADOOP_HOME/etc/hadoop</p>
<p>###4. 修改配置文件</p>
<p>####4.1 修改core-site.xml</p>
<p>vi ./etc/hadoop/core-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://node1:8020&lt;/value&gt;`  
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
        &lt;value&gt;/home/tmp/hadoop2.0&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;io.file.buffer.size&lt;/name&gt;
        &lt;value&gt;131072&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>####4.2 修改 hdfs-site.xml</p>
<blockquote>
<p>vi ./etc/hadoop/hdfs-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
            &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
        &lt;value&gt;/usr/hadoop/hadoop-2.2.0/name&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
        &lt;value&gt;/usr/hadoop/hadoop-2.2.0/data&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.permissions&lt;/name&gt;
        &lt;value&gt;false&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>####4.3 修改 mapred-site.xml</p>
<blockquote>
<p>vi ./etc/hadoop/mapred-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>####4.4 修改 yarn-site.xml</p>
<blockquote>
<p>vi ./etc/hadoop/yarn-site.xml</p>
</blockquote>
<pre><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.address&lt;/name&gt;
        &lt;value&gt;node1:8032&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.scheduler.address&lt;/name&gt;
        &lt;value&gt;node1:8030&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.resource-tracker.address&lt;/name&gt;
        &lt;value&gt;node1:8031&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.admin.address&lt;/name&gt;
        &lt;value&gt;node1:8033&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.webapp.address&lt;/name&gt;
        &lt;value&gt;node1:8088&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services.mapreduce.shuffle.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre><p>###5. 设置互信</p>
<p>####5.1 生成ssh key</p>
<blockquote>
<p>ssh-keygen -t dsa -P ‘’ -f ~/.ssh/id_dsa<br>cat ~/.ssh/id_dsa.pub &gt;&gt; ~/.ssh/authorized_keys<br>chmod 0600 ~/.ssh/authorized_keys</p>
</blockquote>
<p>####5.2 测试ssh</p>
<blockquote>
<p>ssh localhost</p>
<p>###6. 格式化namenode</p>
<p>./bin/hdfs namenode -format</p>
</blockquote>
<p>###7. 启动namenode和datanode</p>
<blockquote>
<p>./sbin/hadoop-daemon.sh start namenode<br>./sbin/hadoop-daemon.sh start datanode<br>./sbin/yarn-daemon.sh start resourcemanager<br>./sbin/yarn-daemon.sh start nodemanager<br>./sbin/yarn-daemon.sh start proxyserver<br>./sbin/mr-jobhistory-daemon.sh start historyserver</p>
</blockquote>
<p>####8. 验证</p>
<blockquote>
<p>./bin/hdfs dfs -mkdir /user/rolex/input/<br>./bin/hdfs dfs -put ../README.txt /user/rolex/input/<br>./bin/hadoop jar ../share/hadoop/mapreduce/hadoop-mapreduce-examples-2.2.0.jar grep /user/rolex/input/README.txt /user/rolex/output/ ‘code’<br>./bin/hdfs dfs -cat /user/rolex/output/part-r-00000</p>
</blockquote>
<p>####9. 关闭</p>
<blockquote>
<p>./sbin/hadoop-daemon.sh stop namenode<br>./sbin/hadoop-daemon.sh stop datanode<br>./sbin/yarn-daemon.sh stop resourcemanager<br>./sbin/yarn-daemon.sh stop nodemanager<br>./sbin/yarn-daemon.sh stop proxyserver<br>./sbin/mr-jobhistory-daemon.sh stop historyserver  </p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[hadoop练习]]></title>
      <url>http://bysonline.github.io/2016/07/16/Hadoop-%E7%BB%83%E4%B9%A0/</url>
      <content type="html"><![CDATA[<ol>
<li><p>根据lac_id和start_time知道用户当时的位置，根据staytime知道用户各个基站的逗留时长。根据轨迹合并连续基站的staytime。最终得到每一个用户按时间排序在每一个基站驻留时长。</p>
<p>13429100031 22554 8 2013-03-11 08:55:19.151754088 571 571 282 571<br>13429100082 22540 8 2013-03-11 08:58:20.152622488 571 571 270 571<br>13429100082 22691 8 2013-03-11 08:56:37.149593624 571 571 103 571<br>13429100087 22705 8 2013-03-11 08:56:51.139539816 571 571 220 571<br>13429100087 22540 8 2013-03-11 08:55:45.150276800 571 571 66 571<br>13429100082 22540 8 2013-03-11 08:55:38.140225200 571 571 133 571<br>13429100140 26642 9 2013-03-11 09:02:19.151754088 571 571 18 571<br>13429100082 22691 8 2013-03-11 08:57:32.151754088 571 571 287 571<br>13429100189 22558 8 2013-03-11 08:56:24.139539816 571 571 48 571<br>13429100349 22503 8 2013-03-11 08:54:30.152622440 571 571 211 571  </p>
</li>
</ol>
<pre><code>product_no lac_id moment start_time user_id county_id staytime city_id
</code></pre><ol>
<li><p>计算第四列每个元素出现的个数</p>
<p>a,b,c,d<br>b,b,f,e<br>a,a,c,f<br>b,b,f,a<br>b,b,f,e</p>
</li>
<li><p>计算高峰时间段（如上午10点-11点）哪张表被访问的最频繁，以及这段时间访问这张表最多的用户，以及这个用户的总时间开销。</p>
<p>TableName(表名)，Time(时间)，User(用户)，TimeSpan(时间开销)<br>t1 09:59:20 u1 1<br>t2 10:02:20 u4 2<br>t1 10:12:20 u3 3<br>t2 10:22:20 u3 2<br>t2 10:32:20 u2 5<br>t3 10:42:20 u1 2<br>t3 10:52:20 u2 7<br>t4 10:22:20 u1 9<br>t1 10:32:20 u4 2</p>
</li>
<li><p>输出不在Order的customer</p>
</li>
</ol>
<ol>
<li>输入2天股价波动</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[gitlab安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Gitlab-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="1-安装依赖"><a href="#1-安装依赖" class="headerlink" title="1. 安装依赖"></a>1. 安装依赖</h3><blockquote>
<p>sudo yum install curl openssh-server openssh-clients postfix cronie<br>sudo service postfix start<br>sudo chkconfig postfix on<br>sudo lokkit -s http -s ssh  </p>
</blockquote>
<h3 id="2-添加GitLab-package-server"><a href="#2-添加GitLab-package-server" class="headerlink" title="2. 添加GitLab package server"></a>2. 添加GitLab package server</h3><blockquote>
<p>curl -s <a href="https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh" target="_blank" rel="external">https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh</a> | sudo bash<br>sudo yum install gitlab-ce-8.5.0-ce.1.el6.x86_64</p>
</blockquote>
<h3 id="3-安装"><a href="#3-安装" class="headerlink" title="3. 安装"></a>3. 安装</h3><blockquote>
<p>sudo rpm -i gitlab-ce-8.5.0-ce.1.el6.x86_64.rpm</p>
</blockquote>
<h3 id="4-配置"><a href="#4-配置" class="headerlink" title="4. 配置"></a>4. 配置</h3><blockquote>
<p>sudo gitlab-ctl reconfigure</p>
</blockquote>
<h3 id="5-配置邮件服务"><a href="#5-配置邮件服务" class="headerlink" title="5. 配置邮件服务"></a>5. 配置邮件服务</h3><blockquote>
<p>sudo yum install postfix<br>yum install cyrus*</p>
</blockquote>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Git 使用]]></title>
      <url>http://bysonline.github.io/2016/07/16/Git-%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h3 id="1-生成rsa密钥对。"><a href="#1-生成rsa密钥对。" class="headerlink" title="1. 生成rsa密钥对。"></a>1. 生成rsa密钥对。</h3><p><img src="http://7xqgix.com1.z0.glb.clouddn.com/1.png" alt="1"></p>
<h3 id="2-将公钥上传到github。"><a href="#2-将公钥上传到github。" class="headerlink" title="2. 将公钥上传到github。"></a>2. 将公钥上传到github。</h3><h3 id="3-在github上创建新repository，名字haro。本地初始化并添加远程仓库。"><a href="#3-在github上创建新repository，名字haro。本地初始化并添加远程仓库。" class="headerlink" title="3. 在github上创建新repository，名字haro。本地初始化并添加远程仓库。"></a>3. 在github上创建新repository，名字haro。本地初始化并添加远程仓库。</h3><h3 id="4-提交代码到本地master分支，再推送到远程仓库"><a href="#4-提交代码到本地master分支，再推送到远程仓库" class="headerlink" title="4. 提交代码到本地master分支，再推送到远程仓库"></a>4. 提交代码到本地master分支，再推送到远程仓库</h3><h3 id="5-创建dev分支"><a href="#5-创建dev分支" class="headerlink" title="5. 创建dev分支"></a>5. 创建dev分支</h3><h3 id="6-切换到dev分支，修改提交，合并到master分支，推送到远程仓库。"><a href="#6-切换到dev分支，修改提交，合并到master分支，推送到远程仓库。" class="headerlink" title="6. 切换到dev分支，修改提交，合并到master分支，推送到远程仓库。"></a>6. 切换到dev分支，修改提交，合并到master分支，推送到远程仓库。</h3><h3 id="7-远程覆盖本地"><a href="#7-远程覆盖本地" class="headerlink" title="7. 远程覆盖本地"></a>7. 远程覆盖本地</h3><h3 id="8-克隆远程仓库到本地"><a href="#8-克隆远程仓库到本地" class="headerlink" title="8. 克隆远程仓库到本地"></a>8. 克隆远程仓库到本地</h3><h3 id="9-删除远程分支"><a href="#9-删除远程分支" class="headerlink" title="9. 删除远程分支"></a>9. 删除远程分支</h3><h3 id="10-设置忽略文件"><a href="#10-设置忽略文件" class="headerlink" title="10. 设置忽略文件"></a>10. 设置忽略文件</h3><p>在仓库目录创建.gitignore文件，文件内容如下:</p>
<pre><code>.idea/     --忽略.idea目录
.iml     --忽略.iml文件  
target/  
.gitignore
</code></pre><p><em>该方式对所在目录和子目录有效。</em></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[fabric安装]]></title>
      <url>http://bysonline.github.io/2016/07/16/Fabric-%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="1-安装依赖包"><a href="#1-安装依赖包" class="headerlink" title="1. 安装依赖包"></a>1. 安装依赖包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sudo rpm -ivh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm  </div><div class="line">sudo yum install -y python-devel  </div><div class="line">sudo yum install -y gcc  </div><div class="line">sudo yum install -y wget  </div><div class="line">sudo yum install -y python-pip</div></pre></td></tr></table></figure>
<h3 id="2-安装fabric"><a href="#2-安装fabric" class="headerlink" title="2. 安装fabric"></a>2. 安装fabric</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo pip install fabric</div></pre></td></tr></table></figure>
<h3 id="3-验证"><a href="#3-验证" class="headerlink" title="3. 验证"></a>3. 验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python -c &quot;from fabric.api import * ; print env.version&quot;</div></pre></td></tr></table></figure>
<p>输出版本信息则安装成功。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MySQL-5.7.11-winx64 zip版安装]]></title>
      <url>http://bysonline.github.io/2016/07/15/MySQL-5.7.11-winx64-zip-%E7%89%88%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>OS : Windows 10 x64</p>
<h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><p>解压路径为 <strong>%MYSQL_HOME%</strong></p>
<h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><p>add <strong>%MYSQL_HOME%\bin</strong> to path</p>
<h3 id="修改my-ini"><a href="#修改my-ini" class="headerlink" title="修改my.ini"></a>修改my.ini</h3><p>拷贝my-default.ini为my.ini<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">basedir = D:\Program Files\MySQL\mysql-5.7.11-winx64</div><div class="line">datadir =  D:\Program Files\MySQL\mysql-5.7.11-winx64\data</div><div class="line">port = 3306</div></pre></td></tr></table></figure></p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld --initialize --user=mysql --console</div></pre></td></tr></table></figure>
<p>记录末尾的初始密码</p>
<h3 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysqld --install MySQL</div></pre></td></tr></table></figure>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">net start mysql</div></pre></td></tr></table></figure>
<h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -u root -p</div></pre></td></tr></table></figure>
<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set password for root@localhost = password(&apos;123456&apos;);</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[UAT 部署说明]]></title>
      <url>http://bysonline.github.io/2016/07/15/UAT-%E9%83%A8%E7%BD%B2%E8%AF%B4%E6%98%8E/</url>
      <content type="html"><![CDATA[<h3 id="创建用户和组"><a href="#创建用户和组" class="headerlink" title="创建用户和组"></a>创建用户和组</h3><p>创建ops，application用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /home  </div><div class="line">groupadd ops  </div><div class="line">useradd -g ops ops  </div><div class="line">useradd -g ops application</div></pre></td></tr></table></figure></p>
<p>添加sudo权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">visudo</div><div class="line"></div><div class="line">ops     ALL=NOPASSWD:   ALL -- sudo时不需要密码</div></pre></td></tr></table></figure></p>
<p>设置ops用户口令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd ops</div></pre></td></tr></table></figure></p>
<h3 id="建立互信"><a href="#建立互信" class="headerlink" title="建立互信"></a>建立互信</h3><blockquote>
<p>ssh-keygen</p>
</blockquote>
<p>将ssh公钥内容拷贝至/home/ops/.ssh/下authorized_keys（若文件不存在，则新建）中</p>
<pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA4jWPNAwuWGf/WeJqF24yfXfhOizrHsDKIBb5/dasyX8KoUrvxGu60+XHgjcavnzjUihBUNdkWFXTUHFvMzkUZ3jhgMyX8s+ILll8jwCnCYPRprjEqDX+BCj/JVEVIhwb6qHQUV5KVi1d2cVG+OAXlY4quQgxKG1aoAu2bNAKrJHP85BAJ5KbE0oCJmqJGs3OzvFR7CzklYHdehdLwwQPaAvMG1bsTgenoPJnOQlps0H627itQPRMUv/mCzNvUWuQBwcBWMXrHtjS5VGe/3KDJFoYQPHzTAy9k4LG1gO+aYDaX+hYxB5sSoS4y3VT/mh4bgac/qClcs4fWm8RVbyPDQ== ops@chinadaas20
</code></pre><h3 id="执行部署"><a href="#执行部署" class="headerlink" title="执行部署"></a>执行部署</h3><ol>
<li><p>安装db(MySQL)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py install_mysql</div></pre></td></tr></table></figure>
</li>
<li><p>安装redis</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py install_redis  </div><div class="line">fab -f fabfile_uat.py sync_redis_conf</div></pre></td></tr></table></figure>
</li>
</ol>
<p>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py start:redis,roles=redis</div></pre></td></tr></table></figure></p>
<ol>
<li>安装search<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py install_search  </div><div class="line">fab -f fabfile_uat.py install_search_service</div></pre></td></tr></table></figure>
</li>
</ol>
<p>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py start:elasticsearch,roles=search</div></pre></td></tr></table></figure></p>
<ol>
<li>安装nginx<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py install_nginx  </div><div class="line">fab -f fabfile_uat.py sync_nginx_conf</div></pre></td></tr></table></figure>
</li>
</ol>
<p>准备app directory<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fab -f fabfile_uat.py setup</div><div class="line">fab -f fabfile_uat.py install_web_service</div><div class="line"></div><div class="line">fab -f fabfile_uat.py start:nginx,roles=web</div></pre></td></tr></table></figure></p>
<ol>
<li><p>执行脚本<br>登录192.168.11.20<br>ops/daas@2015</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd risk-bell  </div><div class="line">./deploy2uat.sh</div></pre></td></tr></table></figure>
</li>
<li><p>修改配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">vi ./config/elasticsearch.yml</div><div class="line"></div><div class="line">cluster.name: daas  </div><div class="line">node.name: chinadaas01</div><div class="line">network.host: 192.168.200.163</div><div class="line">discovery.zen.ping.unicast.hosts: [&quot;192.168.200.163&quot;,&quot;192.168.200.164&quot;,&quot;192.168.200.165&quot;,&quot;192.168.200.166&quot;]</div><div class="line">discovery.zen.minimum_master_nodes: 4</div></pre></td></tr></table></figure>
</li>
</ol>
<p>所有机器执行相同配置，ip和node.name改成对应机器的ip。</p>
<h3 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h3><ol>
<li><p>环境准备</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/data-engine/current/bin/init.sh</div></pre></td></tr></table></figure>
</li>
<li><p>在uat环境执行compare过程和创建用户清单</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/data-engine/current/bin/batch_compare_loader.sh 20150510000000</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="完成后执行变更推送"><a href="#完成后执行变更推送" class="headerlink" title="完成后执行变更推送"></a>完成后执行变更推送</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/data-engine/current/bin/push.sh 20150510000000</div></pre></td></tr></table></figure>
<h3 id="启动web程序"><a href="#启动web程序" class="headerlink" title="启动web程序"></a>启动web程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/data-engine/current/bin/product.sh</div></pre></td></tr></table></figure>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ubuntu 16.04 软件安装及配置]]></title>
      <url>http://bysonline.github.io/2016/07/15/Ubuntu%2016.04%20%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h3 id="0-更新源"><a href="#0-更新源" class="headerlink" title="0. 更新源"></a>0. 更新源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list_bak</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">deb http://mirrors.sohu.com/ubuntu/ xenial-updates main restricted</div><div class="line">deb-src http://mirrors.sohu.com/ubuntu/ xenial-updates main restricted</div><div class="line">deb http://mirrors.sohu.com/ubuntu/ xenial universe</div><div class="line">deb-src http://mirrors.sohu.com/ubuntu/ xenial universe</div><div class="line">deb http://mirrors.sohu.com/ubuntu/ xenial-updates universe</div><div class="line">deb-src http://mirrors.sohu.com/ubuntu/ xenial-updates universe</div><div class="line">deb http://mirrors.sohu.com/ubuntu/ xenial multiverse</div><div class="line">deb-src http://mirrors.sohu.com/ubuntu/ xenial multiverse</div><div class="line">deb http://mirrors.sohu.com/ubuntu/ xenial-updates multiverse</div><div class="line">deb-src http://mirrors.sohu.com/ubuntu/ xenial-updates multiverse</div><div class="line">deb http://mirrors.sohu.com/ubuntu/ xenial-backports main restricted universe multiverse</div><div class="line">deb-src http://mirrors.sohu.com/ubuntu/ xenial-backports main restricted universe multiverse</div><div class="line"></div><div class="line">deb http://mirror.bjtu.edu.cn/ubuntu/ xenial main multiverse restricted universe</div><div class="line">deb http://mirror.bjtu.edu.cn/ubuntu/ xenial-backports main multiverse restricted universe</div><div class="line">deb http://mirror.bjtu.edu.cn/ubuntu/ xenial-proposed main multiverse restricted universe</div><div class="line">deb http://mirror.bjtu.edu.cn/ubuntu/ xenial-security main multiverse restricted universe</div><div class="line">deb http://mirror.bjtu.edu.cn/ubuntu/ xenial-updates main multiverse restricted universe</div><div class="line">deb-src http://mirror.bjtu.edu.cn/ubuntu/ xenial main multiverse restricted universe</div><div class="line">deb-src http://mirror.bjtu.edu.cn/ubuntu/ xenial-backports main multiverse restricted universe</div><div class="line">deb-src http://mirror.bjtu.edu.cn/ubuntu/ xenial-proposed main multiverse restricted universe</div><div class="line">deb-src http://mirror.bjtu.edu.cn/ubuntu/ xenial-security main multiverse restricted universe</div><div class="line">deb-src http://mirror.bjtu.edu.cn/ubuntu/ xenial-updates main multiverse restricted universe</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div></pre></td></tr></table></figure>
<p>###1. 安装搜狗输入法</p>
<blockquote>
<p>sudo apt-get install fcitx libssh2-1</p>
</blockquote>
<p>####1.1 下载deb包</p>
<p>####1.2 安装</p>
<blockquote>
<p>sudo dpkg -i sogoupinyin_2.0.0.0072_amd64.deb</p>
<p>####1.3 设置<br>打开语言支持，键盘输入法系统选择fcitx。<br>    打开fcitx配置，添加搜狗输入法，注销后生效。</p>
</blockquote>
<p>###2. 安装Unity Tweak Tool<br>启动器图标单击收起。minimize single window applications on click</p>
<p>###3. 删除libreoffice</p>
<blockquote>
<p>sudo apt-get remove libreoffice-common</p>
<p>###4. 删除Amazon的链接<br>sudo apt-get remove unity-webapps-common</p>
<p>###5. 深度清理用不上的应用程序<br>sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku  landscape-client-ui-install</p>
<p>sudo apt-get remove onboard deja-dup</p>
</blockquote>
<p>###6. 安装Terminator</p>
<p>###7. 安装WPS Office<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dpkg -i wps-office_10.1.0.5444~a20_amd64.deb</div></pre></td></tr></table></figure></p>
<p>wps不能输入中文<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">sudo gedit /usr/bin/wps</div><div class="line"></div><div class="line">#!/bin/bash</div><div class="line">export XMODIFIERS=&quot;@im=fcitx&quot;</div><div class="line">export QT_IM_MODULE=&quot;fcitx&quot;</div><div class="line">gOpt=</div><div class="line">#gOptExt=-multiply</div><div class="line">gTemplateExt=(&quot;wpt&quot; &quot;dot&quot; &quot;dotx&quot;)</div></pre></td></tr></table></figure></p>
<p>###8. 安装git</p>
<blockquote>
<p>sudo apt-get install git</p>
<p>###9. 安装Java</p>
<p>###10. 安装字体</p>
<p>####10.1 将windows字体拷贝到/usr/share/fonts/windows/</p>
<p>####10.2 修改权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod 664 /usr/share/fonts/windows/*</div></pre></td></tr></table></figure></p>
</blockquote>
<p>####10.3 安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /usr/share/fonts/windows/</div><div class="line">sudo mkfontscale</div><div class="line">sudo mkfontdir</div><div class="line">sudo fc-cache -fv</div></pre></td></tr></table></figure></p>
<p>###11. 安装haroopad<br>编辑区主题 paraiso-darkdark</p>
<p>###12. 安装unrar</p>
<blockquote>
<p>sudo apt-get install unrar</p>
<p>###13. 安装idea</p>
<p>###14. 安装mysql客户端navicat</p>
<p>###15. 安装maven</p>
<p>###16. 安装vmware</p>
<p>###17. 安装docker 未完成</p>
<p>###18. 安装node.js</p>
<p>###19. 安装gulp</p>
<p>###20. linux版百度网盘 bcloud</p>
<p>###21. thunderbird</p>
<p>####21.1 添加插件<br>Thunderbird Conversations<br>Manually Sort Folders<br>Color Folders<br>Extra Folder Columns<br>LookOut<br>ViewAbout<br>Theme Font &amp; Size Changer  </p>
</blockquote>
<p>####21.2 去除签名档之前的分割符<br>mail.identity.default.suppress_signature_separator=true</p>
<p>###22. 关闭系统错误报告</p>
<blockquote>
<p>sudo rm /var/crash/*<br>    sudo gedit /etc/default/apport</p>
</blockquote>
<p>修改enabled=1为enabled=0</p>
<p>###23. dash不搜索第三方应用</p>
<blockquote>
<p>wget -q -O - <a href="https://fixUbuntu.com/fixubuntu.sh" target="_blank" rel="external">https://fixUbuntu.com/fixubuntu.sh</a> | bash</p>
</blockquote>
<p>###24. chrome<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo wget https://repo.fdzh.org/chrome/google-chrome.list -P /etc/apt/sources.list.d/</div><div class="line">wget -q -O - https://dl.google.com/linux/linux_signing_key.pub  | sudo apt-key add -</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install google-chrome-stable</div></pre></td></tr></table></figure></p>
<h3 id="25-plank"><a href="#25-plank" class="headerlink" title="25. plank"></a>25. plank</h3><p>安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:docky-core/stable</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install plank</div></pre></td></tr></table></figure></p>
<p>设置开机启动<br>dash中搜索启动应用程序，添加plank路径/usr/bin/plank</p>
<h3 id="26-关闭utc"><a href="#26-关闭utc" class="headerlink" title="26. 关闭utc"></a>26. 关闭utc</h3><p>/etc/default/rcS<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">utc=no</div></pre></td></tr></table></figure></p>
<h3 id="27-uGet"><a href="#27-uGet" class="headerlink" title="27. uGet"></a>27. uGet</h3><h3 id="28-fileZilla"><a href="#28-fileZilla" class="headerlink" title="28. fileZilla"></a>28. fileZilla</h3><h3 id="29-MySQL-Workbench"><a href="#29-MySQL-Workbench" class="headerlink" title="29. MySQL Workbench"></a>29. MySQL Workbench</h3>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Elasticsearch 检索]]></title>
      <url>http://bysonline.github.io/2016/07/15/Elasticsearch-%E6%A3%80%E7%B4%A2/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<h3 id="1-精确查询"><a href="#1-精确查询" class="headerlink" title="1. 精确查询"></a>1. 精确查询</h3><pre><code>public void query(String name, String queryString){
    QueryBuilder queryBuilder = QueryBuilders.queryString(queryString).field(name);
    SearchResponse response = client.prepareSearch(index).setTypes(type)
            .setQuery(queryBuilder).execute().actionGet();
    System.out.println(response.getHits().totalHits());//命中个数
    System.out.println(response.getHits().getAt(0).getId());//获取id
    System.out.println(response.getHits().getAt(0).getSource().get(&quot;column&quot;));//获取column的值
    System.out.println(response.toString());//结果json串
}
</code></pre><h3 id="2-范围查询"><a href="#2-范围查询" class="headerlink" title="2. 范围查询"></a>2. 范围查询</h3><pre><code>public void queryRange(String name, String start, String end){
    QueryBuilder queryBuilder = QueryBuilders.rangeQuery(name).from(start).to(end);
    SearchResponse response = client.prepareSearch(index).setTypes(type)
            .setQuery(queryBuilder).execute().actionGet();
    System.out.println(response.getHits().totalHits());
    System.out.println(response.getHits().getAt(0).getId());
    System.out.println(response.getHits().getAt(0).getSource().get(&quot;column&quot;));
    System.out.println(response.toString());
}
</code></pre><h3 id="3-分页"><a href="#3-分页" class="headerlink" title="3. 分页"></a>3. 分页</h3><pre><code>public void queryPagination(int begin, int pageSize){
    QueryBuilder queryBuilder = QueryBuilders.rangeQuery(&quot;date&quot;).from(&quot;20150101&quot;).to(&quot;20160101&quot;);
    SearchResponse response = client.prepareSearch(index).setTypes(type).setFrom(begin).setSize(pageSize)
            .setQuery(queryBuilder).execute().actionGet();
    System.out.println(response.getHits().totalHits());
    System.out.println(response.getHits().getAt(0).getId());
    System.out.println(response.getHits().getAt(0).getSource().get(&quot;column&quot;));
    System.out.println(response.toString());
}
</code></pre><h3 id="4-组合查询"><a href="#4-组合查询" class="headerlink" title="4. 组合查询"></a>4. 组合查询</h3><pre><code>public void queryComplex(){
    //查询date在20150101到20160101之间并且pripid等于510000_CD6022264999并且变更字段为PRIPERSON的记录
    final BoolQueryBuilder query = new BoolQueryBuilder();
    query.must(QueryBuilders.queryString(&quot;510000_CD6022264999&quot;).field(&quot;pripid&quot;));
    query.must(QueryBuilders.rangeQuery(&quot;date&quot;).from(&quot;20150101&quot;).to(&quot;20160101&quot;));
    query.must(QueryBuilders.queryString(&quot;PRIPERSON&quot;).field(&quot;column&quot;));

    SearchResponse response = client.prepareSearch(index).setTypes(type)
            .setQuery(query)
            .execute().actionGet();
    long hits = response.getHits().totalHits();
    if(hits &gt; 0) {
        System.out.println(response.getHits().getAt(0).getId());
        System.out.println(response.getHits().getAt(0).getSource().get(&quot;column&quot;));
        System.out.println(response.toString());
    }
}
</code></pre><h3 id="5-前缀查询"><a href="#5-前缀查询" class="headerlink" title="5. 前缀查询"></a>5. 前缀查询</h3><pre><code>public void queryByPrefix(String name, String prefix){
    QueryBuilder queryBuilder = QueryBuilders.prefixQuery(name, prefix);
    SearchResponse response = client.prepareSearch(index).setTypes(type)
            .setQuery(queryBuilder).execute().actionGet();
    System.out.println(response.getHits().totalHits());
}
</code></pre><h3 id="6-id查询"><a href="#6-id查询" class="headerlink" title="6. id查询"></a>6. id查询</h3><pre><code>public void queryIds(String... ids){
    QueryBuilder queryBuilder = QueryBuilders.idsQuery(type).addIds(ids);
    SearchResponse response = client.prepareSearch(index)
            .setQuery(queryBuilder).execute().actionGet();
    System.out.println(response.getHits().totalHits());
    System.out.println(response.getHits().getAt(0).getId());
    System.out.println(response.getHits().getAt(0).getSource().get(&quot;column&quot;));
    System.out.println(response.toString());
}
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ELK 日志分析系统搭建和使用]]></title>
      <url>http://bysonline.github.io/2016/07/15/ELK-%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<h3 id="1-下载-logstash"><a href="#1-下载-logstash" class="headerlink" title="1. 下载 logstash"></a>1. 下载 logstash</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker pull logstash</div></pre></td></tr></table></figure>
<h3 id="2-下载-elasticsearch"><a href="#2-下载-elasticsearch" class="headerlink" title="2. 下载 elasticsearch"></a>2. 下载 elasticsearch</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker pull elasticsearch</div></pre></td></tr></table></figure>
<h3 id="3-下载-kibana"><a href="#3-下载-kibana" class="headerlink" title="3. 下载 kibana"></a>3. 下载 kibana</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker pull kibana</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[使用 docker + redis 学习 redis-cli]]></title>
      <url>http://bysonline.github.io/2016/07/15/%E4%BD%BF%E7%94%A8-docker-+-redis-%E5%AD%A6%E4%B9%A0-redis-cli/</url>
      <content type="html"><![CDATA[<p>有时我们不想在自己机器上安装redis环境又想快速开始redis-cli实践，如果安装了docker环境，那么redis的环境将非常容易搭建。</p>
<h3 id="1-下载redis的docker镜像"><a href="#1-下载redis的docker镜像" class="headerlink" title="1. 下载redis的docker镜像"></a>1. 下载redis的docker镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker pull redis</div></pre></td></tr></table></figure>
<h3 id="2-启动redis-server"><a href="#2-启动redis-server" class="headerlink" title="2. 启动redis server"></a>2. 启动redis server</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker run -d --name redisone redis redis-server</div></pre></td></tr></table></figure>
<h3 id="3-启动redis-cli"><a href="#3-启动redis-cli" class="headerlink" title="3. 启动redis cli"></a>3. 启动redis cli</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker run -it --link redisone redis redic-cli -h redisone -p 6379</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[dataengine框架结构]]></title>
      <url>http://bysonline.github.io/2016/07/15/DataEngine-%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E/</url>
      <content type="html"><![CDATA[<h3 id="1-数据流"><a href="#1-数据流" class="headerlink" title="1. 数据流"></a>1. 数据流</h3><p>hdfs到hbase</p>
<pre><code>HDFS-&gt;HDFSDataProvider-&gt;*DataProvider-&gt;HbaseListener-&gt;hbase
</code></pre><p>hbase到hbase</p>
<pre><code>HBase-&gt;HBaseDataProvider-&gt;*DataProvider-&gt;HbaseListener-&gt;hbase
</code></pre><p>部署<br>=</p>
<p>####执行脚本<br>    data_loader.sh E_ENT_BASEINFO 20150510 hdfs://chinadaas11:8020/hive1/user/hive/warehouse/enterprisebaseinfocollect_20150510_compare/</p>
<pre><code>data_loader.sh E_INV_INVESTMENT 20150510 hdfs://chinadaas11:8020/hive1/user/hive/warehouse/e_inv_investment_20150510_compare/

data_loader.sh E_PRI_PERSON 20150510 hdfs://chinadaas11:8020/hive1/user/hive/warehouse/e_pri_person_20150510_compare/

data_loader.sh E_GT_BASEINFO 20150510 hdfs://chinadaas11:8020/hive1/user/hive/warehouse/e_gt_baseinfo_20150510_compare/

data_loader.sh E_GT_PERSON 20150510 hdfs://chinadaas11:8020/hive1/user/hive/warehouse/e_gt_person_20150510_compare/

data_loader.sh DIS_SXBZXR 20150510 dis_sxbzxr_new_name

data_loader.sh FROST 20150510 frost_pripid

data_loader.sh IMPAWN 20150510 impawn_pripid

data_loader.sh XZCF 20150510 xzcf_pripid
</code></pre><p>http接口说明<br>=</p>
<p>####1. CL:根据用户id查监控的变更企业列表</p>
<p>#####1.1 接口说明<br>本接口用于获取用户监控名单中发生变更的企业列表。</p>
<p>#####1.2 请求类型<br>GET</p>
<p>#####1.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||<br>|uid|用户id<br>|form|起始记录<br>|to|结束记录</p>
<blockquote>
<p>业务类型参考附录1<br>起始from为0，to-from默认为10</p>
</blockquote>
<p>#####1.4 返回结果<br>参数|说明<br>-|-<br>uid|用户请求时携带的用户id<br>total|总记录数<br>begin|查询的起始记录<br>end|查询的结束记录<br>ents|用户监控名单中变更的企业的pripid列表</p>
<blockquote>
<p>返回结果为JSON格式</p>
<p>#####1.5 示例<br>请求：</p>
</blockquote>
<pre><code>GET http://localhost:8080/datum/changes?
{
    &quot;type&quot;: &quot;cl&quot;,
    &quot;params&quot;: {
        &quot;uid&quot;: &quot;61301&quot;,
        &quot;from&quot;: 1,
        &quot;to&quot;: 4
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;uid&quot;: &quot;61301&quot;,
    &quot;total&quot;: 84,
    &quot;begin&quot;: 1,
    &quot;end&quot;: 5,
    &quot;ents&quot;: [
        &quot;110000_17DBF8047B3244ADBFB8EDB2B964B9FA&quot;,
        &quot;210000_0475ba9b-491b-415d-964b-4d6be6b88476&quot;,
        &quot;210000_0a591f44-3030-4171-aa88-7fea64c5254c&quot;,
        &quot;520000_5201005000023769&quot;
    ]
}
</code></pre><p>####2. CD:根据用户id和企业pripid获取企业的变更详情</p>
<p>#####2.1 接口说明<br>本接口用于获取用户监控名单中发生变更的企业列表。</p>
<p>#####2.2 请求类型<br>GET</p>
<p>#####2.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||参数<br>|uid|用户id<br>|pripid|企业pripid<br>|provider|查询的数据源类型</p>
<blockquote>
<p>数据源类型参考附录2</p>
<p>#####2.4 返回结果<br>参数|说明<br>-|-<br>uid|用户请求时携带的用户id<br>ent|用户请求时携带的企业pripid<br>provider|用户请求时携带的数据源类型<br>changeItems|企业变更详情根节点<br>column|变更字段<br>oldValue|变更前值<br>newValue|变更后值<br>type|变更类型</p>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####2.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/changes?
{
    &quot;type&quot;: &quot;cd&quot;,
    &quot;params&quot;: {
        &quot;uid&quot;: &quot;61301&quot;,
        &quot;pripid&quot;: &quot;210000_210200000022001120400213&quot;,
        &quot;provider&quot;: &quot;A&quot;
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;uid&quot;: &quot;61301&quot;,
    &quot;ent&quot;: &quot;210000_0475ba9b-491b-415d-964b-4d6be6b88476&quot;,
    &quot;provider&quot;: &quot;A&quot;,
    &quot;changeItems&quot;: [
        {
            &quot;column&quot;: &quot;INDUSTRYPHY&quot;,
            &quot;newValue&quot;: &quot;H&quot;,
            &quot;oldValue&quot;: &quot;F&quot;,
            &quot;type&quot;: &quot;UPDATE&quot;
        }
    ]
}
</code></pre><p>####3. QO:根据订单id获取订单快照</p>
<p>#####3.1 接口说明<br>本接口用于获取指定id的订单快照信息。</p>
<p>#####3.2 请求类型<br>GET</p>
<p>#####3.3 输入参数<br>参数|说明<br>-|-<br>order|订单id</p>
<p>#####3.4 返回结果<br>参数|说明<br>-|-<br>orderId|用户请求时携带的订单id<br>info|订单信息</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####3.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/order/61301
</code></pre><p>响应：</p>
<pre><code>{
    &quot;orderId&quot;: &quot;61301&quot;,
    &quot;info&quot;: [
        {
        }
    ]
}
</code></pre><p>####4. SO:保存订单快照</p>
<p>#####4.1 接口说明<br>本接口用于保存订单快照信息。</p>
<p>#####4.2 请求类型<br>POST</p>
<p>#####4.3 输入参数<br>无</p>
<p>#####4.4 返回结果<br>参数|说明<br>-|-<br>orderId|订单id<br>status|操作状态，0保存成功，1保存失败</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####4.5 示例<br>请求：</p>
<pre><code>POST http://localhost:8080/datum/order
{
    &quot;orderId&quot;: &quot;SDFYGTYYTUUUWQ&quot;,
    &quot;snapshot&quot;: &quot;ORDER INFO&quot;
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;orderId&quot;: &quot;SDFYGTYYTUUUWQ&quot;,
    &quot;status&quot;: 0
}
</code></pre><p>####5.CH:查询变更历史</p>
<p>#####5.1 接口说明<br>本接口用于查询一段时间内监控企业的变更历史。</p>
<p>#####5.2 请求类型<br>GET</p>
<p>#####5.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||请求参数<br>|uid|用户id<br>|pripid|企业pripid<br>|startDate|开始日期<br>|endDate|结束日期</p>
<p>#####5.4 返回结果<br>参数|||说明<br>-|-|-|<br>uid|||用户id<br>pripid|||企业pripid<br>history|||变更历史<br>|date||时间<br>|changeItem||变更项<br>||column|数据源类型<br>||type|变更类型<br>||oldValue|旧值<br>||newValue|新值</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####5.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/changes?
{
    &quot;type&quot;: &quot;ch&quot;,
    &quot;params&quot;: {
        &quot;uid&quot;: &quot;31834&quot;,
        &quot;pripid&quot;: &quot;210000_210200000022002082100109&quot;,
        &quot;startDate&quot;: &quot;20150101&quot;,
        &quot;endDate&quot;: &quot;20160101&quot;
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;uid&quot;: &quot;31834&quot;,
    &quot;pripid&quot;: &quot;210000_210200000022002082100109&quot;,
    &quot;history&quot;: [
        {
            &quot;date&quot;: &quot;20151214&quot;,
            &quot;changeItems&quot;: [
                {
                    &quot;column&quot;: &quot;S_EXT_SEQUENCE&quot;,
                    &quot;newValue&quot;: &quot;210000201505072002331631&quot;,
                    &quot;oldValue&quot;: &quot;210000201510092065303796&quot;,
                    &quot;type&quot;: &quot;UPDATE&quot;
                },
                {
                    &quot;column&quot;: &quot;S_EXT_TIMESTAMP&quot;,
                    &quot;newValue&quot;: &quot;2015-05-07 06:57:34.0&quot;,
                    &quot;oldValue&quot;: &quot;2015-10-09 05:38:08.0&quot;,
                    &quot;type&quot;: &quot;UPDATE&quot;
                },
                {
                    &quot;column&quot;: &quot;CERTYPE&quot;,
                    &quot;newValue&quot;: &quot;!&quot;,
                    &quot;oldValue&quot;: &quot;1&quot;,
                    &quot;type&quot;: &quot;UPDATE&quot;
                },
                {
                    &quot;column&quot;: &quot;ABUITEM&quot;,
                    &quot;newValue&quot;: &quot;&quot;,
                    &quot;oldValue&quot;: &quot;210213061&quot;,
                    &quot;type&quot;: &quot;UPDATE&quot;
                }
            ]
        }
    ]
}
</code></pre><p>####6.QA:查询企业基本信息</p>
<p>#####6.1 接口说明<br>本接口用于查询企业基本信息。</p>
<p>#####6.2 请求类型<br>GET</p>
<p>#####6.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||请求参数<br>|pripid|企业pripid</p>
<p>#####6.4 返回结果<br>参数|说明<br>-|-<br>ENTNAME|企业名称<br>…|</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####6.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/query?
{
    &quot;type&quot;: &quot;qa&quot;,
    &quot;params&quot;: {
        &quot;pripid&quot;: &quot;210000_210200000022002082100109&quot;
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;version&quot;: 5,
    &quot;minSize&quot;: 75,
    &quot;S_EXT_NODENUM&quot;: &quot;&quot;,
    &quot;PRIPID&quot;: &quot;&quot;,
    &quot;S_EXT_SEQUENCE&quot;: &quot;&quot;,
    &quot;ENTNAME&quot;: &quot;大连站商场&quot;,
    &quot;ORIREGNO&quot;: &quot;&quot;,
    &quot;REGNO&quot;: &quot;24129465&quot;,
    &quot;ENTTYPE&quot;: &quot;3200&quot;,
    &quot;PPRIPID&quot;: &quot;&quot;,
    &quot;PENTNAME&quot;: &quot;&quot;,
    &quot;PREGNO&quot;: &quot;&quot;,
    &quot;HYPOTAXIS&quot;: &quot;&quot;,
    &quot;INDUSTRYPHY&quot;: &quot;F&quot;,
    &quot;INDUSTRYCO&quot;: &quot;5139&quot;,
    &quot;ABUITEM&quot;: &quot;&quot;,
    &quot;CBUITEM&quot;: &quot;&quot;,
    &quot;OPFROM&quot;: &quot;1899-12-30&quot;,
    &quot;OPTO&quot;: &quot;1899-12-30&quot;,
    &quot;POSTALCODE&quot;: &quot;&quot;,
    &quot;TEL&quot;: &quot;3631881-3157&quot;,
    &quot;EMAIL&quot;: &quot;&quot;,
    &quot;LOCALADM&quot;: &quot;210200&quot;,
    &quot;CREDLEVEL&quot;: &quot;&quot;,
    &quot;ASSDATE&quot;: &quot;1900-01-01&quot;,
    &quot;ESDATE&quot;: &quot;1899-12-30&quot;,
    &quot;APPRDATE&quot;: &quot;1899-12-30&quot;,
    &quot;REGORG&quot;: &quot;210200&quot;,
    &quot;ENTCAT&quot;: &quot;1&quot;,
    &quot;ENTSTATUS&quot;: &quot;3&quot;,
    &quot;REGCAP&quot;: &quot;10&quot;,
    &quot;OPSCOPE&quot;: &quot;百货&quot;,
    &quot;OPFORM&quot;: &quot;&quot;,
    &quot;OPSCOANDFORM&quot;: &quot;&quot;,
    &quot;PTBUSSCOPE&quot;: &quot;&quot;,
    &quot;DOMDISTRICT&quot;: &quot;210202&quot;,
    &quot;DOM&quot;: &quot;大连市中山区长江路２６１号&quot;,
    &quot;ECOTECDEVZONE&quot;: &quot;&quot;,
    &quot;DOMPRORIGHT&quot;: &quot;02&quot;,
    &quot;OPLOCDISTRICT&quot;: &quot;&quot;,
    &quot;OPLOC&quot;: &quot;&quot;,
    &quot;RECCAP&quot;: &quot;0&quot;,
    &quot;INSFORM&quot;: &quot;&quot;,
    &quot;PARNUM&quot;: &quot;0&quot;,
    &quot;PARFORM&quot;: &quot;&quot;,
    &quot;EXENUM&quot;: &quot;0&quot;,
    &quot;EMPNUM&quot;: &quot;0&quot;,
    &quot;SCONFORM&quot;: &quot;&quot;,
    &quot;FORCAPINDCODE&quot;: &quot;&quot;,
    &quot;MIDPREINDCODE&quot;: &quot;&quot;,
    &quot;PROTYPE&quot;: &quot;&quot;,
    &quot;CONGRO&quot;: &quot;0&quot;,
    &quot;CONGROCUR&quot;: &quot;&quot;,
    &quot;CONGROUSD&quot;: &quot;0&quot;,
    &quot;REGCAPUSD&quot;: &quot;0&quot;,
    &quot;REGCAPCUR&quot;: &quot;&quot;,
    &quot;REGCAPRMB&quot;: &quot;0&quot;,
    &quot;FORREGCAPCUR&quot;: &quot;&quot;,
    &quot;FORREGCAPUSD&quot;: &quot;0&quot;,
    &quot;FORRECCAPUSD&quot;: &quot;0&quot;,
    &quot;WORCAP&quot;: &quot;0&quot;,
    &quot;CHAMECDATE&quot;: &quot;1900-01-01&quot;,
    &quot;OPRACTTYPE&quot;: &quot;&quot;,
    &quot;FORENTNAME&quot;: &quot;&quot;,
    &quot;DEPINCHA&quot;: &quot;大连市公安局&quot;,
    &quot;COUNTRY&quot;: &quot;&quot;,
    &quot;ITEMOFOPORCPRO&quot;: &quot;&quot;,
    &quot;CONOFCONTRPRO&quot;: &quot;&quot;,
    &quot;FORDOM&quot;: &quot;&quot;,
    &quot;FORREGECAP&quot;: &quot;0&quot;,
    &quot;FOROPSCOPE&quot;: &quot;&quot;,
    &quot;S_EXT_ENTPROPERTY&quot;: &quot;&quot;,
    &quot;S_EXT_TIMESTAMP&quot;: &quot;2015-05-07 06:57:34.0&quot;,
    &quot;S_EXT_BATCH&quot;: &quot;&quot;,
    &quot;S_EXT_VALIDFLAG&quot;: &quot;1&quot;,
    &quot;S_EXT_INDUSCAT&quot;: &quot;3&quot;,
    &quot;S_EXT_ENTTYPE&quot;: &quot;A02&quot;,
    &quot;MANACATE&quot;: &quot;&quot;,
    &quot;LIMPARNUM&quot;: &quot;0&quot;,
    &quot;FOREIGNBODYTYPE&quot;: &quot;&quot;,
    &quot;ENTNAME_OLD&quot;: &quot;大连站商场&quot;,
    &quot;PERSON_ID&quot;: &quot;&quot;,
    &quot;NAME&quot;: &quot;刘玉芳&quot;,
    &quot;CERTYPE&quot;: &quot;!&quot;,
    &quot;CERNO&quot;: &quot;&quot;,
    &quot;ANCHEYEAR&quot;: &quot;\\N&quot;,
    &quot;CANDATE&quot;: &quot;1996-10-11&quot;,
    &quot;REVDATE&quot;: &quot;\\N&quot;,
    &quot;RECORD_STAT&quot;: &quot;0&quot;,
    &quot;RECORD_DESC&quot;: &quot;&quot;,
    &quot;ORGCODES&quot;: &quot;&quot;,
    &quot;CREDITCODE&quot;: &quot;&quot;
}
</code></pre><p>####7.CA:按地区统计变更企业数量</p>
<p>#####7.1 接口说明<br>本接口用于按统计每个地区某一批次数据的变更企业数量。</p>
<p>#####7.2 请求类型<br>GET</p>
<p>#####7.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||请求参数<br>|uid|用户id<br>|date|批次</p>
<p>#####7.4 返回结果<br>参数|说明<br>-|-<br>uid|用户id<br>date|批次<br>data|<k,v>，k为地区代码，v为企业变更量</k,v></p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####7.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/countup?
{
    &quot;type&quot;: &quot;ca&quot;,
    &quot;params&quot;: {
        &quot;uid&quot;: &quot;61301&quot;,
        &quot;date&quot;: &quot;20151214&quot;
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;uid&quot;: &quot;61301&quot;,
    &quot;date&quot;: &quot;20151214&quot;,
    &quot;data&quot;: {
        &quot;210000&quot;: 490
    }
}
</code></pre><p>####8.CC:统计变更量</p>
<p>#####8.1 接口说明<br>本接口用于按统计某一批次数据的用户监控企业的字段变更量。</p>
<p>#####8.2 请求类型<br>GET</p>
<p>#####8.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||请求参数<br>|uid|用户id<br>|date|批次</p>
<p>#####8.4 返回结果<br>参数|说明<br>-|-<br>uid|用户id<br>date|批次<br>count|字段变更量</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####8.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/countup?
{
    &quot;type&quot;: &quot;cc&quot;,
    &quot;params&quot;: {
        &quot;uid&quot;: &quot;61301&quot;,
        &quot;date&quot;: &quot;20151214&quot;
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;uid&quot;: &quot;61301&quot;,
    &quot;date&quot;: &quot;20151214&quot;,
    &quot;count&quot;: 4486
}
</code></pre><p>####9.CI:按指标统计企业变更数量</p>
<p>#####9.1 接口说明<br>本接口用于按统计某一批次数据的某些指标变更的企业。</p>
<p>#####9.2 请求类型<br>GET</p>
<p>#####9.3 输入参数<br>参数||说明<br>-|-|-<br>type||业务类型<br>params||请求参数<br>|uid|用户id<br>|date|批次</p>
<p>#####9.4 返回结果<br>参数|说明<br>-|-<br>uid|用户id<br>date|批次<br>count|企业变更数量<br>ents|数组，企业pirpid</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####9.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/countup?
{
    &quot;type&quot;: &quot;ci&quot;,
    &quot;params&quot;: {
        &quot;uid&quot;: &quot;61301&quot;,
        &quot;date&quot;: &quot;20151214&quot;,
        &quot;indicators&quot;: [
            &quot;ABUITEM&quot;,
            &quot;REGORG&quot;
        ]
    }
}
</code></pre><p>响应：</p>
<pre><code>{
    &quot;uid&quot;: &quot;61301&quot;,
    &quot;date&quot;: &quot;20151214&quot;,
    &quot;count&quot;: 38,
    &quot;ents&quot;: [
        &quot;210000_21021100001200103070022X&quot;,
        &quot;210000_210283000022012011800252&quot;,
        ...
    ]
}
</code></pre><p>####10. SE:检索</p>
<p>#####10.1 接口说明<br>本接口用于提供模糊检索。查询字段为：名称，注册号、组织机构代码，统一社会信用代码。<br>命中规则：wd为检索关键字，名称中包含wd或注册号、组织机构代码、统计社会信用代码以wd开头的记录为命中。</p>
<p>#####10.2 请求类型<br>GET</p>
<p>#####10.3 输入参数<br>参数|说明<br>-|-<br>wd|检索的关键字</p>
<p>#####10.4 返回结果<br>参数||说明<br>-|-|<br>wd||检索的关键字<br>results||检索结果<br>|score|评分<br>|pripid|主体id<br>|ename|主体名称<br>|regNo|注册号<br>|orgCode|组织机构代码<br>|creditCode|统一社会信用代码</p>
<blockquote>
<p>返回结果为JSON格式</p>
</blockquote>
<p>#####10.5 示例<br>请求：</p>
<pre><code>GET http://localhost:8080/datum/search?wd=辽宁
</code></pre><p>响应：</p>
<pre><code>{
    &quot;wd&quot;: &quot;辽宁&quot;,
    &quot;results&quot;: [
        {
            &quot;score&quot;: 0.13453172,
            &quot;pripid&quot;: &quot;210000_210202000011998102800195&quot;,
            &quot;ename&quot;: &quot;辽宁书画院&quot;,
            &quot;regNo&quot;: &quot;210202000022199&quot;,
            &quot;orgCode&quot;: &quot;&quot;,
            &quot;creditCode&quot;: &quot;&quot;
        },
        {
            &quot;score&quot;: 0.13453172,
            &quot;pripid&quot;: &quot;210000_210282000011980120100222&quot;,
            &quot;ename&quot;: &quot;辽宁盐业机械厂&quot;,
            &quot;regNo&quot;: &quot;11873106&quot;,
            &quot;orgCode&quot;: &quot;&quot;,
            &quot;creditCode&quot;: &quot;&quot;
        },
        {
            &quot;score&quot;: 0.13453172,
            &quot;pripid&quot;: &quot;210000_210202000011961030100026&quot;,
            &quot;ename&quot;: &quot;辽宁电位器厂&quot;,
            &quot;regNo&quot;: &quot;2102021100676&quot;,
            &quot;orgCode&quot;: &quot;&quot;,
            &quot;creditCode&quot;: &quot;&quot;
        },
        {
            &quot;score&quot;: 0.13453172,
            &quot;pripid&quot;: &quot;210000_21020200001199308260074X&quot;,
            &quot;ename&quot;: &quot;辽宁万宁国际运输公司&quot;,
            &quot;regNo&quot;: &quot;2102021105329&quot;,
            &quot;orgCode&quot;: &quot;&quot;,
            &quot;creditCode&quot;: &quot;&quot;
        },
        {
            &quot;score&quot;: 0.13453172,
            &quot;pripid&quot;: &quot;210000_210211000011900010101767&quot;,
            &quot;ename&quot;: &quot;辽宁无线电二厂&quot;,
            &quot;regNo&quot;: &quot;11857934&quot;,
            &quot;orgCode&quot;: &quot;&quot;,
            &quot;creditCode&quot;: &quot;&quot;
        }
    ]
}
</code></pre><p>remote接口说明<br>=</p>
<p>####1. 使用方法<br>实例化com.daas.data.business.RemoteBusiness</p>
<pre><code>RemoteBusiness remoteBusiness = SpringUtil.getAc().getBean(RemoteBusiness.class);
</code></pre><p>####2. 方法说明</p>
<p>#####2.1 查询变更列表<br>    public Changes findChanges(String uid, int from, int to);</p>
<p>#####2.2 查询变更明细<br>    public ChangeDetails findDetails(String uid, String pripid, String provider);</p>
<p>#####2.3 查企业基本信息<br>    public EntInfo findEntInfo(String pripid);</p>
<p>#####2.4 抓取订单快照<br>    public Order fetch(String orderId);</p>
<p>#####2.5 保存订单快照<br>    public Order save(String orderId, String snapshot);</p>
<p>#####2.6 查询一段时间企业变更历史<br>    public History changeHistory(String uid, String pripid, String startDate, String endDate);</p>
<p>#####2.7 统计某批次用户监控企业的字段变更量（按变更字段统计，有一项变更计算一次）<br>    public CountUp countUpByChangeItem(String uid, String date);</p>
<p>#####2.8 指标统计<br>    public CountUp countUpByIndicator(String uid, String date, String… indicator);</p>
<p>#####2.9 按地区统计变更企业数量<br>    public CountUp countUpByArea(String uid, String date);</p>
<p>#####附录1：业务类型</p>
<table>
<thead>
<tr>
<th>业务名称</th>
<th>类型</th>
<th>代码</th>
</tr>
</thead>
<tbody>
<tr>
<td>查询基本信息</td>
<td>query</td>
</tr>
<tr>
<td>查询企业基本信息</td>
<td></td>
<td>qa</td>
</tr>
<tr>
<td>查询法人信息</td>
<td></td>
<td>qp</td>
</tr>
<tr>
<td>查询对外投资信息</td>
<td></td>
<td>qi</td>
</tr>
<tr>
<td>查询个体工商户信息</td>
<td></td>
<td>qb</td>
</tr>
<tr>
<td>查询个体经营者信息</td>
<td></td>
<td>qg</td>
</tr>
<tr>
<td>查询订单快照</td>
<td></td>
<td>qo</td>
</tr>
<tr>
<td>查询变更</td>
<td>changes</td>
<td></td>
</tr>
<tr>
<td>查询变更列表</td>
<td></td>
<td>cl</td>
</tr>
<tr>
<td>查询变更详情</td>
<td></td>
<td>cd</td>
</tr>
<tr>
<td>查询变更历史</td>
<td></td>
<td>ch</td>
</tr>
<tr>
<td>保存</td>
<td>save</td>
</tr>
<tr>
<td>保存订单快照</td>
<td></td>
<td>so</td>
</tr>
<tr>
<td>统计</td>
<td>countup</td>
<td></td>
</tr>
<tr>
<td>按地区统计</td>
<td></td>
<td>ca</td>
</tr>
<tr>
<td>按指标统计</td>
<td></td>
<td>ci</td>
</tr>
<tr>
<td>统计变更量</td>
<td></td>
<td>cc</td>
</tr>
<tr>
<td>检索</td>
<td>search</td>
<td>se</td>
</tr>
</tbody>
</table>
<p>#####附录2：数据源类型<br>数据源名称|英文|代码<br>-|-|-<br>企业基本信息|E_ENT_BASEINFO|A<br>主要人员信息|E_PRI_PERSON|B<br>对外投资|E_INV_INVESTMENT|C<br>个体工商户基本信息|E_GT_BASEINFO|D<br>个体经营者基本信息|E_GT_PERSON|E<br>股权冻结|FROST|G<br>股权出质|IMPAWN|H<br>行政处罚|XZCF|I<br>失信被执行人|DIS_SXBZXR|J<br>变更推送|PUSH_CHANGE|F</p>
<p>#####附录3：表</p>
<table>
<thead>
<tr>
<th>表名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>meta</td>
<td>元数据表</td>
</tr>
<tr>
<td>m_gs_change</td>
<td>工商数据变更汇总表</td>
</tr>
<tr>
<td>m_non_gs_change</td>
<td>非工商数据变更汇总表</td>
</tr>
<tr>
<td>p_change</td>
<td>变更推送表</td>
</tr>
<tr>
<td>xzcf_pripid</td>
<td>行政处罚索引表</td>
</tr>
<tr>
<td>xzcf</td>
<td>行政处罚数据表</td>
</tr>
<tr>
<td>frost_pripid</td>
<td>股权冻结索引表</td>
</tr>
<tr>
<td>frost</td>
<td>股权冻结数据表</td>
</tr>
<tr>
<td>impawn_pripid</td>
<td>股权出质索引表</td>
</tr>
<tr>
<td>impawn</td>
<td>股权出质数据表</td>
</tr>
<tr>
<td>dis_sxbzxr_new_name</td>
<td>失信被执行人索引表</td>
</tr>
<tr>
<td>ENTERPRISEBASEINFOCOLLECT<em>ENTNAME</em>$DATE</td>
<td>失信被执行人字典表</td>
</tr>
<tr>
<td>dis_sxbzxr_new</td>
<td>失信被执行人数据表</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Windows 安装 compass and scss]]></title>
      <url>http://bysonline.github.io/2016/07/15/Windows-%E5%AE%89%E8%A3%85-compass-and-scss/</url>
      <content type="html"><![CDATA[<h3 id="1-安装ruby"><a href="#1-安装ruby" class="headerlink" title="1. 安装ruby"></a>1. 安装ruby</h3><p>compass 是 ruby 的插件，需要先安装 ruby 环境。</p>
<ol>
<li>下载ruby</li>
</ol>
<p><a href="http://rubyinstaller.org/" target="_blank" rel="external">http://rubyinstaller.org/</a></p>
<ol>
<li>添加环境变量<br>安装完成后添加环境变量<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">RUBY_HOME=D:\Ruby23-x64</div><div class="line">path=$path;%RUBY_HOME%\bin</div></pre></td></tr></table></figure>
</li>
</ol>
<p>执行ruby -v 显示版本号则安装成功。</p>
<h3 id="2-添加证书"><a href="#2-添加证书" class="headerlink" title="2. 添加证书"></a>2. 添加证书</h3><ol>
<li>下载证书</li>
</ol>
<p>从<a href="http://curl.haxx.se/ca/cacert.pem" target="_blank" rel="external">http://curl.haxx.se/ca/cacert.pem</a>下载证书，保存到ruby安装目录。</p>
<ol>
<li>添加环境变量<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SSL_CERT_FILE=D:\Ruby23-x64\cacert.pem</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="3-修改源"><a href="#3-修改源" class="headerlink" title="3. 修改源"></a>3. 修改源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gem sources --remove https://rubygems.org/</div><div class="line">gem sources -a https://ruby.taobao.org/</div><div class="line">gem sources -l</div></pre></td></tr></table></figure>
<h3 id="4-安装compass"><a href="#4-安装compass" class="headerlink" title="4. 安装compass"></a>4. 安装compass</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem install compass</div></pre></td></tr></table></figure>
<p>sass -v显示版本号则安装成功。正常情况compass和scss都会安装。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[制作 docker 镜像：elasticsearch 添加 head 插件]]></title>
      <url>http://bysonline.github.io/2016/07/15/%E5%88%B6%E4%BD%9C%20docker%20%E9%95%9C%E5%83%8F%EF%BC%9Aelasticsearch%20%E6%B7%BB%E5%8A%A0%20head%20%E6%8F%92%E4%BB%B6/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<h3 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir dockerfiles/elasticsearch</div><div class="line">touch Dockerfile</div><div class="line">wget -O elasticsearch-head-master.zip -c https://codeload.github.com/mobz/elasticsearch-head/zip/master</div></pre></td></tr></table></figure>
<p><strong><em>Dockerfile</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">FROM elasticsearch</div><div class="line">MAINTAINER rolex</div><div class="line"></div><div class="line">ADD elasticsearch-head-master.zip /elasticsearch-head-master.zip</div><div class="line"></div><div class="line">RUN /usr/share/elasticsearch/bin/plugin install file:/elasticsearch-head-master.zip</div><div class="line"></div><div class="line">RUN rm -f /elasticsearch-head-master.zip</div><div class="line"></div><div class="line">EXPOSE 9200 9300</div><div class="line"></div><div class="line">CMD [/usr/share/elasticsearch/bin/elasticsearch]</div></pre></td></tr></table></figure></p>
<h3 id="2-创建docker镜像"><a href="#2-创建docker镜像" class="headerlink" title="2. 创建docker镜像"></a>2. 创建docker镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker build -t elasticsearch-2.3 .</div></pre></td></tr></table></figure>
<h3 id="3-启动"><a href="#3-启动" class="headerlink" title="3. 启动"></a>3. 启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker run elasticsearch-2.3 --publish=[19200:9200,19300:9300]</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[制作 docker 镜像：ubuntu14.04 + ssh 镜像]]></title>
      <url>http://bysonline.github.io/2016/07/15/%E5%88%B6%E4%BD%9C%20docker%20%E9%95%9C%E5%83%8F%EF%BC%9Aubuntu14.04%20+%20ssh%20%E9%95%9C%E5%83%8F/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<h3 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir ubuntu</div><div class="line">cd ubuntu</div><div class="line">touch Dockerfile run.sh sources.list authorized_keys</div></pre></td></tr></table></figure>
<p><strong><em>Dockerfile</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">FROM ubuntu:14.04</div><div class="line"></div><div class="line">MAINTAINER rolex</div><div class="line"></div><div class="line">RUN rm /etc/apt/sources.list</div><div class="line"></div><div class="line">ADD sources.list /etc/apt/sources.list</div><div class="line"></div><div class="line">RUN apt-get update</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">RUN sudo apt-get install -y openssh-server</div><div class="line">RUN mkdir -p /var/run/sshd</div><div class="line">RUN mkdir -p /root/.ssh</div><div class="line"></div><div class="line">RUN sed -ri &apos;s/session required pam_loginuid.so/#session required pam_loginuid.so/g&apos; /etc/pam.d/sshd</div><div class="line"></div><div class="line">ADD authorized_keys /root/.ssh/authorized_keys</div><div class="line">ADD run.sh /run.sh</div><div class="line">RUN chmod 755 /run.sh</div><div class="line"></div><div class="line">RUN groupadd dockerone</div><div class="line">RUN useradd -g dockerone dockerone</div><div class="line">RUN echo &quot;dockerone:dockerone&quot; | chpasswd</div><div class="line"></div><div class="line">RUN echo &quot;root:dockerone&quot; | chpasswd</div><div class="line"></div><div class="line">EXPOSE 22</div><div class="line"></div><div class="line">CMD [&quot;/run.sh&quot;]</div></pre></td></tr></table></figure></p>
<p><strong><em>run.sh</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">/usr/sbin/sshd -D</div></pre></td></tr></table></figure></p>
<p><strong><em>sources.list</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">deb http://mirrors.163.com/ubuntu/ trusty main restricted universe multiverse</div><div class="line">deb http://mirrors.163.com/ubuntu/ trusty-security main restricted universe multiverse</div><div class="line">deb http://mirrors.163.com/ubuntu/ trusty-updates main restricted universe multiverse</div><div class="line">deb http://mirrors.163.com/ubuntu/ trusty-proposed main restricted universe multiverse</div><div class="line">deb http://mirrors.163.com/ubuntu/ trusty-backports main restricted universe multiverse</div></pre></td></tr></table></figure></p>
<p><strong><em>authorized_keys</em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ssh-keygen -t rsa</div><div class="line">cat ~/.ssh/id_rsa.pub &gt; authorized_keys</div></pre></td></tr></table></figure>
<h3 id="2-创建镜像"><a href="#2-创建镜像" class="headerlink" title="2. 创建镜像"></a>2. 创建镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker build -t ubuntu_14.04 .</div></pre></td></tr></table></figure>
<h3 id="3-测试"><a href="#3-测试" class="headerlink" title="3. 测试"></a>3. 测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo docker run -d -p 10122:22 ubuntu_14.04</div><div class="line"></div><div class="line">ssh dockerone@localhost -p 10122</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[制作 docker 镜像：创建 tomcat 镜像]]></title>
      <url>http://bysonline.github.io/2016/07/15/%E5%88%B6%E4%BD%9C%20docker%20%E9%95%9C%E5%83%8F%EF%BC%9A%E5%88%9B%E5%BB%BA%20tomcat%20%E9%95%9C%E5%83%8F/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<h3 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1. 准备工作"></a>1. 准备工作</h3><h4 id="1-1-创建制作docker镜像的工作目录和文件"><a href="#1-1-创建制作docker镜像的工作目录和文件" class="headerlink" title="1.1 创建制作docker镜像的工作目录和文件"></a>1.1 创建制作docker镜像的工作目录和文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir dorckerfiles</div><div class="line">cd dockerfiles</div><div class="line">touch Dockerfile run.sh</div></pre></td></tr></table></figure>
<p><strong><em>Dockerfile</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">FROM ubuntu_14.04</div><div class="line"></div><div class="line">MAINTAINER rolex</div><div class="line"></div><div class="line">ENV DEBIAN_FRONTEND noninteractive</div><div class="line"></div><div class="line">RUN echo &quot;Asia/Beijing&quot; &gt; /etc/timezone &amp;&amp; dpkg-reconfigure -f noninteractive tzdata</div><div class="line"></div><div class="line">RUN apt-get install -yq --no-install-recommends wget pwgen ca-certificates &amp;&amp; apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*</div><div class="line"></div><div class="line">ENV CATALINA_HOME /tomcat</div><div class="line">ENV JAVA_HOME /jdk</div><div class="line"></div><div class="line">ADD apache-tomcat-8.0.35 /tomcat</div><div class="line">ADD jdk1.8.0_74 /jdk</div><div class="line"></div><div class="line">#ADD create_tomcat_admin_user.sh /create_tomcat_admin_user.sh</div><div class="line">ADD run.sh /run.sh</div><div class="line"></div><div class="line">RUN chmod +x /*.sh</div><div class="line">RUN chmod +x /tomcat/bin/*.sh</div><div class="line"></div><div class="line">EXPOSE 8080</div><div class="line"></div><div class="line">CMD [&quot;/run.sh&quot;]</div></pre></td></tr></table></figure></p>
<p><strong><em>run.sh</em></strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">/user/sbin/sshd -D &amp;</div><div class="line">exec $&#123;CATALINA_HOME&#125;/bin/catalina.sh run</div></pre></td></tr></table></figure></p>
<h4 id="1-2-下载tomcat和jdk"><a href="#1-2-下载tomcat和jdk" class="headerlink" title="1.2 下载tomcat和jdk"></a>1.2 下载tomcat和jdk</h4><h3 id="2-制作镜像"><a href="#2-制作镜像" class="headerlink" title="2. 制作镜像"></a>2. 制作镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker build -t tomcat8_on_ubuntu .</div></pre></td></tr></table></figure>
<h3 id="3-运行镜像"><a href="#3-运行镜像" class="headerlink" title="3. 运行镜像"></a>3. 运行镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker run -p 32700:8080 tomcat8_on_ubuntu</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spring-data-elasticsearch 示例说明]]></title>
      <url>http://bysonline.github.io/2016/07/15/Spring-data-elasticsearch%20%E7%A4%BA%E4%BE%8B/</url>
      <content type="html"><![CDATA[<h3 id="POM依赖"><a href="#POM依赖" class="headerlink" title="POM依赖"></a>POM依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;properties&gt;</div><div class="line">    &lt;java-version&gt;1.7&lt;/java-version&gt;</div><div class="line">    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</div><div class="line">    &lt;spring.version&gt;4.1.2.RELEASE&lt;/spring.version&gt;</div><div class="line">    &lt;elasticsearch.version&gt;1.4.4&lt;/elasticsearch.version&gt;</div><div class="line">    &lt;spring-data-elasticsearch.version&gt;1.3.4.RELEASE&lt;/spring-data-elasticsearch.version&gt;</div><div class="line">&lt;/properties&gt;</div><div class="line">&lt;dependencies&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;elasticsearch.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">    &lt;dependency&gt;</div><div class="line">        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;</div><div class="line">        &lt;artifactId&gt;spring-data-elasticsearch&lt;/artifactId&gt;</div><div class="line">        &lt;version&gt;$&#123;spring-data-elasticsearch.version&#125;&lt;/version&gt;</div><div class="line">    &lt;/dependency&gt;</div><div class="line">&lt;/dependencies&gt;</div></pre></td></tr></table></figure>
<h3 id="spring-配置文件"><a href="#spring-配置文件" class="headerlink" title="spring 配置文件"></a>spring 配置文件</h3><ol>
<li><p>beans.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</div><div class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</div><div class="line">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd&quot;&gt;</div><div class="line">    &lt;context:annotation-config /&gt;</div><div class="line">    &lt;!-- 自动扫描所有注解该路径 --&gt;</div><div class="line">    &lt;!-- &lt;context:component-scan base-package=&quot;com.sf.heros.mq.*&quot; /&gt; --&gt;</div><div class="line">    &lt;context:property-placeholder location=&quot;classpath:/config.properties&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;import resource=&quot;elasticsearch.xml&quot; /&gt;</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>elasticsearch.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</div><div class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">       xmlns:elasticsearch=&quot;http://www.springframework.org/schema/data/elasticsearch&quot;</div><div class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/data/elasticsearch http://www.springframework.org/schema/data/elasticsearch/spring-elasticsearch-1.0.xsd</div><div class="line">		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd&quot;&gt;</div><div class="line"></div><div class="line">    &lt;elasticsearch:transport-client id=&quot;client&quot; cluster-name=&quot;daas&quot; cluster-nodes=&quot;192.168.11.11:9300&quot;/&gt;</div><div class="line"></div><div class="line">    &lt;bean name=&quot;elasticsearchTemplate&quot; class=&quot;org.springframework.data.elasticsearch.core.ElasticsearchTemplate&quot;&gt;</div><div class="line">        &lt;constructor-arg name=&quot;client&quot; ref=&quot;client&quot;/&gt;</div><div class="line">    &lt;/bean&gt;</div><div class="line">    &lt;bean name=&quot;entQueryService&quot; class=&quot;com.rolex.se.sample.service.EntQueryService&quot;&gt;</div><div class="line">        &lt;property name=&quot;repository&quot; ref=&quot;entQueryRepository&quot;/&gt;</div><div class="line">        &lt;property name=&quot;elasticsearchTemplate&quot; ref=&quot;elasticsearchTemplate&quot;/&gt;</div><div class="line">    &lt;/bean&gt;</div><div class="line"></div><div class="line">    &lt;elasticsearch:repositories base-package=&quot;com.rolex.se.sample.dao&quot;/&gt;</div><div class="line">&lt;/beans&gt;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><ol>
<li><p>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.data.annotation.Id;</div><div class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.annotations.*;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="meta">@Document</span>(indexName = <span class="string">"pen"</span>,type = <span class="string">"pen"</span> , shards = <span class="number">1</span>, replicas = <span class="number">0</span>, indexStoreType = <span class="string">"memory"</span>, refreshInterval = <span class="string">"-1"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pen</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Id</span></div><div class="line">    <span class="keyword">private</span> String id;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> Long price;</div><div class="line">    <span class="meta">@Field</span>(type = FieldType.String, index = FieldIndex.not_analyzed)</div><div class="line">	<span class="keyword">private</span> Set&lt;String&gt; type = <span class="keyword">new</span> HashSet&lt;String&gt;();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">getType</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setType</span><span class="params">(Set&lt;String&gt; type)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.type = type;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pen</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Pen</span><span class="params">(String id, String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> price;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(Long price)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.price = price;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>查询类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.entities.Pen;</div><div class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.repository.ElasticsearchRepository;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PenRepository</span> <span class="keyword">extends</span> <span class="title">ElasticsearchRepository</span>&lt;<span class="title">Pen</span>,<span class="title">String</span>&gt; </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> org.elasticsearch.index.query.BoolQueryBuilder;</div><div class="line"><span class="keyword">import</span> org.elasticsearch.index.query.QueryBuilders;</div><div class="line"><span class="keyword">import</span> org.junit.Before;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</div><div class="line"><span class="keyword">import</span> org.springframework.data.elasticsearch.entities.Pen;</div><div class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</div><div class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"><span class="keyword">import</span> java.util.*;</div><div class="line"></div><div class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class="line"><span class="meta">@ContextConfiguration</span>(<span class="string">"classpath:/springContext-test.xml"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PenRepositoryTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Resource</span></div><div class="line">    <span class="keyword">private</span> PenRepository penRepository;</div><div class="line"></div><div class="line">    <span class="meta">@Before</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">emptyData</span><span class="params">()</span></span>&#123;</div><div class="line">        penRepository.deleteAll();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldIndexSingleBookEntity</span><span class="params">()</span></span>&#123;</div><div class="line"></div><div class="line">        Pen pen = <span class="keyword">new</span> Pen();</div><div class="line">        pen.setId(<span class="string">"123455"</span>);</div><div class="line">        pen.setName(<span class="string">"LIMY"</span>);</div><div class="line">        Set&lt;String&gt; types = <span class="keyword">new</span> HashSet&lt;String&gt;();</div><div class="line">        types.add(<span class="string">"E_PRI_PERSON.NAME"</span>);</div><div class="line">        types.add(<span class="string">"E_INV_INVESTMENT.SUBCONAM"</span>);</div><div class="line">        pen.setType(types);</div><div class="line">        <span class="comment">//Indexing using sampleArticleRepository</span></div><div class="line">        penRepository.save(pen);</div><div class="line">        <span class="comment">//lets try to search same record in elasticsearch</span></div><div class="line">        Pen pen2 = penRepository.findOne(pen.getId());</div><div class="line"></div><div class="line">        BoolQueryBuilder query = QueryBuilders.boolQuery();</div><div class="line">            query.must(QueryBuilders.queryString(<span class="string">"E_PRI_PERSON.NAME"</span>).field(<span class="string">"pen.type"</span>))</div><div class="line">            .must(QueryBuilders.queryString(<span class="string">"E_INV_INVESTMENT.SUBCONAM"</span>).field(<span class="string">"pen.type"</span>));</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">        Iterable&lt;Pen&gt; res = penRepository.search(query);</div><div class="line"></div><div class="line">        Iterator&lt;Pen&gt; it = res.iterator();</div><div class="line"></div><div class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</div><div class="line">            System.out.println(it.next().getType());</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[IDEA + Maven + Jetty 热部署]]></title>
      <url>http://bysonline.github.io/2016/07/15/IDEA-+-Maven-+-Jetty-%E7%83%AD%E9%83%A8%E7%BD%B2/</url>
      <content type="html"><![CDATA[<p>####1. 集成</p>
<p>pom.xml</p>
<pre><code>&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;
            &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;8.1.15.v20140411&lt;/version&gt;
            &lt;configuration&gt;
                &lt;connectors&gt;
                    &lt;!-- 修改端口 --&gt;
                    &lt;connector implementation=&quot;org.eclipse.jetty.server.nio.SelectChannelConnector&quot;&gt;
                        &lt;port&gt;8080&lt;/port&gt;
                    &lt;/connector&gt;
                &lt;/connectors&gt;
                &lt;stopKey&gt;exit&lt;/stopKey&gt;
                &lt;stopPort&gt;9090&lt;/stopPort&gt;
                &lt;scanIntervalSeconds&gt;10&lt;/scanIntervalSeconds&gt;
                &lt;webAppConfig&gt;
                    &lt;!-- 热部署 --&gt;
                    &lt;defaultsDescriptor&gt;src/main/resources/webdefault.xml&lt;/defaultsDescriptor&gt;
                    &lt;contextPath&gt;/redis-doc&lt;/contextPath&gt;
                &lt;/webAppConfig&gt;
            &lt;/configuration&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[spring-data-redis示例说明]]></title>
      <url>http://bysonline.github.io/2016/07/15/Spring-data-redis%20%E7%A4%BA%E4%BE%8B/</url>
      <content type="html"><![CDATA[<p>####1. POM</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
    &lt;artifactId&gt;spring-data-redis&lt;/artifactId&gt;
    &lt;version&gt;1.6.4.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;redis.clients&lt;/groupId&gt;
    &lt;artifactId&gt;jedis&lt;/artifactId&gt;
    &lt;version&gt;2.6.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>####2. 配置文件</p>
<p>#####2.1 redis.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;


    &lt;context:property-placeholder location=&quot;classpath:config.properties&quot;/&gt;
    &lt;bean id=&quot;jedisPoolConfig&quot; class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt;
        &lt;property name=&quot;maxTotal&quot; value=&quot;${redis.cache.pool.maxTotal}&quot; /&gt;
        &lt;property name=&quot;maxIdle&quot; value=&quot;${redis.cache.pool.maxIdle}&quot; /&gt;
        &lt;property name=&quot;maxWaitMillis&quot; value=&quot;${redis.cache.pool.maxWaitMillis}&quot; /&gt;
        &lt;property name=&quot;testOnBorrow&quot; value=&quot;${redis.cache.pool.testOnBorrow}&quot; /&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;redisTemplate&quot; class=&quot;org.springframework.data.redis.core.RedisTemplate&quot;&gt;
        &lt;property name=&quot;keySerializer&quot;&gt;
            &lt;bean class=&quot;org.springframework.data.redis.serializer.StringRedisSerializer&quot;/&gt;
        &lt;/property&gt;
        &lt;property name=&quot;valueSerializer&quot;&gt;
            &lt;bean class=&quot;org.springframework.data.redis.serializer.JdkSerializationRedisSerializer&quot;/&gt;
        &lt;/property&gt;
        &lt;property name=&quot;connectionFactory&quot; ref=&quot;jedisConnectionFactory&quot;/&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;jedisConnectionFactory&quot; class=&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;&gt;
        &lt;property name=&quot;hostName&quot; value=&quot;${redis.cache.ip}&quot; /&gt;
        &lt;property name=&quot;port&quot; value=&quot;${redis.cache.port}&quot; /&gt;
        &lt;property name=&quot;usePool&quot; value=&quot;${redis.cache.usePool}&quot;/&gt;
        &lt;property name=&quot;poolConfig&quot; ref=&quot;jedisPoolConfig&quot; /&gt;
    &lt;/bean&gt;

    &lt;bean id=&quot;queryCacheRepository&quot; class=&quot;com.daas.data.dao.repository.QueryCacheRepository&quot;&gt;&lt;/bean&gt;

&lt;/beans&gt;
</code></pre><p>#####2.2 properties文件</p>
<pre><code>#redis配置
redis.cache.pool.maxTotal=1024
redis.cache.pool.maxIdle=200
redis.cache.pool.maxWaitMillis=1000
redis.cache.pool.testOnBorrow=true
redis.cache.ip=192.168.11.21
redis.cache.port=6379
redis.cache.usePool=true
</code></pre><p>####3. 类</p>
<p>#####3.1 实体类<br>    /*</p>
<pre><code> * @(#)QueryCache.java    1.0 2016/3/8
 *
 */
package com.daas.data.engine.entity.redis;

import java.io.Serializable;

/**
 * Created with IntelliJ IDEA.
 * User: rolex
 * Date: 2016/3/8
 * version: 1.0
 */
public class QueryCache implements Serializable{

    String id;
    String value;

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }
}
</code></pre><p>#####3.2 查询类</p>
<pre><code>/*
 * @(#)QueryCacheRepository.java    1.0 2016/3/8
 *
 */
package com.daas.data.dao.repository;

import com.daas.data.engine.entity.redis.QueryCache;
import org.springframework.data.redis.core.RedisTemplate;

import javax.annotation.Resource;

/**
 * Created with IntelliJ IDEA.
 * User: rolex
 * Date: 2016/3/8
 * version: 1.0
 */
public class QueryCacheRepository {

    @Resource
    private RedisTemplate&lt;String, QueryCache&gt; redisTemplate;

    public void set(QueryCache qc){
        redisTemplate.opsForValue().set(qc.getId(), qc);

    }

    public QueryCache get(String id){
        return redisTemplate.opsForValue().get(id);
    }
}
</code></pre><p>#####3.3 测试类</p>
<pre><code>/*
 * @(#)DataBusinessTest.java    1.0 2016/3/4
 *
 */
package com.daas.data.business;

import com.daas.data.dao.repository.QueryCacheRepository;
import com.daas.data.engine.entity.redis.QueryCache;
import org.elasticsearch.search.aggregations.InternalAggregation;
import org.hamcrest.core.IsEqual;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import javax.annotation.Resource;
import java.io.IOException;

import static org.junit.Assert.assertThat;


/**
 * Created with IntelliJ IDEA.
 * User: rolex
 * Date: 2016/3/4
 * version: 1.0
 */
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(&quot;classpath:redis-test.xml&quot;)
public class RedisServiceTest {


    @Resource
    QueryCacheRepository queryCacheRepository;

    @Before
    public void before() {
        QueryCache qc = new QueryCache();
        qc.setId(&quot;123&quot;);
        qc.setValue(&quot;test&quot;);
        queryCacheRepository.set(qc);
    }

    @Test
    public void testGet() throws IOException {
        QueryCache qc = queryCacheRepository.get(&quot;123&quot;);
        System.out.println(qc.getValue());
        assertThat(qc.getValue(), new IsEqual(&quot;test&quot;));

    }

}
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[github + hexo 搭建 markdown 博客系统]]></title>
      <url>http://bysonline.github.io/2016/07/14/Github-+-Hexo-%E6%90%AD%E5%BB%BA-Markdown-%E5%8D%9A%E5%AE%A2%E7%B3%BB%E7%BB%9F/</url>
      <content type="html"><![CDATA[<p>为了更好的积累和保存学习笔记，需要满足以下要求：</p>
<ol>
<li>免费；</li>
<li>界面漂亮</li>
<li>能使用markdown语法书写；</li>
<li>能够导出到evernote。</li>
</ol>
<p>试了很多markdown的博客系统，在线编辑器，markdown软件，都无法满足，后来发现了Hexo。</p>
<p>Hexo是一个 markdown 博客系统，初步了解优点如下：</p>
<ol>
<li>没有数据库，直接保存 markdown 文件，所以迁移应该很方便；</li>
<li>可以自选theme；</li>
<li>在没有网络主机的情况下，可在本地搭建博客系统，通过github页可以实现远程备份；</li>
<li>开源。</li>
</ol>
<p>以上基本可以满足个人需求。</p>
<h2 id="如何搭建本地Hexo环境？"><a href="#如何搭建本地Hexo环境？" class="headerlink" title="如何搭建本地Hexo环境？"></a>如何搭建本地Hexo环境？</h2><p>搭建Hexo环境很简单，Hexo是基于nodejs的，所以首先需要有node环境，如何安装node可参考<a href="www.aaa.com">源码编译安装nodejs</a>。</p>
<h3 id="1-安装Hexo"><a href="#1-安装Hexo" class="headerlink" title="1. 安装Hexo"></a>1. 安装Hexo</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install hexo -g</div></pre></td></tr></table></figure>
<h3 id="2-升级"><a href="#2-升级" class="headerlink" title="2. 升级"></a>2. 升级</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm update hexo -g</div></pre></td></tr></table></figure>
<h3 id="3-初始化"><a href="#3-初始化" class="headerlink" title="3. 初始化"></a>3. 初始化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkdir hexo</div><div class="line">cd hexo</div><div class="line">hexo init</div></pre></td></tr></table></figure>
<h3 id="4-生成"><a href="#4-生成" class="headerlink" title="4. 生成"></a>4. 生成</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo generate</div><div class="line">or</div><div class="line">hexo g</div></pre></td></tr></table></figure>
<h3 id="5-启动服务"><a href="#5-启动服务" class="headerlink" title="5. 启动服务"></a>5. 启动服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo server</div><div class="line">or</div><div class="line">hexo s</div></pre></td></tr></table></figure>
<p>启动后可在<a href="http://localhost:4000" target="_blank" rel="external">http://localhost:4000</a>访问。</p>
<h2 id="如何更换主题"><a href="#如何更换主题" class="headerlink" title="如何更换主题"></a>如何更换主题</h2><p>Hexo有很多主题，<a href="https://hexo.io/themes/" target="_blank" rel="external">https://hexo.io/themes/</a>网站上列举了一些主题，并带有效果展示。如果没有中意的主题，可以继续google一下。</p>
<p>安装主题方法也很简单，以 maupassant 为例：</p>
<h3 id="1-下载主题"><a href="#1-下载主题" class="headerlink" title="1. 下载主题"></a>1. 下载主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd hexo/themes</div><div class="line">git clone git@github.com:tufu9441/maupassant-hexo.git maupassant</div><div class="line">npm install hexo-renderer-jade --save</div><div class="line">npm install hexo-renderer-sass --save</div></pre></td></tr></table></figure>
<h3 id="2-更换主题"><a href="#2-更换主题" class="headerlink" title="2. 更换主题"></a>2. 更换主题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vi hexo/_config.yml</div><div class="line"></div><div class="line">language: zh-CN</div><div class="line">theme: maupassant</div></pre></td></tr></table></figure>
<p>从新启动后可看到效果。</p>
<h2 id="第一篇博客"><a href="#第一篇博客" class="headerlink" title="第一篇博客"></a>第一篇博客</h2><p>现在可以开始写第一篇博客了，使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">hexo new helloworld</div><div class="line">or</div><div class="line">hexo n helloworld</div></pre></td></tr></table></figure></p>
<p>就创建了一篇新博客，存放在 <strong>hexo/source/_posts/</strong> 下，刷新网页可看到效果。</p>
<h2 id="部署到github"><a href="#部署到github" class="headerlink" title="部署到github"></a>部署到github</h2><p>使用github的好处除了进行远程备份之外，还能直接通过github网站访问博客，非常方便。</p>
<h3 id="1-修改配置"><a href="#1-修改配置" class="headerlink" title="1. 修改配置"></a>1. 修改配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">vi hexo/_config.yml</div><div class="line"></div><div class="line">url: http://bysonline.github.io</div><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">  repository: git@github.com:bsyonline/bsyonline.github.io.git</div><div class="line">  branch: master</div></pre></td></tr></table></figure>
<h3 id="2-部署"><a href="#2-部署" class="headerlink" title="2. 部署"></a>2. 部署</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">hexo g</div><div class="line">hexo d</div></pre></td></tr></table></figure>
<p>完成之后可以访问bsyonline.github.io看到效果。<br>注：github的仓库名字必须是xxx.github.io</p>
<p>至此，本地的hexo博客系统就搭建好了。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Elasticsearch-2.2.0 安装]]></title>
      <url>http://bysonline.github.io/2016/07/14/Elasticsearch-2.1.1%20%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="1-下载"><a href="#1-下载" class="headerlink" title="1. 下载"></a>1. 下载</h3><p><a href="https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.2.0/elasticsearch-2.2.0.tar.gz" title="elasticsearch-2.2.0" target="_blank" rel="external">https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.2.0/elasticsearch-2.2.0.tar.gz</a></p>
<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf elasticsearch-2.2.0.tar.gz</div></pre></td></tr></table></figure>
<h3 id="3-配置"><a href="#3-配置" class="headerlink" title="3. 配置"></a>3. 配置</h3><blockquote>
<p>vi ./config/elasticsearch.yml</p>
</blockquote>
<pre><code>cluster.name: elsticsearch  
node.name: chinadaas01
network.host: 192.168.200.163
discovery.zen.ping.unicast.hosts: [&quot;192.168.200.163&quot;,&quot;192.168.200.164&quot;,&quot;192.168.200.165&quot;,&quot;192.168.200.166&quot;]
</code></pre><h3 id="4-安装插件"><a href="#4-安装插件" class="headerlink" title="4. 安装插件"></a>4. 安装插件</h3><h4 id="4-1-下载"><a href="#4-1-下载" class="headerlink" title="4.1 下载"></a>4.1 下载</h4><blockquote>
<p>wget <a href="https://github.com/mobz/elasticsearch-head.git" target="_blank" rel="external">https://github.com/mobz/elasticsearch-head.git</a></p>
<h4 id="4-2-安装"><a href="#4-2-安装" class="headerlink" title="4.2 安装"></a>4.2 安装</h4><p>elasticsearch提供了两种安装方式，在线安装总失败，所以选离线安装。<br>./bin/plugin install file:./elasticsearch-head-master.zip</p>
</blockquote>
<h3 id="5-集群搭建"><a href="#5-集群搭建" class="headerlink" title="5. 集群搭建"></a>5. 集群搭建</h3><p>其他机器执行相同配置，ip和node.name改成对应机器的ip。</p>
<h3 id="6-启动"><a href="#6-启动" class="headerlink" title="6. 启动"></a>6. 启动</h3><blockquote>
<p>./bin/elasticsearch &amp;</p>
</blockquote>
<p>浏览器中使用 <code>http://192.168.200.163:9200/_plugin/head/</code> 可看到界面</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Elasticsearch-1.4.1 集群环境搭建]]></title>
      <url>http://bysonline.github.io/2016/07/14/Elasticsearch-1.4.1%20%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      <content type="html"><![CDATA[<p>CentOS 6.4，机器 node3（10.20.20.203）,node4（10.20.20.204）</p>
<h3 id="1-安装jdk"><a href="#1-安装jdk" class="headerlink" title="1. 安装jdk"></a>1. 安装jdk</h3><p>已安装跳过。</p>
<h3 id="2-下载"><a href="#2-下载" class="headerlink" title="2. 下载"></a>2. 下载</h3><p><a href="https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.4.1.tar.gz" title="elasticsearch-1.4.1" target="_blank" rel="external">https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.4.1.tar.gz</a></p>
<h3 id="3-解压"><a href="#3-解压" class="headerlink" title="3. 解压"></a>3. 解压</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf elasticsearch-1.4.1.tar.gz</div></pre></td></tr></table></figure>
<h3 id="4-配置"><a href="#4-配置" class="headerlink" title="4. 配置"></a>4. 配置</h3><p>分别修改2台机器配置</p>
<p>node3<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cluster.name: elasticsearch</div><div class="line">node.name: node3</div><div class="line">network.host: 10.20.20.203  </div><div class="line">discovery.zen.ping.unicast.hosts: [&quot;10.20.20.203&quot;]</div></pre></td></tr></table></figure></p>
<p>node4<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cluster.name: elasticsearch</div><div class="line">node.name: node4</div><div class="line">network.host: 10.20.20.204  </div><div class="line">discovery.zen.ping.unicast.hosts: [&quot;10.20.20.204&quot;]</div></pre></td></tr></table></figure></p>
<h3 id="5-安装插件"><a href="#5-安装插件" class="headerlink" title="5. 安装插件"></a>5. 安装插件</h3><h4 id="5-1-下载"><a href="#5-1-下载" class="headerlink" title="5.1 下载"></a>5.1 下载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://github.com/mobz/elasticsearch-head.git</div></pre></td></tr></table></figure>
<h4 id="5-2-安装"><a href="#5-2-安装" class="headerlink" title="5.2 安装"></a>5.2 安装</h4><p>将插件elasticsearch-head-master.zip拷贝到plugin,解压缩<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">unzip elasticsearch-head-master.zip</div><div class="line">mv elasticsearch-head-master head</div></pre></td></tr></table></figure></p>
<p>2台机器执行相同操作</p>
<h3 id="6-启动"><a href="#6-启动" class="headerlink" title="6. 启动"></a>6. 启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./bin/elasticsearch &amp;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Docker 笔记]]></title>
      <url>http://bysonline.github.io/2016/07/14/Docker-%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h4 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h4><h4 id="2-几个命令"><a href="#2-几个命令" class="headerlink" title="2. 几个命令"></a>2. 几个命令</h4><pre><code>sudo docker version
sudo docker info
sudo docker images
sudo docker pull elasticsearch:latest
sudo docker run elasticsearch
</code></pre><h4 id="3-修改elasticsearch镜像"><a href="#3-修改elasticsearch镜像" class="headerlink" title="3. 修改elasticsearch镜像"></a>3. 修改elasticsearch镜像</h4><p>如何安装elasticsearch插件，然后发布成自己的镜像</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[全排列]]></title>
      <url>http://bysonline.github.io/2015/07/16/%E5%85%A8%E6%8E%92%E5%88%97/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">perm</span><span class="params">(<span class="keyword">int</span>[] arr,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</div><div class="line">     <span class="keyword">if</span>(start==end)&#123;</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</div><div class="line">               System.out.print(arr[i]);</div><div class="line">          &#125;</div><div class="line">          System.out.println();</div><div class="line">     &#125;<span class="keyword">else</span>&#123;</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=start;i&lt;=end;i++)&#123;</div><div class="line">               swap(arr,start,i);</div><div class="line">               perm(arr,start+<span class="number">1</span>;end);</div><div class="line">               swap(arr,start,i);</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[字符串处理1]]></title>
      <url>http://bysonline.github.io/2015/04/09/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%861/</url>
      <content type="html"><![CDATA[<p>一个5位数，判断它是不是回文数。即12321是回文数，个位与万位相同，十位与千位相同。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prog0409</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">          Prog0409 prog = <span class="keyword">new</span> Prog0409();</div><div class="line">          System.out.println(prog.print(<span class="number">12331</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">          String s = String.valueOf(n);</div><div class="line">          <span class="keyword">if</span>(s.length() != <span class="number">5</span>)&#123;</div><div class="line">               <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">          &#125;<span class="keyword">else</span>&#123;</div><div class="line">               <span class="keyword">if</span>((s.charAt(<span class="number">0</span>)==s.charAt(<span class="number">4</span>)) &amp;&amp; (s.charAt(<span class="number">1</span>) == s.charAt(<span class="number">3</span>)))&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">               &#125;<span class="keyword">else</span>&#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">               &#125;</div><div class="line">          &#125;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[阶乘]]></title>
      <url>http://bysonline.github.io/2015/04/08/%E9%98%B6%E4%B9%98/</url>
      <content type="html"><![CDATA[<p>求1+2!+3!+…+20!的和<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prog0408</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">          Prog0408 prog = <span class="keyword">new</span> Prog0408();</div><div class="line">          System.out.println(prog.print(<span class="number">20</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">          <span class="keyword">int</span> r=<span class="number">0</span>;</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">               r += factorial(i);</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">return</span> r;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">factorial</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">          <span class="keyword">int</span> r = <span class="number">1</span>;</div><div class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</div><div class="line">               r = r * i;</div><div class="line">          &#125;</div><div class="line">          <span class="keyword">return</span> r;</div><div class="line">     &#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[猴子吃桃问题]]></title>
      <url>http://bysonline.github.io/2015/04/05/%E7%8C%B4%E5%AD%90%E5%90%83%E6%A1%83%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>猴子吃桃问题：猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个。第二天早上又将剩下的桃子吃掉一半，又多吃了一个。以后每天早上都吃了前一天剩下的一半零一个。到第10天早上想再吃时，见只剩下一个桃子了。求第一天共摘了多少</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prog0405</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Prog0405 prog = <span class="keyword">new</span> Prog0405();</div><div class="line">        System.out.println(prog.count(<span class="number">0</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span> day)</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(day == <span class="number">9</span>)&#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">return</span> (count(day+<span class="number">1</span>) + <span class="number">1</span>) * <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[完全平方数]]></title>
      <url>http://bysonline.github.io/2015/04/02/%E5%AE%8C%E5%85%A8%E5%B9%B3%E6%96%B9%E6%95%B0/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0402</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0402 algo = <span class="keyword">new</span> Algo0402();</div><div class="line">        List list = algo.fullSquare(<span class="number">1000</span>);</div><div class="line">        System.out.println(list);</div><div class="line"></div><div class="line">        System.out.println(algo.isInteger(<span class="string">"-2"</span>));</div><div class="line"></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">1000</span>;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(list.contains(i+<span class="number">100</span>)&amp;&amp;list.contains(i+<span class="number">168</span>))&#123;</div><div class="line">                System.out.print(i + <span class="string">","</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">fullSquare</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=Math.sqrt(n);i++) &#123;</div><div class="line">            list.add(i*i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isInteger</span><span class="params">(String s)</span></span>&#123;</div><div class="line">        Pattern p = Pattern.compile(<span class="string">"^[+]?[\\d]*$"</span>);</div><div class="line">        <span class="keyword">return</span> p.matcher(s).matches();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[字符串2]]></title>
      <url>http://bysonline.github.io/2015/03/30/%E5%AD%97%E7%AC%A6%E4%B8%B22/</url>
      <content type="html"><![CDATA[<p>输入一行字符，分别统计出其中英文字母、空格、数字和其它字符的个数<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.InputStreamReader;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Prog0330</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</div><div class="line">        Prog0330 t = <span class="keyword">new</span> Prog0330();</div><div class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</div><div class="line">        String s = br.readLine();</div><div class="line">        t.wordCount(s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">wordCount</span><span class="params">(String s)</span></span>&#123;</div><div class="line">        <span class="keyword">int</span> wordCount=s.length();</div><div class="line">        <span class="keyword">int</span> digitCount = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> letterCount = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> spaceCount = <span class="number">0</span>;</div><div class="line">        <span class="keyword">int</span> otherCount = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;wordCount;i++)&#123;</div><div class="line">            <span class="keyword">char</span> c = s.charAt(i);</div><div class="line">            <span class="keyword">if</span>(Character.isDigit(c))&#123;</div><div class="line">                digitCount += <span class="number">1</span>;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(Character.isLetter(c))&#123;</div><div class="line">                letterCount += <span class="number">1</span>;</div><div class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(Character.isSpaceChar(c))&#123;</div><div class="line">                spaceCount += <span class="number">1</span>;</div><div class="line">            &#125;<span class="keyword">else</span>&#123;</div><div class="line">                otherCount += <span class="number">1</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"wordCount="</span>+wordCount);</div><div class="line">        System.out.println(<span class="string">"digitCount="</span>+digitCount);</div><div class="line">        System.out.println(<span class="string">"letterCount="</span>+letterCount);</div><div class="line">        System.out.println(<span class="string">"spaceCount="</span>+spaceCount);</div><div class="line">        System.out.println(<span class="string">"otherCount="</span>+otherCount);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[完数]]></title>
      <url>http://bysonline.github.io/2015/03/28/%E5%AE%8C%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>完数，所有的真因子（即除了自身以外的约数）的和（即因子函数），恰好等于它本身<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0328</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0328 p = <span class="keyword">new</span> Algo0328();</div><div class="line">        System.out.println(p.perfectNumber(<span class="number">1000</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">perfectNumber</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(i == sum(i))&#123;</div><div class="line">                list.add(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> n)</span></span>&#123;</div><div class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</div><div class="line">            <span class="keyword">if</span>(n % i == <span class="number">0</span>)&#123;</div><div class="line">                sum += i;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> sum;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[最大公约数]]></title>
      <url>http://bysonline.github.io/2015/03/27/%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0327</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0327 g = <span class="keyword">new</span> Algo0327();</div><div class="line">        System.out.println(g.gcd(<span class="number">319</span>, <span class="number">377</span>));</div><div class="line">        System.out.println(g.lcm(<span class="number">18</span>, <span class="number">20</span>));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> big;</div><div class="line">        <span class="keyword">int</span> small;</div><div class="line">        <span class="keyword">int</span> result;</div><div class="line">        <span class="keyword">if</span> (m &gt; n) &#123;</div><div class="line">            big = m;</div><div class="line">            small = n;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            big = n;</div><div class="line">            small = m;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (big % small != <span class="number">0</span>) &#123;</div><div class="line">            result = gcd(small, big % small);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            result = small;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lcm</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> g = gcd(m, n);</div><div class="line">        <span class="keyword">return</span> m * n / g;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[分解质因数]]></title>
      <url>http://bysonline.github.io/2015/03/26/%E5%88%86%E8%A7%A3%E8%B4%A8%E5%9B%A0%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>每个合数都可以写成几个质数相乘的形式。其中每个质数都是这个合数的因数，叫做这个合数的分解质因数。如 90 = 2 <em> 3 </em> 5</p>
<p>1.给点数n，求1到n的所有素数。<br>2.如果n不是素数，用第一个质数2开始除，能整除则商继续用从2开始除。<br>3.如果不能整除，换下一个质数，直到商等于质数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0326</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0326 qf = <span class="keyword">new</span> Algo0326();</div><div class="line">        qf.print(<span class="number">5</span>);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        List list = prime(n);</div><div class="line">        <span class="keyword">if</span> (list != <span class="keyword">null</span> &amp;&amp; list.size() &gt; <span class="number">0</span>) &#123;</div><div class="line">            System.out.print(n + <span class="string">" = "</span>);</div><div class="line">            decom(n, list);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">decom</span><span class="params">(<span class="keyword">int</span> n, List list)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!list.contains(n)) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</div><div class="line">                <span class="keyword">if</span> (!flag) &#123;</div><div class="line">                    <span class="keyword">int</span> p = (Integer) list.get(i);</div><div class="line">                    <span class="keyword">if</span> (n % p == <span class="number">0</span>) &#123;</div><div class="line">                        System.out.print(p + <span class="string">" * "</span>);</div><div class="line">                        decom(n / p, list);</div><div class="line">                    &#125;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            System.out.print(n);</div><div class="line">            flag = <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List <span class="title">prime</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">        List list = <span class="keyword">new</span> ArrayList();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</div><div class="line">            <span class="keyword">int</span> j;</div><div class="line">            <span class="keyword">for</span> (j = <span class="number">2</span>; j &lt;= Math.sqrt(i); j++) &#123;</div><div class="line">                <span class="keyword">if</span> (i % j == <span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (j &gt; Math.sqrt(i)) &#123;</div><div class="line">                list.add(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> list;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[水仙花数]]></title>
      <url>http://bysonline.github.io/2015/03/25/%E6%B0%B4%E4%BB%99%E8%8A%B1%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>水仙花数是指一个 n 位数 ( n≥3 )，它的每个位上的数字的 n 次幂之和等于它本身。（例如：1^3 + 5^3+ 3^3 = 153）<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0325</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">100</span>; i &lt; <span class="number">1000</span>; i++) &#123;</div><div class="line">            <span class="keyword">int</span> h = i / <span class="number">100</span>;</div><div class="line">            <span class="keyword">int</span> t = (i - h * <span class="number">100</span>) / <span class="number">10</span>;</div><div class="line">            <span class="keyword">int</span> o = (i - h * <span class="number">100</span> - t * <span class="number">10</span>);</div><div class="line">            <span class="keyword">if</span> ((Math.pow(h, <span class="number">3</span>) + Math.pow(t, <span class="number">3</span>) + Math.pow(o, <span class="number">3</span>)) == i) &#123;</div><div class="line">                System.out.print(i + <span class="string">", "</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[素数]]></title>
      <url>http://bysonline.github.io/2015/03/24/%E7%B4%A0%E6%95%B0/</url>
      <content type="html"><![CDATA[<p>素数：除了1和它本身以外不再有其他的因数。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0324</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0324 p = <span class="keyword">new</span> Algo0324();</div><div class="line">        <span class="keyword">long</span> l1 = System.currentTimeMillis();</div><div class="line">        p.print(<span class="number">10</span>, <span class="number">200</span>);</div><div class="line">        <span class="keyword">long</span> l2 = System.currentTimeMillis();</div><div class="line"></div><div class="line">        System.out.println(<span class="string">""</span>);</div><div class="line">        <span class="keyword">long</span> l3 = System.currentTimeMillis();</div><div class="line">        p.print1(<span class="number">10</span>, <span class="number">200</span>);</div><div class="line">        <span class="keyword">long</span> l4 = System.currentTimeMillis();</div><div class="line">        System.out.println(<span class="string">""</span>);</div><div class="line">        System.out.println(<span class="string">"print用时"</span> + (l2 - l1) + <span class="string">"s"</span>);</div><div class="line">        System.out.println(<span class="string">"print1用时"</span> + (l4 - l3) + <span class="string">"s"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[end - start + <span class="number">1</span>];</div><div class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt;= end; i++) &#123;</div><div class="line">            arr[count] = i;</div><div class="line">            count++;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = arr[<span class="number">0</span>]; i &lt;= arr[arr.length - <span class="number">1</span>]; i++) &#123;</div><div class="line">            <span class="keyword">int</span> j;</div><div class="line">            <span class="keyword">for</span> (j = <span class="number">2</span>; j &lt;= Math.sqrt(i); j++) &#123;</div><div class="line">                <span class="keyword">if</span> (i % j == <span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (j &gt; Math.sqrt(i)) &#123;</div><div class="line">                System.out.print(i + <span class="string">","</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print1</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[(end - start + <span class="number">1</span>) / <span class="number">2</span>];</div><div class="line">        <span class="keyword">int</span> begin = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (start % <span class="number">2</span> == <span class="number">0</span>) &#123;</div><div class="line">            begin = start + <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            begin = start;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</div><div class="line">            arr[i] = begin + i * <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= arr.length - <span class="number">1</span>; i++) &#123;</div><div class="line">            <span class="keyword">int</span> j;</div><div class="line">            <span class="keyword">if</span> (arr[i] &gt; <span class="number">0</span>) &#123;</div><div class="line">                <span class="keyword">for</span> (j = <span class="number">2</span>; j &lt;= Math.sqrt(arr[i]); j++) &#123;</div><div class="line">                    <span class="keyword">if</span> (arr[i] % j == <span class="number">0</span>) &#123;</div><div class="line">                        setValue(arr, i);</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (j &gt; Math.sqrt(arr[i])) &#123;</div><div class="line">                    <span class="keyword">if</span> (arr[i] &gt; <span class="number">0</span>) &#123;</div><div class="line">                        System.out.print(arr[i] + <span class="string">","</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> currentIndex)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> currentValue = arr[currentIndex];</div><div class="line">        <span class="keyword">int</span> count = <span class="number">2</span>;</div><div class="line">        <span class="keyword">while</span> ((currentIndex + count * currentValue) &lt; arr.length) &#123;</div><div class="line">            arr[currentIndex + count * currentValue] = <span class="number">0</span>;</div><div class="line">            count = count + <span class="number">2</span>;</div><div class="line">        &#125;</div><div class="line">        arr[currentIndex] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[斐波那契数列]]></title>
      <url>http://bysonline.github.io/2015/03/23/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/</url>
      <content type="html"><![CDATA[<p>有一对兔子，从出生后第3个月起每个月都生一对兔子，小兔子长到第三个月后每个月又生一对兔子，假如兔子都不死，问每个月的兔子总数为多少？</p>
<table>
<thead>
<tr>
<th>月份</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
<th>12  </th>
</tr>
</thead>
<tbody>
<tr>
<td>小兔子对数</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34</td>
<td>55</td>
</tr>
<tr>
<td>中兔子对数</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34  </td>
</tr>
<tr>
<td>大兔子对数</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34</td>
<td>55</td>
</tr>
<tr>
<td>总对数</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34</td>
<td>55</td>
<td>89</td>
<td>144</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Algo0323</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Algo0323 f = <span class="keyword">new</span> Algo0323();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</div><div class="line">            System.out.print(f.fibonacci(i) + <span class="string">","</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fibonacci</span><span class="params">(<span class="keyword">int</span> month)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (month == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (month == <span class="number">1</span> || month == <span class="number">2</span>) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> fibonacci(month - <span class="number">1</span>) + fibonacci(month - <span class="number">2</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[经纬度查省市县（逆编码）]]></title>
      <url>http://bysonline.github.io/2013/07/16/%E7%BB%8F%E7%BA%AC%E5%BA%A6%E6%9F%A5%E7%9C%81%E5%B8%82%E5%8E%BF%EF%BC%88%E9%80%86%E7%BC%96%E7%A0%81%EF%BC%89/</url>
      <content type="html"><![CDATA[<p>阿里云提供的接口</p>
<p><a href="http://gc.ditu.aliyun.com/regeocoding?l=&quot;+lat+&quot;,&quot;+lng+&quot;&amp;type=010" target="_blank" rel="external">http://gc.ditu.aliyun.com/regeocoding?l=”+lat+”,”+lng+”&amp;type=010</a><br>type=010 兴趣点（poi）100代表道路，010代表POI，001代表门址，111可以同时显示前三项</p>
<p><a href="http://gc.ditu.aliyun.com/jsdoc/geocode_api.html" target="_blank" rel="external">api 文档</a> 参考。</p>
<p>行政区划：<br><a href="http://recode.ditu.aliyun.com/dist_query?l=39.938133,116.395739" target="_blank" rel="external">http://recode.ditu.aliyun.com/dist_query?l=39.938133,116.395739</a><br>l 参数定义：纬度，经度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> String[] getArea(<span class="keyword">float</span> lng, <span class="keyword">float</span> lat)&#123;</div><div class="line">    String[] arr = <span class="keyword">new</span> String[<span class="number">3</span>];</div><div class="line">    String path=<span class="string">"http://gc.ditu.aliyun.com/regeocoding?l="</span>+lat+<span class="string">","</span>+lng+<span class="string">"&amp;type=010"</span>;</div><div class="line">    URL url= <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        url = <span class="keyword">new</span> URL(path);</div><div class="line">        HttpURLConnection conn=(HttpURLConnection) url.openConnection();</div><div class="line">        conn.setRequestMethod(<span class="string">"GET"</span>);</div><div class="line">        conn.setConnectTimeout(<span class="number">5000</span>);</div><div class="line">        String jsonString = <span class="string">""</span>;</div><div class="line">        <span class="keyword">if</span>(conn.getResponseCode()==<span class="number">200</span>)&#123;</div><div class="line">            BufferedReader is=<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(conn.getInputStream(),<span class="string">"UTF-8"</span>));</div><div class="line">            String str;</div><div class="line">            <span class="keyword">if</span>((str=is.readLine())!=<span class="keyword">null</span>)</div><div class="line">            &#123;</div><div class="line">                jsonString += str;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            is.close();</div><div class="line"></div><div class="line">            JSONObject jsonObject = JSONObject.fromObject(jsonString);</div><div class="line">            String addrList =  jsonObject.getString(<span class="string">"addrList"</span>);</div><div class="line"></div><div class="line">            JSONArray jsonarry = JSONArray.fromObject(addrList);</div><div class="line">            String poi = <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;jsonarry.size();i++)&#123;</div><div class="line">                JSONObject jsonObject2 = jsonarry.getJSONObject(i);</div><div class="line">                poi =  jsonObject2.getString(<span class="string">"admName"</span>);</div><div class="line">            &#125;</div><div class="line">            System.out.println(<span class="string">"----------"</span>+poi);</div><div class="line"></div><div class="line">            <span class="keyword">if</span>(!<span class="string">""</span>.equals(poi))&#123;</div><div class="line">                String[] area = poi.split(<span class="string">","</span>);</div><div class="line">                arr[<span class="number">0</span>] = area[<span class="number">0</span>];</div><div class="line">                arr[<span class="number">1</span>] = area[<span class="number">1</span>];</div><div class="line"></div><div class="line">                <span class="keyword">if</span>(area.length == <span class="number">3</span>) &#123;</div><div class="line">                    arr[<span class="number">2</span>] = area[<span class="number">2</span>];</div><div class="line">                &#125;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">        e.printStackTrace();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[九宫格]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E4%B9%9D%E5%AE%AB%E6%A0%BC/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> Rolex</div><div class="line"> * <span class="doctag">@date</span> 2011-9-21</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeScreen</span> <span class="keyword">extends</span> <span class="title">MainScreen</span></span>&#123;</div><div class="line"></div><div class="line">    	<span class="function"><span class="keyword">public</span> <span class="title">HomeScreen</span><span class="params">()</span> </span>&#123;</div><div class="line">          HorizontalBitmapFieldSet set1 = <span class="keyword">new</span> HorizontalBitmapFieldSet();</div><div class="line">          BitmapBackgroundButtonField bitmap1 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"登录"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_login.png"</span>));</div><div class="line">          bitmap1.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      pushScreen(<span class="keyword">new</span> com.unionpay.mobilepay.mpos.profile.TabScreen(<span class="keyword">null</span>));</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          BitmapBackgroundButtonField bitmap2 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"注册"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_register.png"</span>));</div><div class="line">          bitmap2.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      pushScreen(<span class="keyword">new</span> com.unionpay.mobilepay.mpos.profile.TabScreen(<span class="keyword">null</span>));</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          BitmapBackgroundButtonField bitmap3 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"帮助"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_help.png"</span>));</div><div class="line">          bitmap3.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      Dialog.alert(<span class="string">"help"</span>);</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          set1.add(bitmap1);</div><div class="line">          set1.add(bitmap2);</div><div class="line">          set1.add(bitmap3);</div><div class="line">          HorizontalBitmapFieldSet set2 = <span class="keyword">new</span> HorizontalBitmapFieldSet();</div><div class="line">          BitmapBackgroundButtonField bitmap4 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"交易管理"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_transaction.png"</span>));</div><div class="line">          bitmap4.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      pushScreen(<span class="keyword">new</span> TradePay());</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          BitmapBackgroundButtonField bitmap5 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"银行卡管理"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_bankcard.png"</span>));</div><div class="line">          bitmap5.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      pushScreen(<span class="keyword">new</span> CardManager());</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          BitmapBackgroundButtonField bitmap6 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"用户管理"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_profile.png"</span>));</div><div class="line">          bitmap6.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      pushScreen(<span class="keyword">new</span> TabScreenIn(<span class="keyword">null</span>));</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          set2.add(bitmap4);</div><div class="line">          set2.add(bitmap5);</div><div class="line">          set2.add(bitmap6);</div><div class="line">          HorizontalBitmapFieldSet set3 = <span class="keyword">new</span> HorizontalBitmapFieldSet();</div><div class="line">          BitmapBackgroundButtonField bitmap7 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"关于"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_about.png"</span>));</div><div class="line">          bitmap7.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      Dialog.alert(<span class="string">"login"</span>);</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          BitmapBackgroundButtonField bitmap8 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"设置"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_settings.png"</span>));</div><div class="line">          bitmap8.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      Dialog.alert(<span class="string">"reg"</span>);</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          BitmapBackgroundButtonField bitmap9 = <span class="keyword">new</span> BitmapBackgroundButtonField(<span class="string">"更多"</span>,Field.FOCUSABLE,Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon.png"</span>),Bitmap.getBitmapResource(<span class="string">"com/unionpay/mobilepay/mpos/image/home/icon_more.png"</span>));</div><div class="line">          bitmap9.setChangeListener(<span class="keyword">new</span> FieldChangeListener() &#123;</div><div class="line"></div><div class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">                      Dialog.alert(<span class="string">"help"</span>);</div><div class="line"></div><div class="line">                &#125;</div><div class="line">          &#125;);</div><div class="line">          set3.add(bitmap7);</div><div class="line">          set3.add(bitmap8);</div><div class="line">          set3.add(bitmap9);</div><div class="line">          add(set1);</div><div class="line">          add(set2);</div><div class="line">          add(set3);</div><div class="line"></div><div class="line">    	&#125;</div><div class="line"></div><div class="line">    	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">pushScreen</span><span class="params">(MainScreen screen)</span></span>&#123;</div><div class="line">          UiApplication.getUiApplication().pushScreen(screen);</div><div class="line">    	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[向服务器发请求]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E8%AF%B7%E6%B1%82/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">httpFetch</span><span class="params">(String xml,String url)</span> </span>&#123;</div><div class="line">    String content = <span class="string">""</span>;</div><div class="line">    ByteArrayOutputStream outputStream = <span class="keyword">new</span> ByteArrayOutputStream();</div><div class="line">    HttpConnection hconn = <span class="keyword">null</span>;</div><div class="line">    OutputStream out = <span class="keyword">null</span>;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    String bodystr = xml.toString();</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        hconn = (HttpConnection) Connector.open(url);</div><div class="line">        <span class="comment">//UrlRequestedEvent</span></div><div class="line">        hconn.setRequestMethod(HttpConnection.POST);</div><div class="line">        hconn.setRequestProperty(HttpProtocolConstants.HEADER_USER_AGENT, <span class="string">"BlackBerry/5.0.0"</span>);</div><div class="line">        hconn.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LENGTH, String.valueOf(bodystr.getBytes().length));</div><div class="line">        hconn.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_TYPE,<span class="string">"application/x-www-form-urlencoded"</span>);</div><div class="line">        out = hconn.openOutputStream();</div><div class="line">        out.write(bodystr.getBytes());</div><div class="line">        out.flush();</div><div class="line"></div><div class="line">          <span class="keyword">int</span> status = hconn.getResponseCode();</div><div class="line"></div><div class="line">          <span class="keyword">if</span> (status == HttpConnection.HTTP_OK) &#123;</div><div class="line">                <span class="comment">// Is this html?</span></div><div class="line">                String contentType = hconn.getHeaderField(HEADER_CONTENTTYPE);</div><div class="line">                <span class="keyword">boolean</span> htmlContent = (contentType != <span class="keyword">null</span> &amp;&amp; contentType.startsWith(CONTENTTYPE_TEXTHTML));</div><div class="line"></div><div class="line">                InputStream input = hconn.openInputStream();</div><div class="line"></div><div class="line">                <span class="keyword">int</span> len = <span class="number">0</span>;</div><div class="line">                <span class="keyword">int</span> size = <span class="number">0</span>;</div><div class="line">                <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">256</span>];</div><div class="line">                StringBuffer raw = <span class="keyword">new</span> StringBuffer();</div><div class="line"></div><div class="line">                <span class="keyword">while</span> (-<span class="number">1</span> != (len = input.read(data))) &#123;</div><div class="line">                      raw.append(<span class="keyword">new</span> String(data, <span class="number">0</span>, len));</div><div class="line">                      size += len;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                raw.insert(<span class="number">0</span>, <span class="string">"bytes received]\n"</span>);</div><div class="line">                raw.insert(<span class="number">0</span>, size);</div><div class="line">                raw.insert(<span class="number">0</span>, <span class="string">'['</span>);</div><div class="line">                content = raw.toString();</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (htmlContent) &#123;</div><div class="line">                      content = prepareData(raw.toString());</div><div class="line">                &#125;</div><div class="line">                input.close();</div><div class="line">          &#125; <span class="keyword">else</span> &#123;</div><div class="line">                content = <span class="string">"response code = "</span> + status;</div><div class="line">          &#125;</div><div class="line">          hconn.close();</div><div class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</div><div class="line">          content = e.toString();</div><div class="line">    &#125;</div><div class="line">    _fetchStarted = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> content;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[自定义输入框]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BE%93%E5%85%A5%E6%A1%86/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="title">InputBoxField</span><span class="params">(<span class="keyword">int</span> boxWigth,<span class="keyword">int</span> boxHeight,String boxText)</span></span>&#123;</div><div class="line">    <span class="keyword">super</span>(Manager.NO_VERTICAL_SCROLL);<span class="comment">//禁用垂直滚动</span></div><div class="line">    <span class="keyword">this</span>._boxHeight = boxHeight;</div><div class="line">    <span class="keyword">this</span>._boxWigth = boxWigth;</div><div class="line">    <span class="keyword">this</span>._boxText = boxText;</div><div class="line">		_vfm = <span class="keyword">new</span> VerticalFieldManager(Manager.NO_VERTICAL_SCROLL);</div><div class="line">		<span class="comment">//EditField.NO_NEWLINE    设置输入框不可换行</span></div><div class="line">    _ef = <span class="keyword">new</span> EditField(<span class="string">""</span>,<span class="string">""</span>,<span class="number">10</span>,EditField.NO_NEWLINE)&#123;</div><div class="line">				<span class="comment">//创建一个EditedField，并设置其中字符的显示颜色。</span></div><div class="line">		    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span></span>&#123;</div><div class="line">		        <span class="comment">//getManager().invalidate();</span></div><div class="line">		        g.setColor(Color.WHITE);</div><div class="line">		        <span class="keyword">super</span>.paint(g);</div><div class="line">		    &#125;</div><div class="line">    &#125;;</div><div class="line">    _ef.setBackground(BackgroundFactory.createSolidBackground(Color.BLACK));<span class="comment">//设置EditedField的背景颜色</span></div><div class="line">    _vfm.add(_ef);</div><div class="line">    _vfm.setPadding((_boxHeight-_ef.getFont().getHeight())/<span class="number">2</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">5</span>);<span class="comment">//设置输入区域和外边框的间距</span></div><div class="line">    add(_vfm);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后我们需要覆写sublayout方法，告诉布局管理器该组件的大小<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sublayout</span><span class="params">(<span class="keyword">int</span> maxWidth, <span class="keyword">int</span> maxHeight)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(_boxWigth == <span class="number">0</span>)&#123;</div><div class="line">            _boxWigth = maxWidth;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(_boxHeight == <span class="number">0</span>)&#123;</div><div class="line">            _boxHeight = maxHeight;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//super.sublayout(maxWidth, maxHeight);</span></div><div class="line">    setPositionChild(_vfm, <span class="number">2</span>, <span class="number">0</span>);</div><div class="line">    layoutChild(_vfm, _boxWigth, _boxHeight);</div><div class="line">    setExtent(_boxWigth, _boxHeight);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>覆写paint方法，在原有的EditedField的四周换上我们想要的边框并处理焦点事件。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.paint(g);</div><div class="line">    <span class="keyword">int</span> oldColor = g.getColor();</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.isFocus())&#123;</div><div class="line">            <span class="keyword">if</span>(_ef.getText().equals(_boxText))&#123;</div><div class="line">                    _ef.setText(<span class="string">""</span>);</div><div class="line">            &#125;</div><div class="line">            g.setColor(Color.BLUE);</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</div><div class="line"></div><div class="line">                    g.drawRoundRect(i,i,getWidth()-i*<span class="number">2</span>,getHeight()-i*<span class="number">2</span>,<span class="number">15</span>,<span class="number">15</span>);</div><div class="line">            &#125;       </div><div class="line"></div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">            <span class="keyword">if</span>(_ef.getText().equals(<span class="string">""</span>))&#123;</div><div class="line">                    _ef.setText(_boxText);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            g.setColor(Color.BLUE);</div><div class="line">            g.drawRoundRect(<span class="number">3</span>, <span class="number">3</span>, getWidth()-<span class="number">6</span>, getHeight()-<span class="number">6</span>,<span class="number">15</span>,<span class="number">15</span>);                &#125;</div><div class="line">    g.setColor(oldColor);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接下来覆写onFocus和onUnfocus方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onFocus</span><span class="params">(<span class="keyword">int</span> direction)</span> </span>&#123;</div><div class="line">	  <span class="keyword">super</span>.onFocus(direction);</div><div class="line">	  _ef.setCursorPosition(_ef.getTextLength());</div><div class="line">	  invalidate();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onUnfocus</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onUnfocus();</div><div class="line">    invalidate();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[虚拟键盘]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E8%99%9A%E6%8B%9F%E9%94%AE%E7%9B%98/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.InputStream;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.microedition.media.Player;</div><div class="line"><span class="keyword">import</span> javax.microedition.media.control.VolumeControl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> net.rim.device.api.system.Application;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.system.Display;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.system.KeyListener;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.Color;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.Field;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.FieldChangeListener;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.FocusChangeListener;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.Graphics;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.Keypad;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.Manager;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.VirtualKeyboard;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.component.EditField;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.component.LabelField;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.component.PasswordEditField;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.container.HorizontalFieldManager;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.container.PopupScreen;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.container.VerticalFieldManager;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestScreen</span> <span class="keyword">extends</span> <span class="title">PopupScreen</span> <span class="keyword">implements</span> <span class="title">FieldChangeListener</span>,<span class="title">KeyListener</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line">   PasswordEditField passwd;<span class="comment">//输入框</span></div><div class="line">   VerticalFieldManager vfm;<span class="comment">//密码键盘的布局</span></div><div class="line">   HorizontalFieldManager buttonHfm;<span class="comment">//按钮的水平布局</span></div><div class="line">   VerticalFieldManager numVfm;<span class="comment">//数字键盘的垂直布局</span></div><div class="line">   VerticalFieldManager charVfm;<span class="comment">//字母键盘垂直布局</span></div><div class="line">   VerticalFieldManager bcharVfm;<span class="comment">//字母键盘垂直布局</span></div><div class="line">   VerticalFieldManager signVfm;<span class="comment">//符号键盘的水平布局</span></div><div class="line">   CustomButtonField button1;</div><div class="line">   CustomButtonField button2;</div><div class="line">   CustomButtonField button3;</div><div class="line">   VirtualKeyboard virtKbd;<span class="comment">//虚拟键盘</span></div><div class="line">   CustomButtonField cbf;</div><div class="line"></div><div class="line">   EditField _edit;</div><div class="line">   EditField _edit1;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">TestScreen</span><span class="params">(EditField edit,EditField edit1)</span> </span>&#123;</div><div class="line">          <span class="keyword">super</span>(<span class="keyword">new</span> VerticalFieldManager()</div><div class="line">          &#123;</div><div class="line">          &#125;</div><div class="line">          );</div><div class="line">          _edit = edit;</div><div class="line">          _edit1 = edit1;</div><div class="line">          virtKbd = <span class="keyword">this</span>.getVirtualKeyboard();<span class="comment">//获得当前屏幕的虚拟键盘</span></div><div class="line"></div><div class="line">          vfm = <span class="keyword">new</span> VerticalFieldManager();</div><div class="line">          LabelField label = <span class="keyword">new</span> LabelField(<span class="string">"密码键盘"</span>);</div><div class="line">          passwd = <span class="keyword">new</span> PasswordEditField();</div><div class="line">          passwd.setFocusListener(<span class="keyword">new</span> FocusChangeListener() &#123;</div><div class="line">               <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">focusChanged</span><span class="params">(Field field, <span class="keyword">int</span> eventType)</span> </span>&#123;</div><div class="line">                       <span class="keyword">if</span>(eventType == FOCUS_GAINED)&#123;</div><div class="line">                            <span class="comment">//virtKbd.setVisibility(VirtualKeyboard.HIDE_FORCE);</span></div><div class="line">                       &#125;</div><div class="line">                  &#125;</div><div class="line">        &#125;);</div><div class="line">          buttonHfm = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">          button1 = <span class="keyword">new</span> CustomButtonField(<span class="string">"数字"</span>, CustomButtonField.BUTTON, Field.FOCUSABLE);</div><div class="line">          button1.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          button2 = <span class="keyword">new</span> CustomButtonField(<span class="string">"字母"</span>, CustomButtonField.BUTTON, Field.FOCUSABLE);</div><div class="line">          button2.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          button3 = <span class="keyword">new</span> CustomButtonField(<span class="string">"符号"</span>, CustomButtonField.BUTTON, Field.FOCUSABLE);</div><div class="line">          button3.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          buttonHfm.add(button1);</div><div class="line">          buttonHfm.add(button2);</div><div class="line">          buttonHfm.add(button3);</div><div class="line">          numVfm = <span class="keyword">new</span> VerticalFieldManager(Manager.FIELD_HCENTER);</div><div class="line">          charVfm = <span class="keyword">new</span> VerticalFieldManager(Manager.FIELD_HCENTER);</div><div class="line">          bcharVfm = <span class="keyword">new</span> VerticalFieldManager(Manager.FIELD_HCENTER);</div><div class="line">          signVfm = <span class="keyword">new</span> VerticalFieldManager(Manager.FIELD_HCENTER);</div><div class="line"></div><div class="line">          String num[] = KeyboardUtil.randomArray(<span class="keyword">new</span> String[] &#123; <span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>, <span class="string">"6"</span>, <span class="string">"7"</span>, <span class="string">"8"</span>,</div><div class="line">                       <span class="string">"9"</span>, <span class="string">"0"</span>, <span class="string">"确定"</span>, <span class="string">"←"</span> &#125;);</div><div class="line">          HorizontalFieldManager h1 = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">          HorizontalFieldManager h2 = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">          HorizontalFieldManager h3 = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">0</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">1</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">2</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">3</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">4</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">5</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">6</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">7</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">8</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h3.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">9</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h3.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">10</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          h3.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(num[<span class="number">11</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">         cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">         h3.add(cbf);</div><div class="line">          numVfm.add(h1);</div><div class="line">          numVfm.add(h2);</div><div class="line">          numVfm.add(h3);</div><div class="line">         <span class="comment">//字母键盘</span></div><div class="line">         HorizontalFieldManager hfm = <span class="keyword">new</span> HorizontalFieldManager(Manager.FIELD_HCENTER);</div><div class="line"></div><div class="line">           <span class="comment">// Rectangular button</span></div><div class="line">         cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"q"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">         cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"w"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"e"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"r"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"t"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"y"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"u"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"i"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"o"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"p"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm.add(cbf);</div><div class="line"></div><div class="line">           HorizontalFieldManager hfm1 = <span class="keyword">new</span> HorizontalFieldManager(Manager.FIELD_HCENTER);</div><div class="line"></div><div class="line">           <span class="comment">// Rectangular button</span></div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"a"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"s"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"d"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"f"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"g"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"h"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"j"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"k"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"l"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"←"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm1.add(cbf);</div><div class="line"></div><div class="line">           HorizontalFieldManager hfm2 = <span class="keyword">new</span> HorizontalFieldManager(Manager.FIELD_HCENTER);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"↑"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           <span class="comment">// Rectangular button</span></div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"z"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"x"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"d"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"v"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"b"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"n"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"m"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line">           cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"确定"</span>, CustomButtonField.RECTANGLE, Field.FOCUSABLE);</div><div class="line">           cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">           hfm2.add(cbf);</div><div class="line"></div><div class="line">           charVfm.add(hfm);</div><div class="line">           charVfm.add(hfm1);</div><div class="line">           charVfm.add(hfm2);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">           <span class="comment">/***********************************/</span></div><div class="line">           <span class="comment">//大写字母键盘</span></div><div class="line">              HorizontalFieldManager bhfm = <span class="keyword">new</span> HorizontalFieldManager(Manager.FIELD_HCENTER);</div><div class="line"></div><div class="line">                <span class="comment">// Rectangular button</span></div><div class="line">              cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"Q"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">              cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"W"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"E"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"R"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"T"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"Y"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"U"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"I"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"O"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"P"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm.add(cbf);</div><div class="line"></div><div class="line">                HorizontalFieldManager bhfm1 = <span class="keyword">new</span> HorizontalFieldManager(Manager.FIELD_HCENTER);</div><div class="line"></div><div class="line">                <span class="comment">// Rectangular button</span></div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"A"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"S"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"D"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"F"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"G"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"H"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"J"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"K"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"L"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"←"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm1.add(cbf);</div><div class="line"></div><div class="line">                HorizontalFieldManager bhfm2 = <span class="keyword">new</span> HorizontalFieldManager(Manager.FIELD_HCENTER);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"↓"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                <span class="comment">// Rectangular button</span></div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"Z"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"X"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"C"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"V"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"B"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"N"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"M"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line">                cbf = <span class="keyword">new</span> CustomButtonField(<span class="string">"确定"</span>, CustomButtonField.BIG, Field.FOCUSABLE);</div><div class="line">                cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">                bhfm2.add(cbf);</div><div class="line"></div><div class="line">                bcharVfm.add(bhfm);</div><div class="line">                bcharVfm.add(bhfm1);</div><div class="line">                bcharVfm.add(bhfm2);</div><div class="line">           <span class="comment">/***********************************/</span></div><div class="line">         <span class="comment">//符号键盘</span></div><div class="line">         String sign[] = <span class="keyword">new</span> String[] &#123; <span class="string">"!"</span>, <span class="string">"@"</span>, <span class="string">"#"</span>, <span class="string">"$"</span>, <span class="string">"%"</span>, <span class="string">"^"</span>, <span class="string">"&amp;"</span>, <span class="string">"←"</span>,</div><div class="line">                       <span class="string">"("</span>, <span class="string">")"</span>, <span class="string">"*"</span>, <span class="string">"确定"</span> &#125;;</div><div class="line">         HorizontalFieldManager sh1 = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">         HorizontalFieldManager sh2 = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">         HorizontalFieldManager sh3 = <span class="keyword">new</span> HorizontalFieldManager();</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">0</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">1</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">2</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">3</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh1.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">4</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">5</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">6</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">7</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh2.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">8</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh3.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">9</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh3.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">10</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">          cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">          sh3.add(cbf);</div><div class="line">          cbf = <span class="keyword">new</span> CustomButtonField(sign[<span class="number">11</span>], CustomButtonField.SIGN, Field.FOCUSABLE);</div><div class="line">         cbf.setChangeListener(<span class="keyword">this</span>);</div><div class="line">         sh3.add(cbf);</div><div class="line">         signVfm.add(sh1);</div><div class="line">         signVfm.add(sh2);</div><div class="line">         signVfm.add(sh3);</div><div class="line"></div><div class="line"></div><div class="line">          vfm.add(label);</div><div class="line">          vfm.add(passwd);</div><div class="line">          vfm.add(buttonHfm);</div><div class="line">          vfm.add(numVfm);</div><div class="line">          add(vfm);</div><div class="line">          Application.getApplication().addKeyListener(<span class="keyword">this</span>);           </div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">paintBackground</span><span class="params">(Graphics graphics)</span> </span>&#123;</div><div class="line">        graphics.setColor(Color.WHITE);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="keyword">int</span> index = <span class="number">0</span>;<span class="comment">//标识显示的键盘</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fieldChanged</span><span class="params">(Field field, <span class="keyword">int</span> context)</span> </span>&#123;</div><div class="line">        play();</div><div class="line">        <span class="keyword">if</span>(field <span class="keyword">instanceof</span> CustomButtonField)&#123;</div><div class="line">             <span class="comment">//virtKbd.setVisibility(VirtualKeyboard.HIDE_FORCE);</span></div><div class="line">             <span class="keyword">if</span>(<span class="string">"数字"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  <span class="keyword">if</span>(index == <span class="number">1</span>)&#123;</div><div class="line">                       vfm.replace(charVfm, numVfm);</div><div class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">2</span>)&#123;</div><div class="line">                       vfm.replace(signVfm, numVfm);</div><div class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">3</span>)&#123;</div><div class="line">                       vfm.replace(bcharVfm, numVfm);</div><div class="line">                  &#125;</div><div class="line">                  index = <span class="number">0</span>;</div><div class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"字母"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  <span class="keyword">if</span>(index == <span class="number">0</span>)&#123;</div><div class="line">                       vfm.replace(numVfm, charVfm);</div><div class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">2</span>)&#123;</div><div class="line">                       vfm.replace(signVfm, charVfm);</div><div class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">3</span>)&#123;</div><div class="line">                       vfm.replace(bcharVfm, charVfm);</div><div class="line">                  &#125;</div><div class="line">                  index = <span class="number">1</span>;</div><div class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"符号"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  <span class="keyword">if</span>(index == <span class="number">0</span>)&#123;</div><div class="line">                       vfm.replace(numVfm, signVfm);</div><div class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">1</span>)&#123;</div><div class="line">                       vfm.replace(charVfm, signVfm);</div><div class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(index == <span class="number">3</span>)&#123;</div><div class="line">                       vfm.replace(bcharVfm, signVfm);</div><div class="line">                  &#125;</div><div class="line">                  index = <span class="number">2</span>;</div><div class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"←"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  <span class="keyword">if</span>(passwd.getText().length()&gt;<span class="number">0</span>)&#123;</div><div class="line">                       passwd.setText(passwd.getText().substring(<span class="number">0</span>, passwd.getText().length()-<span class="number">1</span>));</div><div class="line">                  &#125;</div><div class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"确定"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  _edit.setText(passwd.getText());</div><div class="line">                  _edit1.setFocus();</div><div class="line">                  <span class="keyword">this</span>.close();</div><div class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"↑"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  vfm.replace(charVfm, bcharVfm);</div><div class="line">                  index = <span class="number">3</span>;</div><div class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"↓"</span>.equals(((CustomButtonField)field).getText()))&#123;</div><div class="line">                  vfm.replace(bcharVfm, charVfm);</div><div class="line">                  index = <span class="number">1</span>;</div><div class="line">             &#125;<span class="keyword">else</span>&#123;</div><div class="line">                  passwd.setText(passwd.getText() + ((CustomButtonField)field).getText());</div><div class="line">             &#125;</div><div class="line">             passwd.setFocus();<span class="comment">//设置点击按钮失去焦点</span></div><div class="line">        &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="comment">// create an instance of the player from the InputStream</span></div><div class="line">        Class clazz;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">             clazz = <span class="keyword">this</span>.getClass();</div><div class="line">            InputStream is = clazz.getResourceAsStream(<span class="string">"notify.wav"</span>);</div><div class="line">            <span class="comment">//create an instance of the player from the InputStream</span></div><div class="line">            Player player = javax.microedition.media.Manager.createPlayer(is, <span class="string">"audio/mpeg"</span>);</div><div class="line"></div><div class="line">             player.realize();</div><div class="line">             player.prefetch();</div><div class="line">             VolumeControl volumeControl = (VolumeControl) player.getControl(<span class="string">"VolumeControl"</span>);</div><div class="line">             volumeControl.setLevel(<span class="number">100</span>);</div><div class="line">             <span class="comment">// start the player</span></div><div class="line">             player.start();</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">             <span class="comment">// TODO Auto-generated catch block</span></div><div class="line">             e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">sublayout</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</div><div class="line">        layoutDelegate(Display.getWidth()-<span class="number">10</span>, <span class="number">210</span>);</div><div class="line">        setPosition(-<span class="number">15</span>, <span class="number">265</span>);</div><div class="line">        setExtent(Display.getWidth()-<span class="number">10</span>, <span class="number">180</span>);</div><div class="line">   &#125;</div><div class="line"></div><div class="line"></div><div class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">keyChar</span><span class="params">( <span class="keyword">char</span> key, <span class="keyword">int</span> status, <span class="keyword">int</span> time )</span> </span>&#123;</div><div class="line">       <span class="keyword">if</span>(key == Keypad.KEY_ESCAPE)&#123;</div><div class="line">            _edit1.setFocus();</div><div class="line">             <span class="keyword">this</span>.close();</div><div class="line">             <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">keyDown</span><span class="params">(<span class="keyword">int</span> keycode, <span class="keyword">int</span> time)</span></span></div><div class="line">  &#123;</div><div class="line">       <span class="keyword">if</span>(keycode == Keypad.KEY_ESCAPE)&#123;</div><div class="line">            _edit1.setFocus();</div><div class="line">             <span class="keyword">this</span>.close();</div><div class="line">             <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">       &#125;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">keyRepeat</span><span class="params">(<span class="keyword">int</span> keycode, <span class="keyword">int</span> time)</span></span></div><div class="line">  &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">keyStatus</span><span class="params">(<span class="keyword">int</span> keycode, <span class="keyword">int</span> time)</span></span></div><div class="line">  &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">keyUp</span><span class="params">(<span class="keyword">int</span> keycode, <span class="keyword">int</span> time)</span></span></div><div class="line">  &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">  &#125;   </div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">* CustomButtonField.java</div><div class="line">*</div><div class="line">* Copyright � 1998-2010 Research In Motion Ltd.</div><div class="line">*</div><div class="line">* Note: For the sake of simplicity, this sample application may not leverage</div><div class="line">* resource bundles and resource strings.  However, it is STRONGLY recommended</div><div class="line">* that application developers make use of the localization features available</div><div class="line">* within the BlackBerry development platform to ensure a seamless application</div><div class="line">* experience across a variety of languages and geographies.  For more information</div><div class="line">* on localizing your application, please refer to the BlackBerry Java Development</div><div class="line">* Environment Development Guide associated with this release.</div><div class="line">*/</div><div class="line"></div><div class="line"><span class="keyword">import</span> net.rim.device.api.ui.*;</div><div class="line"><span class="keyword">import</span> net.rim.device.api.system.*;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">* CustomButtonField - class which creates button fields of various shapes.</div><div class="line">* Demonstrates how to create custom ui fields.</div><div class="line">*/</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomButtonField</span> <span class="keyword">extends</span> <span class="title">Field</span> <span class="keyword">implements</span> <span class="title">DrawStyle</span> </span>&#123;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> RECTANGLE = <span class="number">1</span>;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SIGN = <span class="number">2</span>;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BIG = <span class="number">3</span>;</div><div class="line">   <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BUTTON = <span class="number">4</span>;</div><div class="line"></div><div class="line">   <span class="keyword">private</span> String _label;</div><div class="line">   <span class="keyword">private</span> <span class="keyword">int</span> _shape;</div><div class="line">   <span class="keyword">private</span> Font _font;</div><div class="line">   <span class="keyword">private</span> <span class="keyword">int</span> _labelHeight;</div><div class="line">   <span class="keyword">private</span> <span class="keyword">int</span> _labelWidth;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Constructs a button with specified label, and default style and shape.</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">CustomButtonField</span><span class="params">(String label)</span> </span>&#123;</div><div class="line">      <span class="keyword">this</span>(label, RECTANGLE, <span class="number">0</span>);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Constructs a button with specified label and shape, and default style.</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">CustomButtonField</span><span class="params">(String label, <span class="keyword">int</span> shape)</span> </span>&#123;</div><div class="line">      <span class="keyword">this</span>(label, shape, Field.FIELD_BOTTOM);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Constructs a button with specified label and style, and default shape.</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">CustomButtonField</span><span class="params">(String label, <span class="keyword">long</span> style)</span> </span>&#123;</div><div class="line">      <span class="keyword">this</span>(label, RECTANGLE, style);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Constructs a button with specified label, shape, and style.</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="title">CustomButtonField</span><span class="params">(String label, <span class="keyword">int</span> shape, <span class="keyword">long</span> style)</span> </span>&#123;</div><div class="line">      <span class="keyword">super</span>(style);</div><div class="line"></div><div class="line">      _label = label;</div><div class="line">      _shape = shape;</div><div class="line">      _font = getFont();</div><div class="line">      _labelHeight = _font.getHeight();</div><div class="line">      _labelWidth = _font.getAdvance(_label);</div><div class="line">      setMargin(<span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line">      <span class="comment">// setPadding(2,0,-2,0);</span></div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * <span class="doctag">@return</span> The text on the button</div><div class="line">   */</div><div class="line">   <span class="function">String <span class="title">getText</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> _label;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Field implementation.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@see</span> net.rim.device.api.ui.Field#getPreferredWidth()</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPreferredWidth</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span> (_shape == SIGN) &#123;</div><div class="line">         <span class="keyword">return</span> <span class="number">83</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span> (_shape == BIG) &#123;</div><div class="line">         <span class="keyword">return</span> _labelWidth + <span class="number">20</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span> (_shape == BUTTON) &#123;</div><div class="line">         <span class="keyword">return</span> _labelWidth + <span class="number">78</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> _labelWidth + <span class="number">22</span>;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Field implementation.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@see</span> net.rim.device.api.ui.Field#getPreferredHeight()</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPreferredHeight</span><span class="params">()</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span> (_shape == SIGN) &#123;</div><div class="line">         <span class="keyword">return</span> <span class="number">30</span>;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> _labelHeight + <span class="number">10</span>;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Field implementation.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@see</span> net.rim.device.api.ui.Field#drawFocus(Graphics, boolean)</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">drawFocus</span><span class="params">(Graphics graphics, <span class="keyword">boolean</span> on)</span> </span>&#123;</div><div class="line">      graphics.invert(<span class="number">1</span>, <span class="number">1</span>, getWidth() - <span class="number">2</span>, getHeight() - <span class="number">2</span>);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Field implementation.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@see</span> net.rim.device.api.ui.Field#layout(int, int)</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">layout</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</div><div class="line">      <span class="comment">// Update the cached font - in case it has been changed.</span></div><div class="line">      _font = getFont();</div><div class="line">      _labelHeight = _font.getHeight();</div><div class="line">      _labelWidth = _font.getAdvance(_label);</div><div class="line"></div><div class="line">      <span class="comment">// Calc width.</span></div><div class="line">      width = Math.min(width, getPreferredWidth());</div><div class="line"></div><div class="line">      <span class="comment">// Calc height.</span></div><div class="line">      height = Math.min(height, getPreferredHeight());</div><div class="line"></div><div class="line">      <span class="comment">// Set dimensions.</span></div><div class="line">      setExtent(width, height);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Field implementation.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@see</span> net.rim.device.api.ui.Field#paint(Graphics)</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics graphics)</span> </span>&#123;</div><div class="line">      <span class="keyword">int</span> textX, textY, textWidth;</div><div class="line">      <span class="keyword">int</span> w = getWidth();</div><div class="line">      <span class="keyword">int</span> h = getHeight();</div><div class="line"></div><div class="line">      graphics.drawRect(<span class="number">0</span>, <span class="number">0</span>, w, h);</div><div class="line"></div><div class="line">      textX = <span class="number">4</span>;</div><div class="line">      textY = <span class="number">2</span>;</div><div class="line">      textWidth = w - <span class="number">6</span>;</div><div class="line"></div><div class="line">      graphics.drawText(_label, textX, textY, (<span class="keyword">int</span>) (getStyle()</div><div class="line">                &amp; DrawStyle.ELLIPSIS | DrawStyle.HALIGN_MASK), textWidth);</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="comment">/**</span></div><div class="line">   * Overridden so that the Event Dispatch thread can catch this event instead</div><div class="line">   * of having it be caught here.</div><div class="line">   *</div><div class="line">   * <span class="doctag">@see</span> net.rim.device.api.ui.Field#navigationClick(int, int)</div><div class="line">   */</div><div class="line">   <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">navigationClick</span><span class="params">(<span class="keyword">int</span> status, <span class="keyword">int</span> time)</span> </span>&#123;</div><div class="line">      fieldChangeNotify(<span class="number">0</span>);</div><div class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[圆角矩形布局]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E5%9C%86%E8%A7%92%E7%9F%A9%E5%BD%A2%E5%B8%83%E5%B1%80/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 圆角的布局，内部元素遵守垂直布局的规则，可设置标题和图片,传空则不设置</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> Rolex</div><div class="line"> * <span class="doctag">@date</span> 2011-9-23</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RoundRectFieldManager</span> <span class="keyword">extends</span> <span class="title">VerticalFieldManager</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CORNER_RADIUS = <span class="number">18</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PANDDING = <span class="number">5</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MARGIN = <span class="number">10</span>;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">RoundRectFieldManager</span><span class="params">(Bitmap bitmap, String title)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(Manager.FIELD_HCENTER);</div><div class="line">        <span class="comment">// 横向放四个图片按钮</span></div><div class="line"><span class="comment">//          setPadding(0, 5, 0, 0); // OS 5.0未公开的API</span></div><div class="line">        setMargin(MARGIN, MARGIN, MARGIN, MARGIN); <span class="comment">// OS 5.0未公开的API</span></div><div class="line">        <span class="keyword">if</span>(title != <span class="keyword">null</span> &amp;&amp; !<span class="string">""</span>.equals(title))&#123;</div><div class="line">            HorizontalFieldManager h = <span class="keyword">new</span> HorizontalFieldManager()&#123;</div><div class="line">                <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">paintBackground</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line"></div><div class="line">                    <span class="keyword">int</span> oldColor = g.getColor();</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                        g.setColor(Color.RED);</div><div class="line">                        g.fillRoundRect(<span class="number">0</span>, <span class="number">0</span>, Display.getWidth() - MARGIN * <span class="number">2</span>, getHeight() + (PANDDING *<span class="number">2</span> + CORNER_RADIUS), CORNER_RADIUS, CORNER_RADIUS);<span class="comment">// 画实心的圆角的矩形</span></div><div class="line">                        g.setColor(Color.WHITE);</div><div class="line">                        g.drawRoundRect(<span class="number">0</span>, <span class="number">0</span>, Display.getWidth() - MARGIN * <span class="number">2</span>, getHeight() + (PANDDING *<span class="number">2</span> + CORNER_RADIUS), CORNER_RADIUS, CORNER_RADIUS); <span class="comment">// 换个颜色，画圆角的边框</span></div><div class="line">                    &#125; <span class="keyword">finally</span> &#123;</div><div class="line">                        g.setColor(oldColor);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;;</div><div class="line">            h.setPadding(PANDDING, PANDDING, PANDDING, PANDDING); <span class="comment">// OS 5.0未公开的API</span></div><div class="line">            h.add(<span class="keyword">new</span> BitmapField(bitmap));</div><div class="line">            h.add(<span class="keyword">new</span> RichTextField(title,NON_FOCUSABLE )&#123;</div><div class="line">                <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">layout</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</div><div class="line">                    width = Display.getWidth()- MARGIN * <span class="number">2</span>;</div><div class="line">                    <span class="keyword">super</span>.layout(width, height);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">            add(h);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">paintBackground</span><span class="params">(Graphics g)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> oldColor = g.getColor();</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            g.setColor(Color.WHITE);</div><div class="line">            g.fillRoundRect(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight(), <span class="number">20</span>, <span class="number">20</span>);<span class="comment">// 画实心的圆角的矩形</span></div><div class="line">            g.setColor(Color.WHITE);</div><div class="line">            g.drawRoundRect(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight(), <span class="number">20</span>, <span class="number">20</span>); <span class="comment">// 换个颜色，画圆角的边框</span></div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            g.setColor(oldColor);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[监听浏览器]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E7%9B%91%E5%90%AC%E6%B5%8F%E8%A7%88%E5%99%A8/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">PackageManager</span></span></div><div class="line">&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Entry point for this application</div><div class="line">     * <span class="doctag">@param</span> args Command line arguments (not used)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">try</span></div><div class="line">        &#123;</div><div class="line">            HttpFilterRegistry.registerFilter(<span class="string">"com.unionpay.m.p"</span>, <span class="string">"com.rim.samples.device.httpfilterdemo.filter"</span>);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span>(ControlledAccessException cae)</div><div class="line">        &#123;</div><div class="line">            <span class="comment">// Re-throw exception with explicit message</span></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ControlledAccessException( cae + <span class="string">" Http Filter Demo attempted to access API governed by Interactions/Browser Filtering "</span> +</div><div class="line">                <span class="string">"application permission.  Please set this permission to 'allow' under Options/Security Options/Application Permissions"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[读系统参数]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E8%AF%BB%E7%B3%BB%E7%BB%9F%E5%8F%82%E6%95%B0/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">String deviceId = DeviceInfo.getDeviceId() + <span class="string">""</span>;</div><div class="line">String deviceName = DeviceInfo.getDeviceName();</div><div class="line">String softName = DeviceInfo.getSoftwareVersion();</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[XML 解析]]></title>
      <url>http://bysonline.github.io/2012/07/16/XML-%E8%A7%A3%E6%9E%90/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlParser</span> </span>&#123;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 递归方法，用于将每一个节点元素遍历出来放入到hashtable（注：bb的api基于JDK1.3，不支持hashmap，泛型等）中</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> node</div><div class="line">     *            document中的节点</div><div class="line">     * <span class="doctag">@param</span> depth</div><div class="line">     *            节点的深度，用于做递归</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fetchNode</span><span class="params">(Node node, <span class="keyword">int</span> depth, Hashtable ht)</span> </span>&#123;</div><div class="line">        <span class="comment">/*</span></div><div class="line">         * 判断是否为一个node，如过是一个节点，找到所有的子节点和子节点的数量。</div><div class="line">         * 如果一个节点是一个文本节点，则将其放入到hashtable中，如果是一个元素节点， 则将该节点放入hashtable中，</div><div class="line">         * 并对其子元素进行递归，直到遍历到最后一个文本 元素，递归结束。</div><div class="line">         */</div><div class="line">        <span class="keyword">if</span> (node.getNodeType() == Node.ELEMENT_NODE) &#123;</div><div class="line">            <span class="comment">// 如果是一个节点，找到所有的子节点</span></div><div class="line">            NodeList childNodes = node.getChildNodes();</div><div class="line">            <span class="keyword">int</span> numChildren = childNodes.getLength();</div><div class="line"></div><div class="line">            Node firstChild = childNodes.item(<span class="number">0</span>);</div><div class="line">            <span class="keyword">if</span> (numChildren == <span class="number">1</span> &amp;&amp; firstChild.getNodeType() == Node.TEXT_NODE) &#123;</div><div class="line">                  ht.put(node.getNodeName(),</div><div class="line">                              firstChild.getNodeValue() == <span class="keyword">null</span> ? <span class="string">""</span> : firstChild</div><div class="line">                                          .getNodeValue());</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                  ht.put(node.getNodeName(),</div><div class="line">                              firstChild.getNodeValue() == <span class="keyword">null</span> ? <span class="string">""</span> : firstChild</div><div class="line">                                          .getNodeValue());</div><div class="line">                  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numChildren; ++i) &#123;</div><div class="line">                        fetchNode(childNodes.item(i), depth + <span class="number">1</span>, ht);</div><div class="line">                  &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="comment">// 如果不是node，那就是一个value</span></div><div class="line">            String nodeValue = node.getNodeValue();</div><div class="line">            <span class="comment">// 如果不value不是空，则放入hashtable中</span></div><div class="line">            <span class="keyword">if</span> (nodeValue.trim().length() != <span class="number">0</span>) &#123;</div><div class="line">                  ht.put(node.getNodeName(), node.getNodeValue() == <span class="keyword">null</span> ? <span class="string">""</span></div><div class="line">                              : node.getNodeValue());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[APP 启动 APP]]></title>
      <url>http://bysonline.github.io/2012/07/16/APP-%E5%90%AF%E5%8A%A8-APP/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ApplicationManager.getApplicationManager().launch(&quot;AppName&quot;);</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[文件操作]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 文件操作</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> Rolex</div><div class="line"> * <span class="doctag">@date</span> 2011-9-28</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUtil</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     *</div><div class="line">     * 将内容保存到SD卡上的文件中，如果文件不存在，则新建</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> content</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">writeFile</span><span class="params">(String content)</span> </span>&#123;     </div><div class="line">        <span class="keyword">boolean</span> isWrite=<span class="keyword">false</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            DataOutputStream os = <span class="keyword">null</span>;</div><div class="line">            FileConnection file = <span class="keyword">null</span>;            </div><div class="line"></div><div class="line">            file = (FileConnection) Connector.open(<span class="string">"file:///SDCard/config.xml"</span> , Connector.READ_WRITE);</div><div class="line">            <span class="keyword">if</span>(!file.exists())&#123;</div><div class="line">              file.create();</div><div class="line">            &#125;</div><div class="line">            os = file.openDataOutputStream();</div><div class="line">            os.write(content.getBytes());</div><div class="line"></div><div class="line">            os.close();</div><div class="line">            file.close();</div><div class="line">            isWrite = <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> isWrite;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[blackberry：黑莓错误代码及解决方法大全]]></title>
      <url>http://bysonline.github.io/2012/07/16/%E9%BB%91%E8%8E%93%E9%94%99%E8%AF%AF%E4%BB%A3%E7%A0%81%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%A4%A7%E5%85%A8/</url>
      <content type="html"><![CDATA[<p>首先，了解几个名词解释以方便对下文的理解。<br>JVM—Java Virtual Machine(Java虚拟机)<br>C++—一种计算机编程语言<br>GC—Gabage Collection JAVA/.NET中的垃圾回收<br>CRC校验—循环冗余校验码（Cyclic Redundancy Check）<br>JIT编译器—（Just-In-Time）JAVA语言编译器</p>
<h3 id="101-Previous-startup-failed"><a href="#101-Previous-startup-failed" class="headerlink" title="101 Previous startup failed"></a>101 Previous startup failed</h3><p>当jvm（Java虚拟机）启动过程中，前一个启动的项目失败了，设备已经被重置。这个错误表明jvm在启动时找到“启动进行中”这个标志位已经设置了，当前屏幕信息为：有意停止“系统继续重置”这个死循环，来纠正系统当前不正确的启动操作</p>
<h3 id="102-Invalid-code-in-filesystem"><a href="#102-Invalid-code-in-filesystem" class="headerlink" title="102 Invalid code in filesystem"></a>102 Invalid code in filesystem</h3><p>在文件系统中发现无效的代码。手持设备的系统检查.cod文件的变动时，在一些.cod文件中检测到这个问题。他肯可能是表明生成过程中发生了错 误，即在cod文件中存在一个有问题的签名。如果一些用户操作设备导致这个问题的发生，文件系统的代码被破坏，复位的周期将是连续循环的。唯一的恢复方法 是擦去设备并且恢复一个新的系统。</p>
<h3 id="103-Cannot-find-starting-address"><a href="#103-Cannot-find-starting-address" class="headerlink" title="103 Cannot find starting address"></a>103 Cannot find starting address</h3><p>找不到启动的地址，用于启动系统的引导cod文件找不到。这个错误表明一个用于引导系统的cod文件没有安装到设备上，或者格式不正确。</p>
<h3 id="104-Uncaught"><a href="#104-Uncaught" class="headerlink" title="104 Uncaught: "></a>104 Uncaught: <java-type-name></java-type-name></h3><p>非预期：《java模块名》jvm诊断出一个非预期的java代码异常错误抛出，程序可以继续执行，或者手持设备可以用桌面管理器连是USB线安装一个程序调试器来查看这些错误信息。事件日志里应该包含了异常错误的信息</p>
<h3 id="105-Example-DbRecSize"><a href="#105-Example-DbRecSize" class="headerlink" title="105 Example, DbRecSize"></a>105 Example, DbRecSize</h3><p>举例，DbRecSize文件系统API已经为一种特定的操作返回一种错误状态码，他可能表明在jvm上存在一个无效的或者错误的文件系统</p>
<h3 id="106-Graphics-system-error"><a href="#106-Graphics-system-error" class="headerlink" title="106 Graphics system error"></a>106 Graphics system error</h3><p>图形系统错误，在设备的图形系统里一个错误发生并被检测到</p>
<h3 id="107-operator-new-called"><a href="#107-operator-new-called" class="headerlink" title="107 operator new () called"></a>107 operator new () called</h3><p>在jvm里，操作new()回调一个c++类，该函数代码没有被正确的从VMRamObject对象来继承，新操作符需要被正确的继承。提取当前的(-后复位)的BUGDISP</p>
<h3 id="108-operator-delete-called"><a href="#108-operator-delete-called" class="headerlink" title="108 operator delete () called"></a>108 operator delete () called</h3><p>在jvm里，操作delete()回调一个c++类，，该函数代码没有被正确的从VMRamObject对象来继承，新操作符需要被正确的继承。提取当前的(-后复位)的BUGDISP</p>
<h3 id="109-PriorityMessageCount-error"><a href="#109-PriorityMessageCount-error" class="headerlink" title="109 PriorityMessageCount error: "></a>109 PriorityMessageCount error: <priority-count></priority-count></h3><p>优先级统计信息计算错误：&lt;优先级计算&gt;当它应该总大于或者等于零时，RimPriorityMessageCount返回的值是负的。这表明在系统中这是一个错误。<br>提取当前(-后复位)的BUGDISP和查看系统事件记录</p>
<h3 id="110-Non-idle-event-downtime-error"><a href="#110-Non-idle-event-downtime-error" class="headerlink" title="110 Non-idle event downtime error:  "></a>110 Non-idle event downtime error: <down-time> <idle-down-time></idle-down-time></down-time></h3><p>非空闲状态时间事件错误：&lt;时间&gt; &lt;空闲时间&gt;在jvm空闲时间统计时检测到一个错误，代表JVM空闲了很长时间。<br>这通常表明在手持设备或者JVM中发生一个错误。如果计数器空闲了400天以上的设备时间,他也可能出现。</p>
<h3 id="111-Font-engine-error"><a href="#111-Font-engine-error" class="headerlink" title="111 Font engine error"></a>111 Font engine error</h3><p>字体引擎错误：一个系统设备的字体引擎错误检测到。请查看当前的BUGDISP和事件日志</p>
<h3 id="112-Java-Native-Assertion-Failure"><a href="#112-Java-Native-Assertion-Failure" class="headerlink" title="112 Java Native Assertion Failure"></a>112 Java Native Assertion Failure</h3><p>Java本地化实例失败。一个本地化代码错误检测到。请查看当前的BUGDISP和事件日志</p>
<h3 id="200-应用程序管理器抛出一个非预期的线程异常错误，程序无法继续执行。重新复位手持设备。"><a href="#200-应用程序管理器抛出一个非预期的线程异常错误，程序无法继续执行。重新复位手持设备。" class="headerlink" title="200 应用程序管理器抛出一个非预期的线程异常错误，程序无法继续执行。重新复位手持设备。"></a>200 应用程序管理器抛出一个非预期的线程异常错误，程序无法继续执行。重新复位手持设备。</h3><h3 id="201-Crypto-initialization-code-failed"><a href="#201-Crypto-initialization-code-failed" class="headerlink" title="201 Crypto initialization code failed"></a>201 Crypto initialization code failed</h3><p>Crypto初始化代码失败。Crypto模块初始化失败手持设备无法继续</p>
<h3 id="202-在密匙存储上检测到一个破解攻击行为，程序无法继续"><a href="#202-在密匙存储上检测到一个破解攻击行为，程序无法继续" class="headerlink" title="202 在密匙存储上检测到一个破解攻击行为，程序无法继续"></a>202 在密匙存储上检测到一个破解攻击行为，程序无法继续</h3><h3 id="203-Console-process-died"><a href="#203-Console-process-died" class="headerlink" title="203 Console process died"></a>203 Console process died</h3><p>控制台进程死亡。应用程序管理器控制台进程已经挂起。这看起来非常象执行程序时发生异常错误的现象</p>
<h3 id="204-Persistent-Content-Exception"><a href="#204-Persistent-Content-Exception" class="headerlink" title="204 Persistent Content Exception"></a>204 Persistent Content Exception</h3><p>本地内存内容异常。一个应用程序试图提交一个文本对象到本地内存里。这个情况将仅仅发生在：如果内容保护服务打开了，然后一个进程试图保存一些文本 标记数据在本地内存里。当这个异常没有被正确处理过，可能说明本地内存已经处于损坏的状态。我们需要重设和回滚到最后正常状态的提交点。说明：这个jvm 异常反映了在Java代码里有一个错误的地方，Jvm仅仅只是简单的诊断这个错误。如果这不是jvm的问题，那么事件日志将包含足够的Java代码错误信 息。</p>
<h3 id="300-303-Bad-load"><a href="#300-303-Bad-load" class="headerlink" title="300-303 Bad load"></a>300-303 Bad load</h3><p>无效的加载持续，运行应用程序加载器重新给手持设备加载操作系统和应用程序</p>
<h3 id="310-314-Hardware-failure"><a href="#310-314-Hardware-failure" class="headerlink" title="310-314 Hardware failure"></a>310-314 Hardware failure</h3><p>硬件错误。尝试硬复位手持设备：关机，拿掉电池，等待一会儿，换掉电池看看设备重新启动时会出现什么状况，或者运行应用程序加载器重新给手持设备加载操作系统和应用程序。注意：如果这些办法没有解决这个错误，请联系你的服务提供商</p>
<h3 id="320-325-AMX-failure"><a href="#320-325-AMX-failure" class="headerlink" title="320-325 AMX failure"></a>320-325 AMX failure</h3><p>AMX 失败。请运行应用程序加载器重新给手持设备加载操作系统和应用程序</p>
<h3 id="330-339-Application-tasks-failure"><a href="#330-339-Application-tasks-failure" class="headerlink" title="330-339 Application tasks failure"></a>330-339 Application tasks failure</h3><p>应用程序任务失败。请运行应用程序加载器重新给手持设备加载操作系统和应用程序</p>
<h3 id="340-343-Memory-failure"><a href="#340-343-Memory-failure" class="headerlink" title="340-343 Memory failure"></a>340-343 Memory failure</h3><p>内存错误。您可能看到手持设备报告如下错误代码：<br>Device Error 340<br>Device Error 341<br>Device Error 342<br>Device Error 343<br>原因：内存错误<br>解决：减少你手机里日历约会同步的个数<br>1、在桌面管理器里，双击Intellisync图标，点击配置PIM按钮<br>2、在设备应用程序列表中，选择日历<br>3、点击配置，高级设置，<br>4、在数据范围选项页，完成其中的一个任务来减少你手机里日历约会同步的个数，如果你选择了“调度最佳未来项目选择”的选项，手持设备仅仅只是同步未来的日历约会，如果你点击并输入了一个日期范围的调度项目选项，手持设备仅仅只是同步在选择日期范围内的日历计划约会.<br>5、点击OK保存改变，关闭窗口<br>6、在配置窗口，确定日历程序的复选框选择了，点击OK<br>7、在Intellisync窗口，确认同步PIM复选框已经选择了，然后点击立即同步。设备会减少至少一个以上的日历约会项目。<br>如果你仍然看到这个错误信息。请运行应用程序加载器重新给手持设备加载操作系统和应用程序</p>
<h3 id="350-359-Software-application-failure"><a href="#350-359-Software-application-failure" class="headerlink" title="350-359 Software application failure"></a>350-359 Software application failure</h3><p>应用程序软件错误，您可能看到手持设备报告如下错误代码：<br>Device Error 350<br>Device Error 352<br>Device Error 353<br>Device Error 354<br>Device Error 355<br>Device Error 356<br>Device Error 357<br>Device Error 358<br>Device Error 359<br>原因：应用程序软件错误<br>解决方案：尝试硬复位手持设备，运行应用程序加载器重新给手持设备加载操作系统和应用程序。在向导窗口，不要选择任何第三方应用程序。在高级选项里，选择清除当前所有已安装的应用程序复选框。</p>
<h3 id="360-363-Flash-memory-failure"><a href="#360-363-Flash-memory-failure" class="headerlink" title="360-363 Flash memory failure"></a>360-363 Flash memory failure</h3><p>Flash内存错误。尝试硬复位手持设备，运行应用程序加载器重新给手持设备加载操作系统和应用程序。</p>
<h3 id="365-368-This-one-is-often-followed-by-“OHHH-amp-”"><a href="#365-368-This-one-is-often-followed-by-“OHHH-amp-”" class="headerlink" title="365-368 This one is often followed by “OHHH @&amp;#%!!”"></a>365-368 This one is often followed by “OHHH @&amp;#%!!”</h3><p>这是一个经常跟随 “OHHH @&amp;#%!!”出现的错误，请联系服务提供商</p>
<h3 id="395-Unclassified-error-code"><a href="#395-Unclassified-error-code" class="headerlink" title="395 Unclassified error code"></a>395 Unclassified error code</h3><p>未分类的错误代码<br>原因：<br>设备395代码表明是一个未分类的错误代码。手持设备安装了第三方应用程序可能导致了这个错误产生<br>解决方案1<br>尝试硬复位手持设备：关机，拿掉电池，等待一会儿，换掉电池看看设备重新启动时会出现什么状况<br>解决方案2<br>清除和重新加载手持设备的数据<br>1、在黑莓桌面管理器里，用备份和还原工具创建你的手机的数据备份文件。如需更多信息，请参考桌面管理器在线帮助里的“手持设备备份信息”。警告：下面的步骤可能清除手持设备的数据<br>2、打开桌面管理器，双击应用程序加载器图标<br>3、单击下一步，出现应用程序选择窗口<br>4、确认必须的应用程序已经选择了，点击下一步<br>5、点击“高级”<br>6、选择“清除所有的应用程序数据和当前已经安装的应用程序”玄虚，点击下一步<br>7、点击完成。当手持设备的操作系统和应用程序重新加载时，手持设备的数据被清除，<br>8、使用备份和还原工具从备份的数据文件还原到手持设备中，如需更多信息，请参考桌面管理器在线帮助里的“手持设备还原信息”。</p>
<h3 id="400-564-Page-faults"><a href="#400-564-Page-faults" class="headerlink" title="400-564 Page faults"></a>400-564 Page faults</h3><p>页面文件失效。运行应用程序加载器重新给手持设备加载操作系统和应用程序</p>
<h3 id="410-Radio-failure"><a href="#410-Radio-failure" class="headerlink" title="410 Radio failure"></a>410 Radio failure</h3><p>无线电服务失败。<br>尝试硬复位手持设备，运行应用程序加载器重新给手持设备加载操作系统和应用程序。注意：如果这样都没有解决这个错误，请请联系服务提供商<br>Error:411=电池模块问题,更换电池<br>Error:499=软件问题,重启手持设备.</p>
<h3 id="501-VM-THREAD-SWITCHED"><a href="#501-VM-THREAD-SWITCHED" class="headerlink" title="501 VM_THREAD_SWITCHED"></a>501 VM_THREAD_SWITCHED</h3><p>线程已经被切换，内部错误，这是在VM中被内部使用的一个错误返回信息。它应该从会不报告为一个设备错误代码。</p>
<h3 id="502-VM-PROCESS-DEATH"><a href="#502-VM-PROCESS-DEATH" class="headerlink" title="502 VM_PROCESS_DEATH"></a>502 VM_PROCESS_DEATH</h3><p>进程已死（挂起），所有的进程已经退出，最后一个java进程已被终止，没有任何程序可以执行</p>
<h3 id="503-VM-THREAD-DEATH"><a href="#503-VM-THREAD-DEATH" class="headerlink" title="503 VM_THREAD_DEATH"></a>503 VM_THREAD_DEATH</h3><p>线程已死（挂起），内部错误，这是在VM中被内部使用的一个错误返回信息。它应该从不会报告为一个设备错误代码</p>
<h3 id="504-VM-THREAD-SWITCH"><a href="#504-VM-THREAD-SWITCH" class="headerlink" title="504 VM_THREAD_SWITCH"></a>504 VM_THREAD_SWITCH</h3><p>线程已经被切换，内部错误，这是在VM中被内部使用的一个错误返回信息。它应该从不会报告为一个设备错误代码</p>
<h3 id="505-VM-BAD-CODE5-I"><a href="#505-VM-BAD-CODE5-I" class="headerlink" title="505 VM_BAD_CODE5 I"></a>505 VM_BAD_CODE5 I</h3><p>无效的代码：无效字节代码，在JIT编译器里发生一个错误</p>
<h3 id="506-Uncaught-Exception"><a href="#506-Uncaught-Exception" class="headerlink" title="506 Uncaught Exception"></a>506 Uncaught Exception</h3><p>未知的异常：在初始化VM的java线程的时候一个未知的java异常被抛出，导致了系统被迫结束了唯一活动的线程。事件日志包含了异常的回滚记录!</p>
<h3 id="507-Unsatisfied-Link"><a href="#507-Unsatisfied-Link" class="headerlink" title="507 Unsatisfied Link"></a>507 Unsatisfied Link</h3><p>在cod文件里有不合适的文件链接关联，可能丢失了cod文件，（原文的英文是如此）<br>Device Error 5059<br>Device Error 5077<br>手持设备没有安装任何应用程序<br>原因1<br>当应用程序加载器工作时，黑莓设备上存在的应用程序已经被清除，但应用程序加载器加载新的应用程序时失败了<br>解决方案<br>1、确认你的电脑上已经正确安装了设备软件<br>2、请直接将您的黑莓设备直接连接到一台笔记本电脑的USB接口处<br>3、如果第三方程序（如：杀毒软件）已经使用了和桌面管理器手持设备的相同的COM端口，关闭第三方程序来释放COM端口<br>4、如果你使用USB数据线链接黑莓设备到你的电脑的串口，请用USB端口直接链接BB<br>5、在桌面管理器里，双击应用程序加载器<br>6、用应用程序加载器安装设备系统软件<br>原因2<br>如果你输入密码错误超过10次，你bb上所有的数据和程序都会被清除<br>解决<br>1、在桌面管理器里，双击应用程序加载器<br>2、用应用程序加载器安装设备系统软件</p>
<h3 id="508-Invalid-object"><a href="#508-Invalid-object" class="headerlink" title="508 Invalid object"></a>508 Invalid object</h3><p>无效的对象，当vm执行一个调试器命令时检测到一个问题：无效的对象</p>
<h3 id="509-VM-PPO-INFINITE-LOOP"><a href="#509-VM-PPO-INFINITE-LOOP" class="headerlink" title="509 VM_PPO_INFINITE_LOOP"></a>509 VM_PPO_INFINITE_LOOP</h3><p>在垃圾手机的PPO阶段中发现死循环，在GC的PPO阶段中，最大的迭代总数必须是系统中的文件句柄的最大数字。这个错误表明这个迭代总数已经超过 这个数，因而在PPO循环中或者不正确的文件系统中出现了一个瑕疵。在错误字符串中可以提取到一个特别的16进制整数值，是当前检测到的死循环记录的id 值</p>
<h3 id="510-Deadlock"><a href="#510-Deadlock" class="headerlink" title="510 Deadlock"></a>510 Deadlock</h3><p>死锁，所有的线程对象都在等待，但一个线程返回结果时已经死锁了。系统不能从这个死锁状态中恢复，因为所有的线程都被锁定了。</p>
<h3 id="511-Debug-connection-died"><a href="#511-Debug-connection-died" class="headerlink" title="511 Debug connection died"></a>511 Debug connection died</h3><p>调试器连接已经死锁，当调试的时候，vm的问题或者不正确的调试命令发送给vm时，可能导致这个问题发生</p>
<h3 id="512-GC-Aborted"><a href="#512-GC-Aborted" class="headerlink" title="512 GC Aborted"></a>512 GC Aborted</h3><p>GC（垃圾收集）已经终止，空间垃圾收集器程序被用户操作事件强制终止了，诸如挤压键盘或者移动滚轮操作</p>
<h3 id="513-needs-running"><a href="#513-needs-running" class="headerlink" title="513  needs running"></a>513 <clinit> needs running</clinit></h3><p><clinit>类需要先运行。此类名<clinit>能继续执行之前要求执行一个opcode，。</clinit></clinit></p>
<h3 id="514-needs-running"><a href="#514-needs-running" class="headerlink" title="514  needs running"></a>514 <init> needs running</init></h3><p><init>需要运行。一个新的类实例在使用之前必须通过默认构造函数初始化和分配内存空间。</init></p>
<h3 id="515-Object-group-too-big"><a href="#515-Object-group-too-big" class="headerlink" title="515 Object group too big"></a>515 Object group too big</h3><p>对象组太大。jvm不能正确的获得对象组，不是因为对象太多就是因为对象组太大</p>
<h3 id="516-Persistent-ids-exhausted"><a href="#516-Persistent-ids-exhausted" class="headerlink" title="516 Persistent ids exhausted"></a>516 Persistent ids exhausted</h3><p>ids固件设备衰竭。当访问一个固件对象时，jvm发现这个本地内存id计数器已经达到最大限制。对象不能被提交，同时报告一个致命的错误。这个错误可能从不会发生，除非这个设备大量使用了数年之久。</p>
<h3 id="517-Filesystem-corrupt"><a href="#517-Filesystem-corrupt" class="headerlink" title="517 Filesystem corrupt"></a>517 Filesystem corrupt</h3><p>文件系统不正确。在jvm本地内存里检测到一个错误（矛盾）的分配地址</p>
<h3 id="518-Unexpected-longjmp5"><a href="#518-Unexpected-longjmp5" class="headerlink" title="518 Unexpected longjmp5"></a>518 Unexpected longjmp5</h3><p>意外的longjmp指令。一个垃圾收集器指令方面结束了一个longjmp指令。这可能表明当指令没有中断即将完成操作时，这个标记阶段被这个错误中断了。这个情况应该从不会发生，因为当设备非空闲的时候，这些操作会被执行，同时,<br>仅仅当设备空闲时,垃圾收集器的工作才会被中断</p>
<h3 id="519-Internal-Error"><a href="#519-Internal-Error" class="headerlink" title="519 Internal Error"></a>519 Internal Error</h3><p>内部服务器错误。Jvm系统丢失或者被禁止</p>
<h3 id="520-Internal-Return"><a href="#520-Internal-Return" class="headerlink" title="520 Internal Return"></a>520 Internal Return</h3><p>内部返回一个错误，表明一个java方法返回的一种内部的状态需要执行</p>
<h3 id="521-Dangerous-Wait-An-Object"><a href="#521-Dangerous-Wait-An-Object" class="headerlink" title="521 Dangerous Wait An Object"></a>521 Dangerous Wait An Object</h3><p>一个危险的等待对象。一个线程执行Wait（）方法时被另外一个对象锁定。这个仅仅在基于jvm的模拟器里控制调试应用程序切换时才会检查</p>
<h3 id="522-Interlaced-synchronization"><a href="#522-Interlaced-synchronization" class="headerlink" title="522 Interlaced synchronization"></a>522 Interlaced synchronization</h3><p>交互式同步错误，对象的线程已经通过一个命令获得了2个锁定，但是，这2个已经取得的锁定类型并不匹配线程被锁定之前的命令。这表明一个即将发生潜在的死锁情况被报告。这个仅仅在基于jvm的模拟器里控制调试应用程序切换时才会检查</p>
<h3 id="523-System-process-died"><a href="#523-System-process-died" class="headerlink" title="523 System process died"></a>523 System process died</h3><p>系统进程已死（挂起）。一个致命的java程序错误导致系统已经被终止，设备无法继续正常的操作，请复位重新启动手持设备。</p>
<h3 id="524-LMM-error"><a href="#524-LMM-error" class="headerlink" title="524 LMM error"></a>524 LMM error</h3><p>LMM错误。一个对象被低内存管理器作了回收标记，但内存垃圾收集时他没有被正确释放。这个仅仅在基于jvm的模拟器里控制调试应用程序切换时才会检查</p>
<h3 id="525-Bad-persistent-object"><a href="#525-Bad-persistent-object" class="headerlink" title="525 Bad persistent object"></a>525 Bad persistent object</h3><p>损坏的本地内存对象。当垃圾收集期间，从本地内存根目录检测到一个自动操作提交到了一个非持久本地对象，这个类型的对象已经记录到事件日志里了</p>
<h3 id="526-java-lang-Object-not-found"><a href="#526-java-lang-Object-not-found" class="headerlink" title="526 java.lang.Object not found"></a>526 java.lang.Object not found</h3><p>类定义java.lang.Object对象未找到。</p>
<h3 id="527-java-lang-String-not-found"><a href="#527-java-lang-String-not-found" class="headerlink" title="527 java.lang.String not found"></a>527 java.lang.String not found</h3><p>类定义java.lang.String对象未找到</p>
<h3 id="528-–529-Corrupt-filesystem"><a href="#528-–529-Corrupt-filesystem" class="headerlink" title="528 –529 Corrupt filesystem"></a>528 –529 Corrupt filesystem</h3><p>错误的文件系统。不可恢复的错误，继续执行的话将会导致所有数据丢失。这个错误信息包含了内部“错误原因”的数字代码。<br>jvm编译器常见错误代码<br>1.根数组引用不是有效的数组引用<br>2.根数组类型不是Object[]<br>3.根数组大小小于1，如Object[0]</p>
<ol>
<li>root[0]里的内存不是有效的引用</li>
<li>root[0]类型不是一个长整型哈希表<br>6.数组头部段包含一个无效的引用</li>
<li>在本地Object[]的一个项目中包含一个无效的引用<br>8.一个对象类型引用了一个未知的cod文件<br>9.在内存里，一个cod文件中的对象的类型描叙文件大小不匹配</li>
<li>一个对象里面有一个无效的类型字段引用<br>11.对象中一个引用的类型字段链接到了另一对象的无效类型<br>12.在描叙符中一个本地Object[]丢失!<br>13.在本地内存中对象没有被标记为persis表<br>14.根数组被分割，一个分隔段无效<h3 id="530-VM-PREVENT-GC-OVERFLOW"><a href="#530-VM-PREVENT-GC-OVERFLOW" class="headerlink" title="530 VM_PREVENT_GC_OVERFLOW"></a>530 VM_PREVENT_GC_OVERFLOW</h3>_preventGC 溢出。原始对象的固定值会被保护起来防止被垃圾收集器收走。这个错误表明,<br>数值可能超出了被保护对象的固定的极限。如果设备被重置或者线程回滚事件被记录，这个实际的数值可以提取出来。<h3 id="531-Flash-exhausted"><a href="#531-Flash-exhausted" class="headerlink" title="531 Flash exhausted"></a>531 Flash exhausted</h3>内存已经耗尽用完。jvm无法容许超出内存空间的某些操作。如果jvm无法完成分配需要的内存空间大小，将会报告这个错误<h3 id="532-VM-ASSERTION-FAILED"><a href="#532-VM-ASSERTION-FAILED" class="headerlink" title="532 VM_ASSERTION_FAILED"></a>532 VM_ASSERTION_FAILED</h3>维护任务失败。通常，当设备没有启动允许维护状态时，这个jvm错误一般不会被报告，模拟器在调试状态时可能会报告这个错误，表明一个vm维护操作违反了约定。可以尝试输入BKPT来激活调试器，然后转储这个本地堆栈转交给vm组<h3 id="533-VM-RUN-METHOD"><a href="#533-VM-RUN-METHOD" class="headerlink" title="533 VM_RUN_METHOD"></a>533 VM_RUN_METHOD</h3><method>方法需要使用国际标准的ECMAScript脚本调用方法才能运行<h3 id="534-VM-FAST-RESET-DISABLED"><a href="#534-VM-FAST-RESET-DISABLED" class="headerlink" title="534 VM_FAST_RESET_DISABLED"></a>534 VM_FAST_RESET_DISABLED</h3>快速复位被禁止。内部过去经常用这个代码表示快速复位能力是无效的。请经常使用平台制定的代码<h3 id="535-VM-UNUSED-535"><a href="#535-VM-UNUSED-535" class="headerlink" title="535 VM_UNUSED_535"></a>535 VM_UNUSED_535</h3>未使用的vm错误。错误535意味着内存溢出。导致535错误的一个原因可能是一个运行的线程内存溢出，导致虚拟内存线程计划任务程序终止了。这个错误是已知的，发生在一个启动的队列期间，或如果主事件线程被停止了。<br>解决方案：<br>首先，硬启动手持设备。如果不能解决问题，从你的载体获得并安装最新版的黑莓手持设备ROM软件，然后，运行桌面管理器里的应用程序加载器更新手持设备。或者删除一些铃声和主题文件等等以释放存储空间<h3 id="536-VM-FAST-RESET-BAD-INSTANCE"><a href="#536-VM-FAST-RESET-BAD-INSTANCE" class="headerlink" title="536 VM_FAST_RESET_BAD_INSTANCE"></a>536 VM_FAST_RESET_BAD_INSTANCE</h3>vm快速复位实例检查失败。内部过去经常用这个代码表示：vm结构跳过了错误的地址空间或者vm已经被破坏了<h3 id="537-VM-FAST-RESET-BAD-HEAP"><a href="#537-VM-FAST-RESET-BAD-HEAP" class="headerlink" title="537 VM_FAST_RESET_BAD_HEAP"></a>537 VM_FAST_RESET_BAD_HEAP</h3>快速复位错误，堆检查失败。内部过去经常用这个代码表示：vm堆已经无效了，或者指针堆已经无效</method></li>
</ol>
<h3 id="538-VM-FAST-RESET-BAD-IRAM"><a href="#538-VM-FAST-RESET-BAD-IRAM" class="headerlink" title="538 VM_FAST_RESET_BAD_IRAM"></a>538 VM_FAST_RESET_BAD_IRAM</h3><p>快速复位IRAM损害，IRAM检查失败。内部过去经常用这个代码表示：vm的IRAM检查中检测到寄存在IRAM中无效的vm数据结构（线程+本地堆栈），或者指针</p>
<h3 id="539-VM-FAST-RESET-NOT-IDLE"><a href="#539-VM-FAST-RESET-NOT-IDLE" class="headerlink" title="539 VM_FAST_RESET_NOT_IDLE"></a>539 VM_FAST_RESET_NOT_IDLE</h3><p>快速复位状态非空闲。内部过去经常用这个代码表示：当复位发生时vm正忙，类似这样的问题导致快速复位无法继续</p>
<h3 id="540-VM-FAST-RESET-MULTIPLE-RESETS"><a href="#540-VM-FAST-RESET-MULTIPLE-RESETS" class="headerlink" title="540 VM_FAST_RESET_MULTIPLE_RESETS"></a>540 VM_FAST_RESET_MULTIPLE_RESETS</h3><p>多重复位错误。内部过去经常用这个代码表示：最近一次复位的时间小于最小复位时间间隔。由于禁止了短时间内多重复位次数，这个可以防止快速复位的死循环</p>
<h3 id="541-VM-HEAP-COMPACT-INFINITE-LOOP"><a href="#541-VM-HEAP-COMPACT-INFINITE-LOOP" class="headerlink" title="541 VM_HEAP_COMPACT_INFINITE_LOOP"></a>541 VM_HEAP_COMPACT_INFINITE_LOOP</h3><p>在堆压缩中检测到死循环。Vm在内存堆里检测到一个问题，表明这个内存块是无效的。当进行内存堆压缩时，在确认一个可能的死循环时这个问题可以被检 测到，当设备包含了这个错误条件时，bugdisp记录和事件日志可以快速提取这个错误信息。如果可能的话，内存映像将会保存下来。</p>
<h3 id="542-Transient-memory-leak"><a href="#542-Transient-memory-leak" class="headerlink" title="542 Transient memory leak"></a>542 Transient memory leak</h3><p>瞬间内存泄露。Jvm检测到某些内存没有被释放，这表明发生了内存泄露。希望原因能够尽早检测出来，避免这个情况的发生</p>
<h3 id="543-VM-FS-MISMATCH"><a href="#543-VM-FS-MISMATCH" class="headerlink" title="543 VM_FS_MISMATCH"></a>543 VM_FS_MISMATCH</h3><p>文件系统不匹配。安装了不兼容的java文件系统。Jvm检测到现有的系统代码和经常用于创建java文件系统的系统代码有不同。这意味着java本地方法可能没有被正确的编译链接，所以，不能肯定系统的完整性。系统无法通过使用vm<br>DLFX和DLPS命令恢复，也不能删除或修理本地内存的错误。这可能清除所有的数据和固件内容，请重新链接编译文件系统，才能匹配新的系统代码。恢复顺序非常<br>重要：1.删除应用程序，2.删除本地内存内容，3.复位设备</p>
<h3 id="544-VM-SECTION-MAP-OVERFLOW"><a href="#544-VM-SECTION-MAP-OVERFLOW" class="headerlink" title="544 VM_SECTION_MAP_OVERFLOW"></a>544 VM_SECTION_MAP_OVERFLOW</h3><p>一个模块引用超过了255个其他模块。Vm检测到一个模块试图引用超过了255个其他的模块。当错误检测到的时候，文件系统应该立即获取到该错误</p>
<h3 id="545-VM-INCOMPATIBLE-FILESYS"><a href="#545-VM-INCOMPATIBLE-FILESYS" class="headerlink" title="545 VM_INCOMPATIBLE_FILESYS"></a>545 VM_INCOMPATIBLE_FILESYS</h3><p>Vm检测到一个不兼容的或无效的文件系统存在。当错误检测到的时候，文件系统应该立即获取到该错误</p>
<h3 id="546-VM-UNUSED-546"><a href="#546-VM-UNUSED-546" class="headerlink" title="546 VM_UNUSED_546"></a>546 VM_UNUSED_546</h3><p>未使用（的内部错误代码）。Vm检测到文件系统中的内存映像是无效的（CRC冗余检查失败），重新复位机器好过复制错误的内存<br>内容</p>
<h3 id="547-VM-UNUSED-547"><a href="#547-VM-UNUSED-547" class="headerlink" title="547 VM_UNUSED_547"></a>547 VM_UNUSED_547</h3><p>未使用（的内部错误代码）。Vm错误</p>
<h3 id="548-VM-UNUSED-548"><a href="#548-VM-UNUSED-548" class="headerlink" title="548 VM_UNUSED_548"></a>548 VM_UNUSED_548</h3><p>未使用（的内部错误代码）。Vm错误</p>
<h3 id="549-VM-UNUSED-549"><a href="#549-VM-UNUSED-549" class="headerlink" title="549 VM_UNUSED_549"></a>549 VM_UNUSED_549</h3><p>未使用（的内部错误代码）。Vm错误</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[自定义图片背景的button]]></title>
      <url>http://bysonline.github.io/2011/09/23/%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E7%9A%84%20button/</url>
      <content type="html"><![CDATA[<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * 自定义图片背景的button</div><div class="line"> *</div><div class="line"> * <span class="doctag">@author</span> Rolex</div><div class="line"> * <span class="doctag">@date</span> 2011-9-23</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BitmapBackgroundButtonField</span> <span class="keyword">extends</span> <span class="title">Field</span> </span>&#123;      </div><div class="line">    <span class="keyword">private</span> String _label;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> _labelHeight;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> _labelWidth;</div><div class="line">    <span class="keyword">private</span> Font _font;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Bitmap _currentBitmap;</div><div class="line">    <span class="keyword">private</span> Bitmap _onBitmap;</div><div class="line">    <span class="keyword">private</span> Bitmap _offBitmap;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Constructor.</div><div class="line">     * <span class="doctag">@param</span> text The text to be displayed on the button</div><div class="line">     * <span class="doctag">@param</span> style Combination of field style bits to specify display attributes</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BitmapBackgroundButtonField</span><span class="params">(String text, <span class="keyword">long</span> style,Bitmap bitmap1, Bitmap bitmap2)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>(style);</div><div class="line"></div><div class="line">        _font = getFont();</div><div class="line">        _label = text;</div><div class="line">        _labelHeight = _font.getHeight();</div><div class="line">        _labelWidth = _font.getAdvance(_label);</div><div class="line">        _onBitmap = bitmap1;</div><div class="line">        _offBitmap = bitmap2;</div><div class="line">        _currentBitmap = _offBitmap;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * <span class="doctag">@return</span> The text on the button</div><div class="line">     */</div><div class="line">    <span class="function">String <span class="title">getText</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> _label;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#getPreferredHeight()</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPreferredHeight</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">90</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#getPreferredWidth()</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPreferredWidth</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> <span class="number">70</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.  Changes the picture when focus is gained.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#onFocus(int)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onFocus</span><span class="params">(<span class="keyword">int</span> direction)</span></span></div><div class="line">    &#123;</div><div class="line">      _currentBitmap = _onBitmap;</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.  Changes picture back when focus is lost.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#onUnfocus()</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onUnfocus</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">      _currentBitmap = _offBitmap;</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#drawFocus(Graphics, boolean)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">drawFocus</span><span class="params">(Graphics graphics, <span class="keyword">boolean</span> on)</span></span></div><div class="line">    &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#layout(int, int)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">layout</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> height)</span></span></div><div class="line">    &#123;</div><div class="line">        setExtent(Math.min( width, getPreferredWidth()),</div><div class="line">        Math.min( height, getPreferredHeight()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Field implementation.</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#paint(Graphics)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">(Graphics graphics)</span></span></div><div class="line">    &#123;      </div><div class="line">        <span class="comment">// First draw the background colour and picture</span></div><div class="line">        graphics.setColor(Color.WHITE);</div><div class="line">        graphics.fillRect(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight());</div><div class="line">        graphics.drawBitmap(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight(), _currentBitmap, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"></div><div class="line">        <span class="comment">// Then draw the text</span></div><div class="line">        graphics.setColor(Color.BLACK);</div><div class="line">        graphics.setFont(_font.derive(Font.BOLD, <span class="number">13</span>));</div><div class="line"></div><div class="line"><span class="comment">//        graphics.drawText(_label, 4, 70,</span></div><div class="line"><span class="comment">//            (int)( getStyle() &amp; DrawStyle.ELLIPSIS | DrawStyle.HALIGN_MASK ),</span></div><div class="line"><span class="comment">//            getWidth() - 6 );</span></div><div class="line">        graphics.drawText(_label, <span class="number">0</span>, _currentBitmap.getHeight() + <span class="number">4</span>, graphics.HCENTER);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Overridden so that the Event Dispatch thread can catch this event</div><div class="line">     * instead of having it be caught here..</div><div class="line">     * <span class="doctag">@see</span> net.rim.device.api.ui.Field#navigationClick(int, int)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">navigationClick</span><span class="params">(<span class="keyword">int</span> status, <span class="keyword">int</span> time)</span></span></div><div class="line">    &#123;</div><div class="line">        fieldChangeNotify(<span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
  
  
    
    <entry>
      <title></title>
      <url>http://bysonline.github.io/about/index.html</url>
      <content type="html"><![CDATA[<p><i class="fa fa-github"> github : <br></i></p>
<p><i class="fa fa-envelope"> 邮箱：xxx@xxx.com<br></i></p>
]]></content>
    </entry>
    
    <entry>
      <title></title>
      <url>http://bysonline.github.io/guitar/index.html</url>
      <content type="html"><![CDATA[<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/Guitar-1600x2560.jpg" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[categories]]></title>
      <url>http://bysonline.github.io/categories/index.html</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title><![CDATA[history]]></title>
      <url>http://bysonline.github.io/history/index.html</url>
      <content type="html"><![CDATA[<ol>
<li><p>aaaaa</p>
</li>
<li><p>bbbbb</p>
</li>
</ol>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[tags]]></title>
      <url>http://bysonline.github.io/tags/index.html</url>
      <content type="html"></content>
    </entry>
    
    <entry>
      <title></title>
      <url>http://bysonline.github.io/read/index.html</url>
      <content type="html"><![CDATA[<p><img src="http://7xqgix.com1.z0.glb.clouddn.com/09e41a58d5afb10d75e67ec34fa3e0a0.jpg" alt=""></p>
]]></content>
    </entry>
    
  
</search>
