<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>编译 hadoop-1.2.1 eclipse 插件 | Bsyonline's blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">编译 hadoop-1.2.1 eclipse 插件</h1><a id="logo" href="/.">Bsyonline's blog</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/read/"><i class="fa fa-tags"> 阅读</i></a><a href="/guitar/"><i class="fa fa-music"> 吉他屋</i></a><a href="/categories/"><i class="fa fa-book"> 分类</i></a><a href="/tags/"><i class="fa fa-tags"> 标签</i></a><a href="/history/"><i class="fa fa-tags"> 历史</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">编译 hadoop-1.2.1 eclipse 插件</h1><div class="post-meta">Jul 16, 2016<span> | </span><span class="category"><a href="/categories/大数据/">大数据</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span> | </span><span class="tag"><i class="fa fa-paperclip">&nbsp;</i><a href="/tags/Hadoop/">Hadoop</a></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-安装"><span class="toc-number">1.</span> <span class="toc-text">1. 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-下载和解压"><span class="toc-number">2.</span> <span class="toc-text">1.1 下载和解压</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-修改配置文件"><span class="toc-number">3.</span> <span class="toc-text">2. 修改配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-hadoop-1-2-1-src-contrib-eclipse-plugin-build-xml"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 hadoop-1.2.1\src\contrib\eclipse-plugin\build.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-hadoop-1-2-1-src-contrib-build-contrib-xml"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 hadoop-1.2.1\src\contrib\build-contrib.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-hadoop-1-2-1-src-contrib-eclipse-plugin-META-INF-MANIFEST-MF"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 hadoop-1.2.1\src\contrib\eclipse-plugin\META-INF\MANIFEST.MF</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-编译"><span class="toc-number">4.</span> <span class="toc-text">3. 编译</span></a></li></ol></div></div><div class="post-content"><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h3><p>需要安装 ant 环境，Ubuntu 默认已经安装了 ant ，如果没有，执行下面命令安装。<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-<span class="keyword">get</span> install ant</div></pre></td></tr></table></figure></p>
<h3 id="1-1-下载和解压"><a href="#1-1-下载和解压" class="headerlink" title="1.1 下载和解压"></a>1.1 下载和解压</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget https:<span class="comment">//archive.apache.org/dist/hadoop/common/hadoop-1.2.1/hadoop-1.2.1.tar.gz</span></div><div class="line">tar -zxf hadoop-<span class="number">1.2</span>.<span class="number">1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></div></pre></td></tr></table></figure>
<h3 id="2-修改配置文件"><a href="#2-修改配置文件" class="headerlink" title="2. 修改配置文件"></a>2. 修改配置文件</h3><h4 id="2-1-hadoop-1-2-1-src-contrib-eclipse-plugin-build-xml"><a href="#2-1-hadoop-1-2-1-src-contrib-eclipse-plugin-build-xml" class="headerlink" title="2.1 hadoop-1.2.1\src\contrib\eclipse-plugin\build.xml"></a>2.1 <strong>hadoop-1.2.1\src\contrib\eclipse-plugin\build.xml</strong></h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> standalone=<span class="string">"no"</span><span class="meta">?&gt;</span></span></span></div><div class="line"></div><div class="line"><span class="comment">&lt;!--</span></div><div class="line">   Licensed to the Apache Software Foundation (ASF) under one or more</div><div class="line">   contributor license agreements.  See the NOTICE file distributed with</div><div class="line">   this work for additional information regarding copyright ownership.</div><div class="line">   The ASF licenses this file to You under the Apache License, Version 2.0</div><div class="line">   (the "License"); you may not use this file except in compliance with</div><div class="line">   the License.  You may obtain a copy of the License at</div><div class="line"></div><div class="line">       http://www.apache.org/licenses/LICENSE-2.0</div><div class="line"></div><div class="line">   Unless required by applicable law or agreed to in writing, software</div><div class="line">   distributed under the License is distributed on an "AS IS" BASIS,</div><div class="line">   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class="line">   See the License for the specific language governing permissions and</div><div class="line">   limitations under the License.</div><div class="line">--&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">default</span>=<span class="string">"jar"</span> <span class="attr">name</span>=<span class="string">"eclipse-plugin"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">import</span> <span class="attr">file</span>=<span class="string">"../build-contrib.xml"</span>/&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">id</span>=<span class="string">"eclipse-sdk-jars"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;eclipse.home&#125;</span><span class="xml"><span class="tag"><span class="string">/plugins/"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.ui*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.jdt*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.core*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.equinox*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.debug*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.osgi*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.swt*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.jface*.jar"</span>/&gt;</span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"org.eclipse.team.cvs.ssh2*.jar"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"com.jcraft.jsch*.jar"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Override classpath to include Eclipse SDK jars --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">id</span>=<span class="string">"classpath"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/classes"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">refid</span>=<span class="string">"eclipse-sdk-jars"</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"*.jar"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Skip building if eclipse.home is unset. --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"check-contrib"</span> <span class="attr">unless</span>=<span class="string">"eclipse.home"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"skip.contrib"</span> <span class="attr">value</span>=<span class="string">"yes"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"eclipse.home unset: skipping eclipse plugin"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"compile"</span> <span class="attr">depends</span>=<span class="string">"init, ivy-retrieve-common"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">javac</span></span></div><div class="line">     <span class="attr">encoding</span>=<span class="string">"$</span><span class="template-variable">&#123;build.encoding&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">srcdir</span>=<span class="string">"$</span><span class="template-variable">&#123;src.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">includes</span>=<span class="string">"**/*.java"</span></div><div class="line">     <span class="attr">destdir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">debug</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.debug&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">deprecation</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.deprecation&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"classpath"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">javac</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Override jar target to specify manifest --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"jar"</span> <span class="attr">depends</span>=<span class="string">"compile"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span>/&gt;</span></span></div><div class="line">     <span class="comment">&lt;!--</span></div><div class="line">    &lt;copy file="$<span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="comment">/build/hadoop-core-$</span></span><span class="template-variable">&#123;version&#125;</span><span class="xml"><span class="comment">.jar" tofile="$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="comment">/lib/hadoop-core.jar" verbose="true"/&gt;</span></span></div><div class="line">    &lt;copy file="$<span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="comment">/build/ivy/lib/Hadoop/common/commons-cli-$</span></span><span class="template-variable">&#123;commons-cli.version&#125;</span><span class="xml"><span class="comment">.jar"  todir="$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="comment">/lib" verbose="true"/&gt;--&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/hadoop-core-$</span></span></span><span class="template-variable">&#123;version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span> <span class="attr">tofile</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/hadoop-core.jar"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/commons-cli-1.2.jar"</span>  <span class="attr">todir</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/commons-lang-2.4.jar"</span>  <span class="attr">todir</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/commons-configuration-1.6.jar"</span>  <span class="attr">todir</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/jackson-mapper-asl-1.8.8.jar"</span>  <span class="attr">todir</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/jackson-core-asl-1.8.8.jar"</span>  <span class="attr">todir</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib/commons-httpclient-3.0.1.jar"</span>  <span class="attr">todir</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> <span class="attr">verbose</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">jar</span></span></div><div class="line">      <span class="attr">jarfile</span>=<span class="string">"$</span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/hadoop-$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">-$</span></span></span><span class="template-variable">&#123;version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span></span></span></div><div class="line">      <span class="attr">manifest</span>=<span class="string">"$</span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/META-INF/MANIFEST.MF"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">includes</span>=<span class="string">"classes/ lib/"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">includes</span>=<span class="string">"resources/ plugin.xml"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;/<span class="name">jar</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="2-2-hadoop-1-2-1-src-contrib-build-contrib-xml"><a href="#2-2-hadoop-1-2-1-src-contrib-build-contrib-xml" class="headerlink" title="2.2 hadoop-1.2.1\src\contrib\build-contrib.xml"></a>2.2 <strong>hadoop-1.2.1\src\contrib\build-contrib.xml</strong></h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span><span class="meta">?&gt;</span></span></span></div><div class="line"></div><div class="line"><span class="comment">&lt;!--</span></div><div class="line">   Licensed to the Apache Software Foundation (ASF) under one or more</div><div class="line">   contributor license agreements.  See the NOTICE file distributed with</div><div class="line">   this work for additional information regarding copyright ownership.</div><div class="line">   The ASF licenses this file to You under the Apache License, Version 2.0</div><div class="line">   (the "License"); you may not use this file except in compliance with</div><div class="line">   the License.  You may obtain a copy of the License at</div><div class="line"></div><div class="line">       http://www.apache.org/licenses/LICENSE-2.0</div><div class="line"></div><div class="line">   Unless required by applicable law or agreed to in writing, software</div><div class="line">   distributed under the License is distributed on an "AS IS" BASIS,</div><div class="line">   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</div><div class="line">   See the License for the specific language governing permissions and</div><div class="line">   limitations under the License.</div><div class="line">--&gt;</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- Imported by contrib/*/build.xml files to share generic targets. --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">name</span>=<span class="string">"hadoopbuildcontrib"</span> <span class="attr">xmlns:ivy</span>=<span class="string">"antlib:org.apache.ivy.ant"</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"root"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;basedir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"version"</span> <span class="attr">value</span>=<span class="string">"1.2.1"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ivy.version"</span> <span class="attr">value</span>=<span class="string">"2.1.0"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"eclipse.home"</span> <span class="attr">location</span>=<span class="string">"D:/Program Files/eclipse-jee-indigo-SR2-win32-x86_64"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hadoop.root"</span> <span class="attr">location</span>=<span class="string">"D:/hadoop/hadoop-1.2.1"</span>/&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Load all the default properties, and any the user wants    --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- to contribute (without having to type -D or edit this file --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;user.home&#125;</span><span class="xml"><span class="tag"><span class="string">/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">.build.properties"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/build.properties"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build.properties"</span> /&gt;</span></span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"src.dir"</span>  <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/java"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"src.test"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"src.test.data"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test/data"</span>/&gt;</span></span></div><div class="line">  <span class="comment">&lt;!-- Property added for contrib system tests --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build-fi.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"system-test-build-dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build-fi.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/system"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"src.test.system"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test/system"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"src.examples"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/examples"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">available</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;src.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">type</span>=<span class="string">"dir"</span> <span class="attr">property</span>=<span class="string">"examples.available"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">available</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;src.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">type</span>=<span class="string">"dir"</span> <span class="attr">property</span>=<span class="string">"test.available"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Property added for contrib system tests --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">available</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;src.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">type</span>=<span class="string">"dir"</span></span></span></div><div class="line">      <span class="attr">property</span>=<span class="string">"test.system.available"</span>/&gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"conf.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/conf"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.output.format"</span> <span class="attr">value</span>=<span class="string">"plain"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.output"</span> <span class="attr">value</span>=<span class="string">"no"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.timeout"</span> <span class="attr">value</span>=<span class="string">"900000"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.contrib.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/contrib"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/contrib/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.classes"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/classes"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.test"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/test"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.examples"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/examples"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hadoop.log.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/test/logs"</span>/&gt;</span></span></div><div class="line">  <span class="comment">&lt;!-- all jars together --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javac.deprecation"</span> <span class="attr">value</span>=<span class="string">"off"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javac.debug"</span> <span class="attr">value</span>=<span class="string">"on"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.ivy.lib.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/ivy/lib"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javadoc.link"</span></span></div><div class="line">            <span class="attr">value</span>=<span class="string">"http://java.sun.com/j2se/1.4/docs/api/"</span>/&gt;</div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.encoding"</span> <span class="attr">value</span>=<span class="string">"ISO-8859-1"</span>/&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">id</span>=<span class="string">"lib.jars"</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;root&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">includes</span>=<span class="string">"lib/*.jar"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- Property added for contrib system tests --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.test.system"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/system"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.system.classes"</span></span></div><div class="line">      <span class="attr">location</span>=<span class="string">"$</span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/classes"</span>/&gt;</span></span></div><div class="line"></div><div class="line">   <span class="comment">&lt;!-- IVY properties set here --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ivy.dir"</span> <span class="attr">location</span>=<span class="string">"ivy"</span> /&gt;</span></div><div class="line">  <span class="comment">&lt;!-- loglevel take values like default|download-only|quiet --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"loglevel"</span> <span class="attr">value</span>=<span class="string">"quiet"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ivysettings.xml"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/ivy/ivysettings.xml"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">loadproperties</span> <span class="attr">srcfile</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ivy.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/libraries.properties"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">loadproperties</span> <span class="attr">srcfile</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/ivy/libraries.properties"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ivy.jar"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/ivy/ivy-$</span></span></span><span class="template-variable">&#123;ivy.version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ivy_repo_url"</span></span></div><div class="line">     <span class="attr">value</span>=<span class="string">"http://repo2.maven.org/maven2/org/apache/ivy/ivy/$</span><span class="template-variable">&#123;ivy.version&#125;</span><span class="xml"><span class="tag"><span class="string">/ivy-$</span></span></span><span class="template-variable">&#123;ivy.version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.dir"</span> <span class="attr">location</span>=<span class="string">"build"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.ivy.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/ivy"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.ivy.lib.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.ivy.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.ivy.report.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.ivy.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/report"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"common.ivy.lib.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.ivy.lib.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/$</span></span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">/common"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!--this is the naming policy for artifacts we want pulled down--&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"ivy.artifact.retrieve.pattern"</span></span></div><div class="line">                   <span class="attr">value</span>=<span class="string">"$</span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">/[conf]/[artifact]-[revision].[ext]"</span>/&gt;</span></span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- the normal classpath --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">id</span>=<span class="string">"contrib-classpath"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/tools"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">refid</span>=<span class="string">"lib.jars"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/classes"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"**/*.jar"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">refid</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">.common-classpath"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">path</span>=<span class="string">"$</span></span><span class="template-variable">&#123;clover.jar&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- the unit test classpath --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">id</span>=<span class="string">"test.classpath"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/test/classes"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/contrib/test"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;conf.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/examples"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">refid</span>=<span class="string">"contrib-classpath"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- The system test classpath --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">path</span> <span class="attr">id</span>=<span class="string">"test.system.classpath"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/contrib/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test/system"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/classes"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi/system/classes"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi/system/test/classes"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi/tools"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.home&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.conf.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.conf.dir.deployed&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/examples"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi/test/classes"</span> /&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">refid</span>=<span class="string">"contrib-classpath"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test/lib"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"**/*.jar"</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">exclude</span> <span class="attr">name</span>=<span class="string">"**/excluded/"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi/system"</span>&gt;</span></span></div><div class="line">       <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"**/*.jar"</span> /&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">exclude</span> <span class="attr">name</span>=<span class="string">"**/excluded/"</span> /&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build-fi/test/testjar"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"**/*.jar"</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">exclude</span> <span class="attr">name</span>=<span class="string">"**/excluded/"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/contrib/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"**/*.jar"</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">exclude</span> <span class="attr">name</span>=<span class="string">"**/excluded/"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- to be overridden by sub-projects --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"check-contrib"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"init-contrib"</span>/&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Stuff needed by all targets                            --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"init"</span> <span class="attr">depends</span>=<span class="string">"check-contrib"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="comment">&lt;!-- The below two tags  added for contrib system tests --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.system.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.log.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">antcall</span> <span class="attr">target</span>=<span class="string">"init-contrib"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Compile a Hadoop contrib's files                       --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"compile"</span> <span class="attr">depends</span>=<span class="string">"init, ivy-retrieve-common"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">javac</span></span></div><div class="line">     <span class="attr">encoding</span>=<span class="string">"$</span><span class="template-variable">&#123;build.encoding&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">srcdir</span>=<span class="string">"$</span><span class="template-variable">&#123;src.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">includes</span>=<span class="string">"**/*.java"</span></div><div class="line">     <span class="attr">destdir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">debug</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.debug&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">deprecation</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.deprecation&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"contrib-classpath"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">javac</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ======================================================= --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Compile a Hadoop contrib's example files (if available) --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ======================================================= --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"compile-examples"</span> <span class="attr">depends</span>=<span class="string">"compile"</span> <span class="attr">if</span>=<span class="string">"examples.available"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">javac</span></span></div><div class="line">     <span class="attr">encoding</span>=<span class="string">"$</span><span class="template-variable">&#123;build.encoding&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">srcdir</span>=<span class="string">"$</span><span class="template-variable">&#123;src.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">includes</span>=<span class="string">"**/*.java"</span></div><div class="line">     <span class="attr">destdir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">debug</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.debug&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"contrib-classpath"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">javac</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Compile test code                                                  --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"compile-test"</span> <span class="attr">depends</span>=<span class="string">"compile-examples"</span> <span class="attr">if</span>=<span class="string">"test.available"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">javac</span></span></div><div class="line">     <span class="attr">encoding</span>=<span class="string">"$</span><span class="template-variable">&#123;build.encoding&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">srcdir</span>=<span class="string">"$</span><span class="template-variable">&#123;src.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">includes</span>=<span class="string">"**/*.java"</span></div><div class="line">     <span class="attr">excludes</span>=<span class="string">"system/**/*.java"</span></div><div class="line">     <span class="attr">destdir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">     <span class="attr">debug</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.debug&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"test.classpath"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">javac</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Compile system test code                                           --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"compile-test-system"</span> <span class="attr">depends</span>=<span class="string">"compile-examples"</span></span></div><div class="line">     <span class="attr">if</span>=<span class="string">"test.system.available"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">javac</span></span></div><div class="line">       <span class="attr">encoding</span>=<span class="string">"$</span><span class="template-variable">&#123;build.encoding&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">       <span class="attr">srcdir</span>=<span class="string">"$</span><span class="template-variable">&#123;src.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">       <span class="attr">includes</span>=<span class="string">"**/*.java"</span></div><div class="line">       <span class="attr">destdir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.system.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">       <span class="attr">debug</span>=<span class="string">"$</span><span class="template-variable">&#123;javac.debug&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"test.system.classpath"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">javac</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Make a Hadoop contrib's jar                            --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"jar"</span> <span class="attr">depends</span>=<span class="string">"compile"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">jar</span></span></div><div class="line">      <span class="attr">jarfile</span>=<span class="string">"$</span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/hadoop-$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">-$</span></span></span><span class="template-variable">&#123;version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span></span></span></div><div class="line">      <span class="attr">basedir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>     </span></span></div><div class="line">    /&gt;</div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Make a Hadoop contrib's examples jar                   --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"jar-examples"</span> <span class="attr">depends</span>=<span class="string">"compile-examples"</span></span></div><div class="line">          <span class="attr">if</span>=<span class="string">"examples.available"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">jar</span> <span class="attr">jarfile</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/hadoop-$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">-examples-$</span></span></span><span class="template-variable">&#123;version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.classes&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">jar</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Package a Hadoop contrib                               --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ====================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"package"</span> <span class="attr">depends</span>=<span class="string">"jar, jar-examples"</span> <span class="attr">unless</span>=<span class="string">"skip.contrib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;dist.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/contrib/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">copy</span> <span class="attr">todir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;dist.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/contrib/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">includeEmptyDirs</span>=<span class="string">"false"</span> <span class="attr">flatten</span>=<span class="string">"true"</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">"hadoop-$</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">-$</span></span></span><span class="template-variable">&#123;version&#125;</span><span class="xml"><span class="tag"><span class="string">.jar"</span> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">copy</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Run unit tests                                                     --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">depends</span>=<span class="string">"compile-test, compile"</span> <span class="attr">if</span>=<span class="string">"test.available"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.log.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.log.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">junit</span></span></div><div class="line">      <span class="attr">printsummary</span>=<span class="string">"yes"</span> <span class="attr">showoutput</span>=<span class="string">"$</span><span class="template-variable">&#123;test.output&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">      <span class="attr">haltonfailure</span>=<span class="string">"no"</span> <span class="attr">fork</span>=<span class="string">"yes"</span> <span class="attr">maxmemory</span>=<span class="string">"512m"</span></div><div class="line">      <span class="attr">errorProperty</span>=<span class="string">"tests.failed"</span> <span class="attr">failureProperty</span>=<span class="string">"tests.failed"</span></div><div class="line">      <span class="attr">timeout</span>=<span class="string">"$</span><span class="template-variable">&#123;test.timeout&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.build.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">/data"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"build.test"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"src.test.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;src.test.data&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"contrib.name"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line"></div><div class="line">      <span class="comment">&lt;!-- requires fork=yes for:</span></div><div class="line">        relative File paths to use the specified user.dir</div><div class="line">        classpath to use build/contrib/*.jar</div><div class="line">      --&gt;</div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"user.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">/data"</span>/&gt;</span></span></div><div class="line"></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"fs.default.name"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;fs.<span class="keyword">default</span>.name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"hadoop.test.localoutputfile"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.test.localoutputfile&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"hadoop.log.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.log.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"taskcontroller-path"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;taskcontroller-path&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"taskcontroller-ugi"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;taskcontroller-ugi&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"test.classpath"</span>/&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">formatter</span> <span class="attr">type</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.junit.output.format&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">batchtest</span> <span class="attr">todir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">unless</span>=<span class="string">"testcase"</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;src.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">                 <span class="attr">includes</span>=<span class="string">"**/Test*.java"</span> <span class="attr">excludes</span>=<span class="string">"**/$</span><span class="template-variable">&#123;test.exclude&#125;</span><span class="xml"><span class="tag"><span class="string">.java, system/**/*.java"</span> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">batchtest</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">batchtest</span> <span class="attr">todir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">if</span>=<span class="string">"testcase"</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;src.test&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">includes</span>=<span class="string">"**/$</span></span></span><span class="template-variable">&#123;testcase&#125;</span><span class="xml"><span class="tag"><span class="string">.java"</span> <span class="attr">excludes</span>=<span class="string">"system/**/*.java"</span> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">batchtest</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">junit</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">antcall</span> <span class="attr">target</span>=<span class="string">"checkfailure"</span>/&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Run system tests                                                   --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"test-system"</span> <span class="attr">depends</span>=<span class="string">"compile, compile-test-system, jar"</span></span></div><div class="line">     <span class="attr">if</span>=<span class="string">"test.system.available"</span>&gt;</div><div class="line">     <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/extraconf"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/extraconf"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.src.dir"</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.printsummary"</span> <span class="attr">value</span>=<span class="string">"yes"</span> /&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.haltonfailure"</span> <span class="attr">value</span>=<span class="string">"no"</span> /&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.maxmemory"</span> <span class="attr">value</span>=<span class="string">"512m"</span> /&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.fork.mode"</span> <span class="attr">value</span>=<span class="string">"perTest"</span> /&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.all.tests.file"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.src.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/all-tests"</span> /&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.build.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/test"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basedir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.timeout"</span> <span class="attr">value</span>=<span class="string">"900000"</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.output.format"</span> <span class="attr">value</span>=<span class="string">"plain"</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.tools.input.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;basedir&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test/tools/data"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"c++.src"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;basedir&#125;</span><span class="xml"><span class="tag"><span class="string">/src/c++"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.include"</span> <span class="attr">value</span>=<span class="string">"Test*"</span>/&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"c++.libhdfs.src"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;c++.src&#125;</span><span class="xml"><span class="tag"><span class="string">/libhdfs"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.build.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/data"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.cache.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/cache"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.debug.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/debug"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.log.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">/logs"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">patternset</span> <span class="attr">id</span>=<span class="string">"empty.exclude.list.id"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">exec</span> <span class="attr">executable</span>=<span class="string">"sed"</span> <span class="attr">inputstring</span>=<span class="string">"$</span></span><span class="template-variable">&#123;os.name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">            <span class="attr">outputproperty</span>=<span class="string">"nonspace.os"</span>&gt;</div><div class="line">          <span class="tag">&lt;<span class="name">arg</span> <span class="attr">value</span>=<span class="string">"s/ /_/g"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">exec</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.platform"</span></span></div><div class="line">         <span class="attr">value</span>=<span class="string">"$</span><span class="template-variable">&#123;nonspace.os&#125;</span><span class="xml"><span class="tag"><span class="string">-$</span></span></span><span class="template-variable">&#123;os.arch&#125;</span><span class="xml"><span class="tag"><span class="string">-$</span></span></span><span class="template-variable">&#123;sun.arch.data.model&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"build.native"</span></span></div><div class="line">         <span class="attr">value</span>=<span class="string">"$</span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/native/$</span></span></span><span class="template-variable">&#123;build.platform&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"lib.dir"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/lib"</span>/&gt;</span></span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"install.c++.examples"</span></span></div><div class="line">         <span class="attr">value</span>=<span class="string">"$</span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/build/c++-examples/$</span></span></span><span class="template-variable">&#123;build.platform&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">condition</span> <span class="attr">property</span>=<span class="string">"tests.testcase"</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">and</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">isset</span> <span class="attr">property</span>=<span class="string">"testcase"</span> /&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">and</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">condition</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"test.junit.jvmargs"</span> <span class="attr">value</span>=<span class="string">"-ea"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">macro-system-test-runner</span> <span class="attr">test.file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.all.tests.file&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">                     <span class="attr">classpath</span>=<span class="string">"test.system.classpath"</span></div><div class="line">                     <span class="attr">test.dir</span>=<span class="string">"$</span><span class="template-variable">&#123;build.test.system&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">                     <span class="attr">fileset.dir</span>=<span class="string">"$</span><span class="template-variable">&#123;hadoop.root&#125;</span><span class="xml"><span class="tag"><span class="string">/src/contrib/$</span></span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">/src/test/system"</span></span></span></div><div class="line">                     <span class="attr">hadoop.conf.dir.deployed</span>=<span class="string">"$</span><span class="template-variable">&#123;hadoop.conf.dir.deployed&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">macro-system-test-runner</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">macrodef</span> <span class="attr">name</span>=<span class="string">"macro-system-test-runner"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">"test.file"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">"classpath"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">"test.dir"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">"fileset.dir"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">"hadoop.conf.dir.deployed"</span> <span class="attr">default</span>=<span class="string">""</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">sequential</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/data"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/data"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/logs"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">mkdir</span> <span class="attr">dir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/logs"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.src.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/hadoop-policy.xml"</span></span></span></div><div class="line">        <span class="attr">todir</span>=<span class="string">"@</span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/extraconf"</span> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">copy</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.src.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/fi-site.xml"</span></span></span></div><div class="line">        <span class="attr">todir</span>=<span class="string">"@</span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/extraconf"</span> /&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">junit</span> <span class="attr">showoutput</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.output&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">        <span class="attr">printsummary</span>=<span class="string">"$</span><span class="template-variable">&#123;test.junit.printsummary&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">        <span class="attr">haltonfailure</span>=<span class="string">"$</span><span class="template-variable">&#123;test.junit.haltonfailure&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">        <span class="attr">fork</span>=<span class="string">"yes"</span></div><div class="line">        <span class="attr">forkmode</span>=<span class="string">"$</span><span class="template-variable">&#123;test.junit.fork.mode&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">        <span class="attr">maxmemory</span>=<span class="string">"$</span><span class="template-variable">&#123;test.junit.maxmemory&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">        <span class="attr">dir</span>=<span class="string">"$</span><span class="template-variable">&#123;basedir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">timeout</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;test.timeout&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">        <span class="attr">errorProperty</span>=<span class="string">"tests.failed"</span> <span class="attr">failureProperty</span>=<span class="string">"tests.failed"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">jvmarg</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.junit.jvmargs&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"java.net.preferIPv4Stack"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.build.data"</span> <span class="attr">value</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/data"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.tools.input.dir"</span> <span class="attr">value</span> = <span class="string">"$</span></span><span class="template-variable">&#123;test.tools.input.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.cache.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.cache.data&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.debug.data"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.debug.data&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"hadoop.log.dir"</span> <span class="attr">value</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/logs"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.src.dir"</span> <span class="attr">value</span>=<span class="string">"@</span></span><span class="template-variable">&#123;fileset.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"taskcontroller-path"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;taskcontroller-path&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"taskcontroller-ugi"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;taskcontroller-ugi&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.build.extraconf"</span> <span class="attr">value</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/extraconf"</span> /&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"hadoop.policy.file"</span> <span class="attr">value</span>=<span class="string">"hadoop-policy.xml"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"java.library.path"</span></span></div><div class="line">          <span class="attr">value</span>=<span class="string">"$</span><span class="template-variable">&#123;build.native&#125;</span><span class="xml"><span class="tag"><span class="string">/lib:$</span></span></span><span class="template-variable">&#123;lib.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/native/$</span></span></span><span class="template-variable">&#123;build.platform&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"install.c++.examples"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;install.c++.examples&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">syspropertyset</span> <span class="attr">dynamic</span>=<span class="string">"no"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">propertyref</span> <span class="attr">name</span>=<span class="string">"hadoop.tmp.dir"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">syspropertyset</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- set compile.c++ in the child jvm only if it is set --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">syspropertyset</span> <span class="attr">dynamic</span>=<span class="string">"no"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">propertyref</span> <span class="attr">name</span>=<span class="string">"compile.c++"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">syspropertyset</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Pass probability specifications to the spawn JVM --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">syspropertyset</span> <span class="attr">id</span>=<span class="string">"FaultProbabilityProperties"</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">propertyref</span> <span class="attr">regex</span>=<span class="string">"fi.*"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">syspropertyset</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">sysproperty</span> <span class="attr">key</span>=<span class="string">"test.system.hdrc.deployed.hadoopconfdir"</span></span></div><div class="line">                     <span class="attr">value</span>=<span class="string">"@</span><span class="template-variable">&#123;hadoop.conf.dir.deployed&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">classpath</span> <span class="attr">refid</span>=<span class="string">"@</span></span><span class="template-variable">&#123;classpath&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">formatter</span> <span class="attr">type</span>=<span class="string">"$</span></span><span class="template-variable">&#123;test.junit.output.format&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> /&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">batchtest</span> <span class="attr">todir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">unless</span>=<span class="string">"testcase"</span>&gt;</span></span></div><div class="line">          <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;fileset.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span></span></span></div><div class="line">            <span class="attr">excludes</span>=<span class="string">"**/$</span><span class="template-variable">&#123;test.exclude&#125;</span><span class="xml"><span class="tag"><span class="string">.java aop/** system/**"</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">patternset</span>&gt;</span></div><div class="line">              <span class="tag">&lt;<span class="name">includesfile</span> <span class="attr">name</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.file&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">            <span class="tag">&lt;/<span class="name">patternset</span>&gt;</span></div><div class="line">          <span class="tag">&lt;/<span class="name">fileset</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">batchtest</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">batchtest</span> <span class="attr">todir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;test.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">if</span>=<span class="string">"testcase"</span>&gt;</span></span></div><div class="line">          <span class="tag">&lt;<span class="name">fileset</span> <span class="attr">dir</span>=<span class="string">"@</span></span><span class="template-variable">&#123;fileset.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">includes</span>=<span class="string">"**/$</span></span></span><span class="template-variable">&#123;testcase&#125;</span><span class="xml"><span class="tag"><span class="string">.java"</span>/&gt;</span></span></div><div class="line">        <span class="tag">&lt;/<span class="name">batchtest</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">junit</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">antcall</span> <span class="attr">target</span>=<span class="string">"checkfailure"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">sequential</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">macrodef</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"checkfailure"</span> <span class="attr">if</span>=<span class="string">"tests.failed"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">touch</span> <span class="attr">file</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.contrib.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/testsfailed"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">fail</span> <span class="attr">unless</span>=<span class="string">"continueOnFailure"</span>&gt;</span>Contrib Tests failed!<span class="tag">&lt;/<span class="name">fail</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- Clean.  Delete the build files, and their directories              --&gt;</span></div><div class="line">  <span class="comment">&lt;!-- ================================================================== --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"clean"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">echo</span> <span class="attr">message</span>=<span class="string">"contrib: $</span></span><span class="template-variable">&#123;name&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">dir</span>=<span class="string">"$</span></span><span class="template-variable">&#123;build.dir&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"ivy-probe-antlib"</span> &gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">condition</span> <span class="attr">property</span>=<span class="string">"ivy.found"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">typefound</span> <span class="attr">uri</span>=<span class="string">"antlib:org.apache.ivy.ant"</span> <span class="attr">name</span>=<span class="string">"cleancache"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">condition</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"ivy-download"</span> <span class="attr">description</span>=<span class="string">"To download ivy "</span> <span class="attr">unless</span>=<span class="string">"offline"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">get</span> <span class="attr">src</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ivy_repo_url&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">dest</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;ivy.jar&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">usetimestamp</span>=<span class="string">"true"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"ivy-init-antlib"</span> <span class="attr">depends</span>=<span class="string">"ivy-download,ivy-probe-antlib"</span> <span class="attr">unless</span>=<span class="string">"ivy.found"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">typedef</span> <span class="attr">uri</span>=<span class="string">"antlib:org.apache.ivy.ant"</span> <span class="attr">onerror</span>=<span class="string">"fail"</span></span></div><div class="line">      <span class="attr">loaderRef</span>=<span class="string">"ivyLoader"</span>&gt;</div><div class="line">      <span class="tag">&lt;<span class="name">classpath</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">pathelement</span> <span class="attr">location</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ivy.jar&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">      <span class="tag">&lt;/<span class="name">classpath</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">typedef</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">fail</span> &gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">condition</span> &gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">not</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">typefound</span> <span class="attr">uri</span>=<span class="string">"antlib:org.apache.ivy.ant"</span> <span class="attr">name</span>=<span class="string">"cleancache"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">not</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">condition</span>&gt;</span></div><div class="line">      You need Apache Ivy 2.0 or later from http://ant.apache.org/</div><div class="line">      It could not be loaded from $<span class="template-variable">&#123;ivy_repo_url&#125;</span><span class="xml"></span></div><div class="line">    <span class="tag">&lt;/<span class="name">fail</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"ivy-init"</span> <span class="attr">depends</span>=<span class="string">"ivy-init-antlib"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ivy:configure</span> <span class="attr">settingsid</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">.ivy.settings"</span> <span class="attr">file</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;ivysettings.xml&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"ivy-resolve-common"</span> <span class="attr">depends</span>=<span class="string">"ivy-init"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ivy:resolve</span> <span class="attr">settingsRef</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">.ivy.settings"</span> <span class="attr">conf</span>=<span class="string">"common"</span> <span class="attr">log</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;loglevel&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"></div><div class="line">  <span class="tag">&lt;<span class="name">target</span> <span class="attr">name</span>=<span class="string">"ivy-retrieve-common"</span> <span class="attr">depends</span>=<span class="string">"ivy-resolve-common"</span></span></div><div class="line">    <span class="attr">description</span>=<span class="string">"Retrieve Ivy-managed artifacts for the compile/test configurations"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">ivy:retrieve</span> <span class="attr">settingsRef</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">.ivy.settings"</span></span></span></div><div class="line">      <span class="attr">pattern</span>=<span class="string">"$</span><span class="template-variable">&#123;build.ivy.lib.dir&#125;</span><span class="xml"><span class="tag"><span class="string">/$</span></span></span><span class="template-variable">&#123;ivy.artifact.retrieve.pattern&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">sync</span>=<span class="string">"true"</span> <span class="attr">log</span>=<span class="string">"$</span></span></span><span class="template-variable">&#123;loglevel&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">    <span class="tag">&lt;<span class="name">ivy:cachepath</span> <span class="attr">pathid</span>=<span class="string">"$</span></span><span class="template-variable">&#123;ant.project.name&#125;</span><span class="xml"><span class="tag"><span class="string">.common-classpath"</span> <span class="attr">conf</span>=<span class="string">"common"</span> /&gt;</span></span></div><div class="line">  <span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="2-3-hadoop-1-2-1-src-contrib-eclipse-plugin-META-INF-MANIFEST-MF"><a href="#2-3-hadoop-1-2-1-src-contrib-eclipse-plugin-META-INF-MANIFEST-MF" class="headerlink" title="2.3 hadoop-1.2.1\src\contrib\eclipse-plugin\META-INF\MANIFEST.MF"></a>2.3 <strong>hadoop-1.2.1\src\contrib\eclipse-plugin\META-INF\MANIFEST.MF</strong></h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">Manifest-<span class="string">Version:</span> <span class="number">1.0</span></div><div class="line">Bundle-<span class="string">ManifestVersion:</span> <span class="number">2</span></div><div class="line">Bundle-<span class="string">Name:</span> MapReduce Tools <span class="keyword">for</span> Eclipse</div><div class="line">Bundle-<span class="string">SymbolicName:</span> org.apache.hadoop.eclipse;<span class="string">singleton:</span>=<span class="literal">true</span></div><div class="line">Bundle-<span class="string">Version:</span> <span class="number">0.18</span></div><div class="line">Bundle-<span class="string">Activator:</span> org.apache.hadoop.eclipse.Activator</div><div class="line">Bundle-<span class="string">Localization:</span> plugin</div><div class="line">Require-<span class="string">Bundle:</span> org.eclipse.ui,</div><div class="line">org.eclipse.core.runtime,</div><div class="line">org.eclipse.jdt.launching,</div><div class="line">org.eclipse.debug.core,</div><div class="line">org.eclipse.jdt,</div><div class="line">org.eclipse.jdt.core,</div><div class="line">org.eclipse.core.resources,</div><div class="line">org.eclipse.ui.ide,</div><div class="line">org.eclipse.jdt.ui,</div><div class="line">org.eclipse.debug.ui,</div><div class="line">org.eclipse.jdt.debug.ui,</div><div class="line">org.eclipse.core.expressions,</div><div class="line">org.eclipse.ui.cheatsheets,</div><div class="line">org.eclipse.ui.console,</div><div class="line">org.eclipse.ui.navigator,</div><div class="line">org.eclipse.core.filesystem,</div><div class="line">org.apache.commons.logging</div><div class="line">Eclipse-<span class="string">LazyStart:</span> <span class="literal">true</span></div><div class="line">Bundle-<span class="string">ClassPath:</span> classes<span class="regexp">/,lib/</span>hadoop-core.jar,lib<span class="regexp">/jackson-core-asl-1.8.8.jar ,lib/</span>jackson-mapper-asl<span class="number">-1.8</span><span class="number">.8</span>.jar, lib<span class="regexp">/commons-configuration-1.6.jar,lib/</span>commons-lang<span class="number">-2.4</span>.jar, lib<span class="regexp">/commons-httpclient-3.0.1.jar,lib/</span>commons-cli<span class="number">-1.2</span>.jar</div><div class="line">Bundle-<span class="string">Vendor:</span> Apache Hadoop</div></pre></td></tr></table></figure>
<h3 id="3-编译"><a href="#3-编译" class="headerlink" title="3. 编译"></a>3. 编译</h3><p>配置文件修改完成后，使用ant进行编译（过程需要联网）。<br><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ant D:<span class="symbol">\h</span>adoop<span class="symbol">\h</span>adoop-1.2.1<span class="symbol">\s</span>rc<span class="symbol">\c</span>ontrib<span class="symbol">\e</span>clipse-plugin<span class="symbol">\b</span>uild.xml</div></pre></td></tr></table></figure></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://bysonline.github.io/2016/07/16/编译 hadoop-1.2.1 eclipse 插件/" data-id="cis2ueaxb0098v00qr0uyezmm" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Hadoop/">Hadoop</a></div><div class="post-nav"><a href="/2016/07/16/Hbase-0.98.17-hadoop2 安装/" class="pre">hbase-0.98.17-hadoop2 安装</a><a href="/2016/07/16/读书笔记：hadoop权威指南（Hadoop The Definitive Guide）/" class="next">读书笔记：hadoop权威指南（Hadoop The Definitive Guide）</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ELK/">ELK</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Elasticsearch/">Elasticsearch</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/chinadaas/">chinadaas</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/technology/">technology</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程/">编程</a><span class="category-list-count">47</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/node-js/" style="font-size: 15px;">node.js</a> <a href="/tags/blackberry/" style="font-size: 15px;">blackberry</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/chinadaas/" style="font-size: 15px;">chinadaas</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/ELK/" style="font-size: 15px;">ELK</a> <a href="/tags/Elasticsearch/" style="font-size: 15px;">Elasticsearch</a> <a href="/tags/fabric/" style="font-size: 15px;">fabric</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/gis/" style="font-size: 15px;">gis</a> <a href="/tags/gulp/" style="font-size: 15px;">gulp</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Jade/" style="font-size: 15px;">Jade</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/Oracle/" style="font-size: 15px;">Oracle</a> <a href="/tags/oracle/" style="font-size: 15px;">oracle</a> <a href="/tags/spring-boot/" style="font-size: 15px;">spring-boot</a> <a href="/tags/spring-data/" style="font-size: 15px;">spring-data</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/Zookeeper/" style="font-size: 15px;">Zookeeper</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/Thread/" style="font-size: 15px;">Thread</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/elk/" style="font-size: 15px;">elk</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/vmware/" style="font-size: 15px;">vmware</a> <a href="/tags/Javase/" style="font-size: 15px;">Javase</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/08/19/Java 反射/">Java 反射</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/16/多线程拾遗/">多线程拾遗</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/09/HashMap 的工作原理/">HashMap 的工作原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/Java 中的回调函数/">Java 中的回调函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/Java 关键字 volatile/">Java 关键字 volatile</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/02/枚举单例读取配置文件/">枚举单例读取配置文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/02/单例模式/">单例模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/29/计算时间间隔/">计算时间间隔</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/24/线程的状态/">线程的状态</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/24/面试题汇总/">面试题汇总</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Bsyonline's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>